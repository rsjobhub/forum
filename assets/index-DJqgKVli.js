import{j as e,u as fe,a as de,Q as ct,b as dt}from"./react-query-DprFZe7P.js";import{b as ut,a as c,u as oe,d as te,L as U,g as mt,R as G,e as He,f as bs,N as ds,h as ht,O as xt,B as pt,i as ft,j as Q}from"./react-vendor-AOxAJ7Hw.js";import{G as z}from"./icons-Dyxe2h2u.js";import{r as gt}from"./quill-editor-BjhXd_7i.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var qe={},Ds;function jt(){if(Ds)return qe;Ds=1;var s=ut();return qe.createRoot=s.createRoot,qe.hydrateRoot=s.hydrateRoot,qe}var vt=jt();/*! js-cookie v3.0.5 | MIT */function We(s){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)s[r]=n[r]}return s}var yt={read:function(s){return s[0]==='"'&&(s=s.slice(1,-1)),s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(s){return encodeURIComponent(s).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function xs(s,t){function n(a,i,o){if(!(typeof document>"u")){o=We({},t,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),a=encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var d in o)o[d]&&(l+="; "+d,o[d]!==!0&&(l+="="+o[d].split(";")[0]));return document.cookie=a+"="+s.write(i,a)+l}}function r(a){if(!(typeof document>"u"||arguments.length&&!a)){for(var i=document.cookie?document.cookie.split("; "):[],o={},l=0;l<i.length;l++){var d=i[l].split("="),u=d.slice(1).join("=");try{var m=decodeURIComponent(d[0]);if(o[m]=s.read(u,m),a===m)break}catch{}}return a?o[a]:o}}return Object.create({set:n,get:r,remove:function(a,i){n(a,"",We({},i,{expires:-1}))},withAttributes:function(a){return xs(this.converter,We({},this.attributes,a))},withConverter:function(a){return xs(We({},this.converter,a),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(s)}})}var P=xs(yt,{path:"/"});const Us=c.createContext(null),bt=({children:s})=>{const t=oe(),r=new URLSearchParams(t.search).get("uin"),[a,i]=c.useState(null),[o,l]=c.useState(null),[d,u]=c.useState(null),[m,p]=c.useState(!0),[j,N]=c.useState(null),y=c.useRef(null),T=te(),C="https://forumapi.rsjobhub.com/api",k=`${C}/auth/token`,f=`${C}/user`,x=async()=>{p(!0);try{let L=P.get("token"),R=P.get("userId"),M=P.get("userUIN");if(L&&R&&M){let $=await fetch(`${f}/${R}`,{method:"GET",headers:{Authorization:`Bearer ${L}`,SameSite:"Strict"}});if($.ok){const w=await $.json();l(L),u(M),i(w)}else{const w=await fetch(`${k}/${M}`,{method:"GET",headers:{"Content-Type":"application/json",SameSite:"Strict"}});if(w.ok){const _=await w.json();l(_.token),u(_.user_uin),P.set("token",_.token,{expires:7,secure:!0,sameSite:"Strict",path:"/"}),P.set("userId",_.user_id,{expires:7,secure:!0,sameSite:"Strict",path:"/"}),P.set("userUIN",_.user_uin,{expires:7,secure:!0,sameSite:"Strict",path:"/"});const O=await fetch(`${f}/${_.user_id}`,{method:"GET",headers:{Authorization:`Bearer ${_.token}`,SameSite:"Strict"}});if(O.ok){const W=await O.json();i(W);return}}i(null),l(null),u(null),P.remove("token"),P.remove("userId"),P.remove("userUIN")}}else if(r){const $=await fetch(`${k}/${r}`,{method:"GET",headers:{"Content-Type":"application/json",SameSite:"Strict"}});if($.ok){const w=await $.json();if(w.user_id===null)throw new Error("Invalid UIN");{l(w.token),u(w.user_uin),P.set("token",w.token,{expires:7,secure:!0,sameSite:"Strict",path:"/"}),P.set("userId",w.user_id,{expires:7,secure:!0,sameSite:"Strict",path:"/"}),P.set("userUIN",w.user_uin,{expires:7,secure:!0,sameSite:"Strict",path:"/"});const _=await fetch(`${f}/${w.user_id}`,{method:"GET",headers:{Authorization:`Bearer ${w.token}`,SameSite:"Strict"}});if(_.ok){const O=await _.json();i(O)}else throw new Error("Failed to fetch User Data")}}else throw new Error("Failed to Fetch Token")}else T(-1)}catch(L){console.error(L),P.remove("token"),P.remove("userId"),P.remove("userUIN"),l(null),u(null),i(null),N("Failed to Authenticate")}finally{p(!1)}},b=async()=>{try{let L=P.get("token"),R=P.get("userId"),M=P.get("userUIN");if(L&&R&&M){let $=await fetch(`${f}/${R}`,{method:"GET",headers:{Authorization:`Bearer ${L}`,SameSite:"Strict"}});if($.ok){const w=await $.json();l(L),u(M),i(w)}else{const w=await fetch(`${k}/${M}`,{method:"GET",headers:{"Content-Type":"application/json",SameSite:"Strict"}});if(w.ok){const _=await w.json();l(_.token),u(_.user_uin),P.set("token",_.token,{expires:7,secure:!0,sameSite:"Strict",path:"/"}),P.set("userId",_.user_id,{expires:7,secure:!0,sameSite:"Strict",path:"/"}),P.set("userUIN",_.user_uin,{expires:7,secure:!0,sameSite:"Strict",path:"/"});const O=await fetch(`${f}/${_.user_id}`,{method:"GET",headers:{Authorization:`Bearer ${_.token}`,SameSite:"Strict"}});if(O.ok){const W=await O.json();i(W);return}}i(null),l(null),u(null),P.remove("token"),P.remove("userId"),P.remove("userUIN")}}}catch(L){console.error("Silent token refresh failed:",L)}},D=async(L,R={})=>{const M={...R,method:R.method||"GET",headers:{...R.headers,Authorization:`Bearer ${o}`,SameSite:"Strict"}};let $=await fetch(L,M),w=await $.text(),_={};try{_=w?JSON.parse(w):{}}catch{_={}}if(_.error==="Invalid or expired token"){await b();const O=sessionStorage.getItem("token");$=await fetch(L,{...M,headers:{...M.headers,Authorization:`Bearer ${O}`}}),w=await $.text();try{_=w?JSON.parse(w):{}}catch{_={}}}return _};c.useEffect(()=>{if(o&&a)return y.current&&clearInterval(y.current),y.current=setInterval(()=>{b()},55*60*1e3),()=>{y.current&&clearInterval(y.current)}},[o,a]),c.useEffect(()=>{x()},[]);const S={currentUser:a,token:o,loading:m,error:j,isAuthenticated:!!a,autoAuthenticate:x,authFetch:D,logout:()=>{i(null),l(null),P.remove("token"),P.remove("userId"),P.remove("userUIN"),window.location.href="https://rsjobhub.com/logout.php"}};return e.jsx(Us.Provider,{value:S,children:m?e.jsx("div",{className:"mt-[2rem] flex items-center justify-center w-full spinner-container",children:e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}})}):s})};function Y(){return c.useContext(Us)}function Ps(s){return z({attr:{version:"1.1",viewBox:"0 0 17 17"},child:[{tag:"g",attr:{},child:[]},{tag:"path",attr:{d:"M6 8h-6v-6h1v4.109c1.013-3.193 4.036-5.484 7.5-5.484 3.506 0 6.621 2.36 7.574 5.739l-0.963 0.271c-0.832-2.95-3.551-5.011-6.611-5.011-3.226 0.001-6.016 2.276-6.708 5.376h4.208v1zM11 9v1h4.208c-0.693 3.101-3.479 5.375-6.708 5.375-3.062 0-5.78-2.061-6.611-5.011l-0.963 0.271c0.952 3.379 4.067 5.739 7.574 5.739 3.459 0 6.475-2.28 7.5-5.482v4.108h1v-6h-6z"},child:[]}]})(s)}function Bs(s){return z({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"},child:[]}]})(s)}function Qe(s){return z({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"},child:[]}]})(s)}function Nt(s){return z({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M64 144a48 48 0 1 0 0-96 48 48 0 1 0 0 96zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L192 64zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zM64 464a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm48-208a48 48 0 1 0 -96 0 48 48 0 1 0 96 0z"},child:[]}]})(s)}function us(s){return z({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152L0 424c0 48.6 39.4 88 88 88l272 0c48.6 0 88-39.4 88-88l0-112c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 112c0 22.1-17.9 40-40 40L88 464c-22.1 0-40-17.9-40-40l0-272c0-22.1 17.9-40 40-40l112 0c13.3 0 24-10.7 24-24s-10.7-24-24-24L88 64z"},child:[]}]})(s)}const ie=({children:s})=>e.jsx("div",{className:"forum-container",children:s});function zs(s){return z({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"},child:[]}]})(s)}function ge(s){return z({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.707 3.293a1 1 0 010 1.414L5.414 7H11a7 7 0 017 7v2a1 1 0 11-2 0v-2a5 5 0 00-5-5H5.414l2.293 2.293a1 1 0 11-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"},child:[]}]})(s)}function be(s){return z({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 15.0006L7.75732 10.758L9.17154 9.34375L12 12.1722L14.8284 9.34375L16.2426 10.758L12 15.0006Z"},child:[]}]})(s)}function Oe(s){return z({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 11H11V17H9V11ZM13 11H15V17H13V11ZM9 4V6H15V4H9Z"},child:[]}]})(s)}function $e(s){return z({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16 14h.5c.827 0 1.5-.673 1.5-1.5v-9c0-.827-.673-1.5-1.5-1.5h-13C2.673 2 2 2.673 2 3.5V18l5.333-4H16zm-9.333-2L4 14V4h12v8H6.667z"},child:[]},{tag:"path",attr:{d:"M20.5 8H20v6.001c0 1.1-.893 1.993-1.99 1.999H8v.5c0 .827.673 1.5 1.5 1.5h7.167L22 22V9.5c0-.827-.673-1.5-1.5-1.5z"},child:[]}]})(s)}function _s(s){return z({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(s)}function Hs(s){return z({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 8h-5.612l1.123-3.367c.202-.608.1-1.282-.275-1.802S14.253 2 13.612 2H12c-.297 0-.578.132-.769.36L6.531 8H4c-1.103 0-2 .897-2 2v9c0 1.103.897 2 2 2h13.307a2.01 2.01 0 0 0 1.873-1.298l2.757-7.351A1 1 0 0 0 22 12v-2c0-1.103-.897-2-2-2zM4 10h2v9H4v-9zm16 1.819L17.307 19H8V9.362L12.468 4h1.146l-1.562 4.683A.998.998 0 0 0 13 10h7v1.819z"},child:[]}]})(s)}function qs(s){return z({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2C6.486 2 2 5.589 2 10c0 2.908 1.898 5.516 5 6.934V22l5.34-4.005C17.697 17.852 22 14.32 22 10c0-4.411-4.486-8-10-8zm0 14h-.333L9 18v-2.417l-.641-.247C5.67 14.301 4 12.256 4 10c0-3.309 3.589-6 8-6s8 2.691 8 6-3.589 6-8 6z"},child:[]}]})(s)}function wt(s){return z({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"},child:[]},{tag:"circle",attr:{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor"},child:[]}]})(s)}function ps(s){return z({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19"},child:[]},{tag:"path",attr:{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z"},child:[]},{tag:"circle",attr:{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor"},child:[]}]})(s)}function kt(s){return z({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"},child:[]}]})(s)}function Ue(s){return z({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m14.06 9.02.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83a.996.996 0 0 0 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"},child:[]}]})(s)}function Ct(s){return z({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M4 11.29l1-1v1.42l-1.15 1.14L3 12.5V10H1.5L1 9.5v-8l.5-.5h12l.5.5V6h-1V2H2v7h1.5l.5.5v1.79zM10.29 13l1.86 1.85.85-.35V13h1.5l.5-.5v-5l-.5-.5h-8l-.5.5v5l.5.5h3.79zm.21-1H7V8h7v4h-1.5l-.5.5v.79l-1.15-1.14-.35-.15z"},child:[]}]})(s)}const St=({location:s,navigate:t,handleLogoClick:n,homePage:r,isDiscussionPage:a,isTagsPage:i,isProfilePage:o,profilePageRoute:l,onStartDiscussion:d,discussionOwnerId:u,userId:m,onStartDiscussionReply:p,onStartRenameDiscussion:j,deleteDiscussion:N})=>{const{currentUser:y,logout:T}=Y(),[C,k]=c.useState(!1),[f,x]=c.useState(!1),[b,D]=c.useState("all-discussions"),v=c.useRef(null),S=c.useRef(null),L=c.useRef(null),R=c.useRef(null),M=_=>{D(_)},$=()=>{k(!C),f&&x(!1)},w=()=>{x(!f),C&&k(!1)};return c.useEffect(()=>{const _=O=>{C&&v.current&&!v.current.contains(O.target)&&S.current&&!S.current.contains(O.target)&&k(!1),f&&L.current&&!L.current.contains(O.target)&&R.current&&!R.current.contains(O.target)&&x(!1)};return document.addEventListener("mousedown",_),C||f?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.removeEventListener("mousedown",_),document.body.style.overflow=""}},[C,f]),e.jsx("nav",{className:"mobile-nav",children:e.jsx(ie,{children:e.jsx("div",{className:"max-w-[1280px] my-0 mx-auto",children:e.jsx("div",{className:"flex h-[4rem] items-center justify-between",children:e.jsxs("div",{className:"relative w-full",children:[e.jsxs("nav",{className:"mobile-navbar",children:[r?e.jsx("button",{className:"menu-button",onClick:$,"aria-label":"Toggle menu",ref:S,children:e.jsx(zs,{className:"menuIcon"})}):e.jsx(U,{className:"flex items-center gap-1 logo-link",onClick:n,children:e.jsx("div",{className:"back-to-home-wrapper",children:e.jsx(Qe,{className:"back-to-home"})})}),r&&e.jsxs("div",{className:"navbar-title",onClick:w,ref:R,children:[e.jsx("span",{children:"All Discussions"}),e.jsx(be,{className:"navbar-title-caret"})]}),i&&e.jsxs("div",{className:"navbar-title",onClick:w,ref:R,children:[e.jsx("span",{children:"Tags"}),e.jsx(be,{className:"navbar-title-caret"})]}),o&&e.jsx(e.Fragment,{children:l==="posts"?e.jsxs("div",{className:"navbar-title",onClick:w,ref:R,children:[e.jsx("span",{children:"Posts"}),e.jsx(be,{className:"navbar-title-caret"})]}):null}),o&&e.jsx(e.Fragment,{children:l==="discussions"?e.jsxs("div",{className:"navbar-title",onClick:w,ref:R,children:[e.jsx("span",{children:"Discussions"}),e.jsx(be,{className:"navbar-title-caret"})]}):null}),o&&e.jsx(e.Fragment,{children:l==="likes"?e.jsxs("div",{className:"navbar-title",onClick:w,ref:R,children:[e.jsx("span",{children:"Likes"}),e.jsx(be,{className:"navbar-title-caret"})]}):null}),o&&e.jsx(e.Fragment,{children:l==="mentions"?e.jsxs("div",{className:"navbar-title",onClick:w,ref:R,children:[e.jsx("span",{children:"Mentions"}),e.jsx(be,{className:"navbar-title-caret"})]}):null}),r&&e.jsx("button",{className:"compose-button","aria-label":"Compose new discussion",onClick:d,children:e.jsx(us,{className:"compose-button-icon"})}),a&&e.jsx("button",{className:"flex items-center gap-1 logo-link",onClick:w,ref:R,children:e.jsx("div",{className:"back-to-home-wrapper",children:e.jsx(kt,{className:"back-to-home"})})}),i&&e.jsx("button",{className:"compose-button","aria-label":"Compose new discussion",onClick:d,children:e.jsx(us,{className:"compose-button-icon"})}),o&&e.jsx("button",{className:"invisible compose-button",children:e.jsx(us,{className:"compose-button-icon"})})]}),e.jsx("div",{className:`overlay ${C||f?"active":""}`,onClick:()=>{k(!1),x(!1)}}),e.jsxs("div",{className:`slide-menu ${C?"open":""}`,ref:v,children:[e.jsx(U,{to:"https://rsjobhub.com/candidate-dashboard",children:e.jsxs("div",{className:"flex items-center gap-2 menu-header logo-link",children:[e.jsx("div",{className:"back-to-home-wrapper",children:e.jsx(Qe,{className:"back-to-home"})}),e.jsx("h2",{className:"menu-title",children:"back to dashboard"})]})}),e.jsx("div",{className:"px-[1rem] sm:px-[.8rem]",children:e.jsxs("div",{className:"relative menu-items",children:[e.jsxs(U,{to:`/user/${y.id}`,className:"menu-item",children:[e.jsx("span",{children:"Profile"}),e.jsx("span",{children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#071d2980",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-user",children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})})]}),e.jsxs(U,{onClick:()=>T(),className:"menu-item mobile-logout",children:[e.jsx("span",{children:"Logout"}),e.jsx("span",{children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#d62323",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-log-out",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]})})]})]})})]}),r&&e.jsxs("div",{className:`dropdown-menu ${f?"open":""}`,ref:L,children:[e.jsxs(U,{to:"/",className:`dropdown-item ${s.pathname==="/"?"active":""}`,onClick:()=>{M("all-discussions"),x(!1)},children:[e.jsx("div",{className:"dropdown-icon",children:e.jsx($e,{})}),e.jsx("span",{children:"All Discussions"})]}),e.jsxs(U,{to:"/tags",className:`dropdown-item ${s.pathname.startsWith("/tags")?"active":""}`,onClick:()=>{M("tags"),x(!1)},children:[e.jsx("div",{className:"dropdown-icon",children:e.jsx(ps,{})}),e.jsx("span",{children:"Tags"})]})]}),i&&e.jsxs("div",{className:`dropdown-menu ${f?"open":""}`,ref:L,children:[e.jsxs(U,{to:"/",className:`dropdown-item ${s.pathname==="/"?"active":""}`,onClick:()=>{M("all-discussions"),x(!1)},children:[e.jsx("div",{className:"dropdown-icon",children:e.jsx($e,{})}),e.jsx("span",{children:"All Discussions"})]}),e.jsxs(U,{to:"/tags",className:`dropdown-item ${s.pathname.startsWith("/tags")?"active":""}`,onClick:()=>{M("tags"),x(!1)},children:[e.jsx("div",{className:"dropdown-icon",children:e.jsx(ps,{})}),e.jsx("span",{children:"Tags"})]})]}),o&&e.jsxs("div",{className:`dropdown-menu ${f?"open":""}`,ref:L,children:[e.jsxs(U,{to:`/user/${m}`,className:`dropdown-item ${l==="posts"?"active":""}`,onClick:()=>{x(!1)},children:[e.jsx("div",{className:"dropdown-icon",children:e.jsx($e,{})}),e.jsx("span",{children:"Posts"})]}),e.jsxs(U,{to:`/user/${m}/discussions`,className:`dropdown-item ${l==="discussions"?"active":""}`,onClick:()=>{M("tags"),x(!1)},children:[e.jsx("div",{className:"dropdown-icon",children:e.jsx(Nt,{})}),e.jsx("span",{children:"Discussions"})]}),e.jsxs(U,{to:`/user/${m}/likes`,className:`dropdown-item ${l==="likes"?"active":""}`,onClick:()=>{M("tags"),x(!1)},children:[e.jsx("div",{className:"dropdown-icon",children:e.jsx(Hs,{})}),e.jsx("span",{children:"Likes"})]})]}),a&&e.jsxs("div",{className:`dropdown-menu ${f?"open":""}`,ref:L,children:[e.jsxs(U,{onClick:p,className:"dropdown-item",children:[" ",e.jsx("div",{className:"dropdown-icon",children:e.jsx(ge,{})}),e.jsx("span",{children:"Reply"})]}),y.id===u?e.jsxs(e.Fragment,{children:[e.jsxs(U,{onClick:j,className:"dropdown-item",children:[" ",e.jsx("div",{className:"dropdown-icon",children:e.jsx(Ue,{})}),e.jsx("span",{children:"Rename"})]}),e.jsxs("button",{onClick:N,className:"dropdown-item w-full",children:[" ",e.jsx("div",{className:"dropdown-icon",children:e.jsx(Oe,{})}),e.jsx("span",{children:"Delete"})]})]}):null]})]})})})})})};function Ce(s){return z({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"},child:[]}]})(s)}const Se="/assets/defaultProfile-HGQlLIvo.png",pe=({openDiscussionSidebarMenu:s,closeDiscussionSidebarMenu:t,isDiscussionSidebarMenuActive:n,profilePageRoute:r,onStartDiscussion:a,discussionOwnerId:i,userId:o,onStartDiscussionReply:l,onStartRenameDiscussion:d,deleteDiscussion:u})=>{const{currentUser:m,logout:p}=Y(),[j,N]=c.useState(!1),y=c.useRef(null),T=c.useRef(null),C=te(),k=oe(),[f,x]=c.useState(null),[b,D]=c.useState(null),[v,S]=c.useState(null),[L,R]=c.useState(null),[M,$]=c.useState(null),[w,_]=c.useState(null);c.useEffect(()=>{x(!1),D(!1),S(!1),R(!1),$(!1),_(!1),k.pathname==="/"?(x(!0),S(!0)):k.pathname.startsWith("/d")?(R(!0),D(!0)):k.pathname.startsWith("/tags")?($(!0),D(!0)):(k.pathname.startsWith("/user")&&_(!0),D(!0))},[k.pathname]);const O=B=>{B.preventDefault(),k.pathname==="/"?C("https://rsjobhub.com/candidate-dashboard"):C("/")},W=B=>{T.current&&!T.current.contains(B.target)&&y.current&&!y.current.contains(B.target)&&j&&N(!1)};c.useEffect(()=>(document.addEventListener("mousedown",W),()=>{document.removeEventListener("mousedown",W)}),[j]);const ee=()=>{N(!j)};return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:"fixed-nav desktop-nav",children:e.jsxs(ie,{children:[e.jsx("div",{className:"max-w-[1280px] my-0 mx-auto",children:e.jsxs("div",{className:"flex h-[4rem] items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[f&&e.jsxs(U,{to:"https://rsjobhub.com/candidate-dashboard",className:"flex items-center gap-1 logo-link",children:[e.jsx("div",{className:"back-to-home-wrapper",children:e.jsx(Qe,{className:"back-to-home"})}),"back to dashboard"]}),b&&e.jsx(U,{className:"flex items-center gap-1 logo-link",onClick:O,children:e.jsx("div",{className:"back-to-home-wrapper",children:e.jsx(Qe,{className:"back-to-home"})})}),n?e.jsx(e.Fragment,{children:L&&e.jsx("button",{className:"discussionSidebarToggle",onClick:t,children:e.jsx(Ce,{className:"discussionSidebarToggleIcon"})})}):e.jsx(e.Fragment,{children:L&&e.jsx("button",{className:"discussionSidebarToggle",onClick:s,children:e.jsx(zs,{className:"discussionSidebarToggleIcon"})})})]}),e.jsxs("div",{className:"flex items-center relative right-[2.45rem]",children:[m.passport!==""?e.jsx("div",{className:"userProfileImage w-[34.5px] h-[34.5px] rounded-[5rem] overflow-auto mr-[1rem]",children:e.jsx("img",{src:`https://rsjobhub.com/${m.passport}`,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}):e.jsx("div",{className:"userProfileImage w-[35px] h-[35px] rounded-[5rem] overflow-auto mr-[1rem]",children:e.jsx("img",{src:Se,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}),e.jsxs("button",{className:`userProfileName ${j?"focus":""} flex items-center gap-[.5rem]`,onClick:ee,ref:y,children:[e.jsxs("p",{children:[m.first_name," ",m.last_name]})," ",j?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#000000",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-up",children:e.jsx("path",{d:"m18 15-6-6-6 6"})}):e.jsx("span",{className:"userProfileChevron",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#000000",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-down",children:e.jsx("path",{d:"m6 9 6 6 6-6"})})})]})]})]})}),e.jsx("div",{className:`absolute profile-drop-box ${j?"visible":""}`,ref:T,children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsxs(U,{to:`/user/${m.id}`,children:[" ",e.jsxs("span",{className:"flex items-center gap-3",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#000000",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-user",children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),e.jsx("p",{children:"Profile"})]})]})}),e.jsx("li",{children:e.jsxs(U,{onClick:()=>p(),children:[" ",e.jsxs("span",{className:"flex items-center gap-3",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#d62323",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-log-out",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]}),e.jsx("p",{style:{color:"#d62323"},children:"Logout"})," "]})]})})]})})]})}),e.jsx(St,{location:k,navigate:C,handleLogoClick:O,homePage:v,isDiscussionPage:L,isTagsPage:M,isProfilePage:w,profilePageRoute:r,onStartDiscussion:a,discussionOwnerId:i,userId:o,onStartDiscussionReply:l,onStartRenameDiscussion:d,deleteDiscussion:u})]})},Ns=({onAllDiscussionsClick:s,currentPath:t,onStartDiscussion:n})=>{const[r,a]=c.useState(null),i=o=>{a(o)};return c.useEffect(()=>{if(t==="/")i("all-discussions");else if(t==="/tags")i("tags");else return},[t]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"sidebar",children:e.jsxs("div",{className:"sidebar-content",children:[e.jsx("button",{className:"start-discussion-button",onClick:n,children:"Start a Discussion"}),e.jsx("nav",{className:"mt-2 sidebar-nav",children:e.jsxs("ul",{className:"nav-list",children:[e.jsx("li",{className:"nav-item",children:e.jsxs(U,{to:"/",className:`nav-link ${r==="all-discussions"?"active":""}`,onClick:()=>{i("all-discussions"),s()},children:[e.jsxs("div",{className:"nav-icon",children:[e.jsx($e,{})," "]}),e.jsx("span",{children:"All Discussions"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(U,{to:"/tags",className:`nav-link ${r==="tags"?"active":""}`,onClick:()=>i("tags"),children:[e.jsxs("div",{className:"nav-icon",children:[e.jsx(ps,{})," "]}),e.jsx("span",{children:"Tags"})]})})]})})]})})})},xe=({loadMoreDiscussions:s,isLoading:t})=>e.jsx("button",{className:"load-more-button",onClick:s,disabled:t,children:"load more"}),Et=864e5,Dt=6e4,_t=36e5,Ts=Symbol.for("constructDateFrom");function Ws(s,t){return typeof s=="function"?s(t):s&&typeof s=="object"&&Ts in s?s[Ts](t):s instanceof Date?new s.constructor(t):new Date(t)}function ae(s,t){return Ws(s,s)}function Ls(s){const t=ae(s),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+s-+n}function je(s,...t){const n=Ws.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function Rs(s,t){const n=ae(s);return n.setHours(0,0,0,0),n}function Tt(s,t,n){const[r,a]=je(n==null?void 0:n.in,s,t),i=Rs(r),o=Rs(a),l=+i-Ls(i),d=+o-Ls(o);return Math.round((l-d)/Et)}function Ie(s,t){const n=+ae(s)-+ae(t);return n<0?-1:n>0?1:n}function Lt(s,t,n){const[r,a]=je(n==null?void 0:n.in,s,t),i=r.getFullYear()-a.getFullYear(),o=r.getMonth()-a.getMonth();return i*12+o}function Rt(s,t,n){const[r,a]=je(n==null?void 0:n.in,s,t);return r.getFullYear()-a.getFullYear()}function Vs(s,t,n){const[r,a]=je(n==null?void 0:n.in,s,t),i=Ms(r,a),o=Math.abs(Tt(r,a));r.setDate(r.getDate()-i*o);const l=+(Ms(r,a)===-i),d=i*(o-l);return d===0?0:d}function Ms(s,t){const n=s.getFullYear()-t.getFullYear()||s.getMonth()-t.getMonth()||s.getDate()-t.getDate()||s.getHours()-t.getHours()||s.getMinutes()-t.getMinutes()||s.getSeconds()-t.getSeconds()||s.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function Ge(s){return t=>{const r=(s?Math[s]:Math.trunc)(t);return r===0?0:r}}function Mt(s,t,n){const[r,a]=je(n==null?void 0:n.in,s,t),i=(+r-+a)/_t;return Ge(n==null?void 0:n.roundingMethod)(i)}function Ks(s,t){return+ae(s)-+ae(t)}function Ft(s,t,n){const r=Ks(s,t)/Dt;return Ge(n==null?void 0:n.roundingMethod)(r)}function $t(s,t){const n=ae(s);return n.setHours(23,59,59,999),n}function It(s,t){const n=ae(s),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function At(s,t){const n=ae(s);return+$t(n)==+It(n)}function Ot(s,t,n){const[r,a,i]=je(n==null?void 0:n.in,s,s,t),o=Ie(a,i),l=Math.abs(Lt(a,i));if(l<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-o*l);let d=Ie(a,i)===-o;At(r)&&l===1&&Ie(r,i)===1&&(d=!1);const u=o*(l-+d);return u===0?0:u}function Ut(s,t,n){const r=Ks(s,t)/1e3;return Ge(n==null?void 0:n.roundingMethod)(r)}function Pt(s,t,n){const r=Vs(s,t,n)/7;return Ge(n==null?void 0:n.roundingMethod)(r)}function Bt(s,t,n){const[r,a]=je(n==null?void 0:n.in,s,t),i=Ie(r,a),o=Math.abs(Rt(r,a));r.setFullYear(1584),a.setFullYear(1584);const l=Ie(r,a)===-i,d=i*(o-+l);return d===0?0:d}function ke({createdAt:s}){const[t,n]=c.useState("");return c.useEffect(()=>{if(s){const r=()=>{try{const i=new Date(s),o=new Date,l=Ut(o,i),d=Ft(o,i),u=Mt(o,i),m=Vs(o,i),p=Pt(o,i),j=Ot(o,i),N=Bt(o,i);l<60?n("few seconds ago"):d<2?n("1 minute ago"):d<60?n(`${d} minutes ago`):u<2?n("an hour ago"):u<24?n(`${u} hours ago`):m<2?n("1 day ago"):m<7?n(`${m} days ago`):p<2?n("a week ago"):p<4?n(`${p} weeks ago`):j<2?n("a month ago"):j<12?n(`${j} months ago`):N<2?n("a year ago"):n(`${N} years ago`)}catch(i){console.error("Error parsing date:",i),n("Invalid date")}};r();const a=setInterval(r,1e3);return()=>clearInterval(a)}else n(" ")},[s]),`${t}`}const ws=s=>s>=1e3?(s/1e3).toFixed(1)+"K":s,ks=({discussion:s,handleMarkAsRead:t})=>e.jsx(U,{to:`/d/${s.id}`,onClick:()=>t(s.id),children:e.jsxs("li",{className:`discussion-item ${s.is_read?"":"unread"}`,children:[s.author.passport!==""?e.jsx("div",{className:"userProfileImage w-[32px] h-[32px] sm:w-[35px] sm:h-[35px] rounded-[5rem] overflow-auto mr-[8px] sm:mr-[1rem]",children:e.jsx("img",{src:`https://rsjobhub.com/${s.author.passport}`,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}):e.jsx("div",{className:"userProfileImage w-[32px] h-[32px] sm:w-[35px] sm:h-[35px] rounded-[5rem] overflow-auto mr-[8px] sm:mr-[1rem]",children:e.jsx("img",{src:Se,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}),e.jsxs("div",{className:"discussion-content",children:[e.jsx("h3",{className:"discussion-title",children:s.title}),e.jsxs("div",{className:"discussion-meta",children:[e.jsx("span",{className:"discussion-tag",children:s.tag}),s.comments_count>1&&s.last_commented_by!==null?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"reply-icon",children:e.jsx(ge,{})}),e.jsx("span",{className:"replied-by",children:s.last_commented_by}),e.jsxs("span",{className:"flex gap-1 replied-time",children:[e.jsx("span",{children:"replied"}),e.jsx(ke,{createdAt:s.last_commented_at})]})]}):e.jsx("div",{children:e.jsxs("span",{className:"flex gap-1 replied-time",children:[e.jsx("span",{children:"started"}),e.jsx(ke,{createdAt:s.created_at})]})})]})]}),e.jsx("div",{className:"discussion-info",children:e.jsxs("div",{className:"comment-count",children:[e.jsx(qs,{className:"comment-count-icon"}),e.jsx("span",{children:ws(s.comments_count)})]})})]})});var zt=gt();const Ye=mt(zt),q="https://forumapi.rsjobhub.com/api",Qs=async s=>{try{const t=await s(`${q}/posts`);if(t)return t;console.log(t)}catch(t){throw console.error("Error fetching discussion:",t),t}},fs=async(s,t,n)=>{try{return await s(`${q}/posts/${t}/${n}`)}catch(r){throw console.error("Error fetching discussion:",r),r}},Gs=async s=>{try{return await s(`${q}/tags`)}catch(t){throw console.error("Error fetching tags:",t),t}},Ht=async(s,t)=>{try{return await s(`${q}/posts/tag/${t}`)}catch(n){throw console.error("Error fetching tag:",n),n}},qt=async(s,t)=>{const n=parseInt(t);try{return await s(`${q}/user/${n}`)}catch(r){throw console.error("Error fetching user:",r),r}},Wt=async(s,t)=>{const n=parseInt(t);try{return await s(`${q}/user/posts/${n}`)}catch(r){throw console.error("Error fetching user discussions:",r),r}},Vt=async(s,t)=>{const n=parseInt(t);try{return await s(`${q}/user/comments/${n}`)}catch(r){throw console.error("Error fetching user comments:",r),r}},gs=async(s,t)=>{const n=parseInt(t);try{return await s(`${q}/user/likes/${n}`)}catch(r){throw console.error("Error fetching user comments:",r),r}},Kt=async(s,t)=>{try{return await s(`${q}/posts/add`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}catch(n){throw console.error("Error submitting discussion:",n),n}},Qt=async(s,t)=>{try{return await s(`${q}/comment/add`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}catch(n){throw console.error("Error submitting discussion:",n),n}},Gt=async(s,t)=>{try{return await s(`${q}/comment/reply`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}catch(n){throw console.error("Error submitting discussion:",n),n}},Yt=async(s,t)=>{try{return await s(`${q}/post/update`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}catch(n){throw console.error("Error submitting discussion:",n),n}},Jt=async(s,t)=>{try{return await s(`${q}/comment/update`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}catch(n){throw console.error("Error submitting discussion:",n),n}},Zt=async(s,t)=>{try{return await s(`${q}/post/delete/${t}`,{method:"DELETE"})}catch(n){throw console.error("Error deleting comment:",n),n}},Ys=async(s,t)=>{try{return await s(`${q}/comment/delete/${t}`,{method:"DELETE"})}catch(n){throw console.error("Error deleting comment:",n),n}},Js=async(s,t)=>{try{return await s(`${q}/comment/like`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}catch(n){throw console.error("Error submitting discussion:",n),n}},Zs=async(s,t)=>{try{return await s(`${q}/comment/unlike`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}catch(n){throw console.error("Error submitting discussion:",n),n}},Je=async(s,t)=>{try{return await s(`${q}/post/read`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}catch(n){throw console.error("Error submitting discussion:",n),n}},Xs=async(s,t)=>{try{return await s(`${q}/post/read/all`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}catch(n){throw console.error("Error submitting discussion:",n),n}};function js(){return js=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(s[r]=n[r])}return s},js.apply(null,arguments)}function et(s,t){if(s==null)return{};var n={};for(var r in s)if({}.hasOwnProperty.call(s,r)){if(t.indexOf(r)!==-1)continue;n[r]=s[r]}return n}function vs(s,t){return vs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},vs(s,t)}function st(s,t){s.prototype=Object.create(t.prototype),s.prototype.constructor=s,vs(s,t)}function Xt(s,t){return s.classList?!!t&&s.classList.contains(t):(" "+(s.className.baseVal||s.className)+" ").indexOf(" "+t+" ")!==-1}function en(s,t){s.classList?s.classList.add(t):Xt(s,t)||(typeof s.className=="string"?s.className=s.className+" "+t:s.setAttribute("class",(s.className&&s.className.baseVal||"")+" "+t))}function Fs(s,t){return s.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function sn(s,t){s.classList?s.classList.remove(t):typeof s.className=="string"?s.className=Fs(s.className,t):s.setAttribute("class",Fs(s.className&&s.className.baseVal||"",t))}const $s={disabled:!1},tt=G.createContext(null);var nt=function(t){return t.scrollTop},Fe="unmounted",me="exited",he="entering",we="entered",ys="exiting",le=function(s){st(t,s);function t(r,a){var i;i=s.call(this,r,a)||this;var o=a,l=o&&!o.isMounting?r.enter:r.appear,d;return i.appearStatus=null,r.in?l?(d=me,i.appearStatus=he):d=we:r.unmountOnExit||r.mountOnEnter?d=Fe:d=me,i.state={status:d},i.nextCallback=null,i}t.getDerivedStateFromProps=function(a,i){var o=a.in;return o&&i.status===Fe?{status:me}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(a){var i=null;if(a!==this.props){var o=this.state.status;this.props.in?o!==he&&o!==we&&(i=he):(o===he||o===we)&&(i=ys)}this.updateStatus(!1,i)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var a=this.props.timeout,i,o,l;return i=o=l=a,a!=null&&typeof a!="number"&&(i=a.exit,o=a.enter,l=a.appear!==void 0?a.appear:o),{exit:i,enter:o,appear:l}},n.updateStatus=function(a,i){if(a===void 0&&(a=!1),i!==null)if(this.cancelNextCallback(),i===he){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:He.findDOMNode(this);o&&nt(o)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===me&&this.setState({status:Fe})},n.performEnter=function(a){var i=this,o=this.props.enter,l=this.context?this.context.isMounting:a,d=this.props.nodeRef?[l]:[He.findDOMNode(this),l],u=d[0],m=d[1],p=this.getTimeouts(),j=l?p.appear:p.enter;if(!a&&!o||$s.disabled){this.safeSetState({status:we},function(){i.props.onEntered(u)});return}this.props.onEnter(u,m),this.safeSetState({status:he},function(){i.props.onEntering(u,m),i.onTransitionEnd(j,function(){i.safeSetState({status:we},function(){i.props.onEntered(u,m)})})})},n.performExit=function(){var a=this,i=this.props.exit,o=this.getTimeouts(),l=this.props.nodeRef?void 0:He.findDOMNode(this);if(!i||$s.disabled){this.safeSetState({status:me},function(){a.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:ys},function(){a.props.onExiting(l),a.onTransitionEnd(o.exit,function(){a.safeSetState({status:me},function(){a.props.onExited(l)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(a,i){i=this.setNextCallback(i),this.setState(a,i)},n.setNextCallback=function(a){var i=this,o=!0;return this.nextCallback=function(l){o&&(o=!1,i.nextCallback=null,a(l))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(a,i){this.setNextCallback(i);var o=this.props.nodeRef?this.props.nodeRef.current:He.findDOMNode(this),l=a==null&&!this.props.addEndListener;if(!o||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],u=d[0],m=d[1];this.props.addEndListener(u,m)}a!=null&&setTimeout(this.nextCallback,a)},n.render=function(){var a=this.state.status;if(a===Fe)return null;var i=this.props,o=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var l=et(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return G.createElement(tt.Provider,{value:null},typeof o=="function"?o(a,l):G.cloneElement(G.Children.only(o),l))},t}(G.Component);le.contextType=tt;le.propTypes={};function Ne(){}le.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ne,onEntering:Ne,onEntered:Ne,onExit:Ne,onExiting:Ne,onExited:Ne};le.UNMOUNTED=Fe;le.EXITED=me;le.ENTERING=he;le.ENTERED=we;le.EXITING=ys;var tn=function(t,n){return t&&n&&n.split(" ").forEach(function(r){return en(t,r)})},ms=function(t,n){return t&&n&&n.split(" ").forEach(function(r){return sn(t,r)})},se=function(s){st(t,s);function t(){for(var r,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=s.call.apply(s,[this].concat(i))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(l,d){var u=r.resolveArguments(l,d),m=u[0],p=u[1];r.removeClasses(m,"exit"),r.addClass(m,p?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(l,d)},r.onEntering=function(l,d){var u=r.resolveArguments(l,d),m=u[0],p=u[1],j=p?"appear":"enter";r.addClass(m,j,"active"),r.props.onEntering&&r.props.onEntering(l,d)},r.onEntered=function(l,d){var u=r.resolveArguments(l,d),m=u[0],p=u[1],j=p?"appear":"enter";r.removeClasses(m,j),r.addClass(m,j,"done"),r.props.onEntered&&r.props.onEntered(l,d)},r.onExit=function(l){var d=r.resolveArguments(l),u=d[0];r.removeClasses(u,"appear"),r.removeClasses(u,"enter"),r.addClass(u,"exit","base"),r.props.onExit&&r.props.onExit(l)},r.onExiting=function(l){var d=r.resolveArguments(l),u=d[0];r.addClass(u,"exit","active"),r.props.onExiting&&r.props.onExiting(l)},r.onExited=function(l){var d=r.resolveArguments(l),u=d[0];r.removeClasses(u,"exit"),r.addClass(u,"exit","done"),r.props.onExited&&r.props.onExited(l)},r.resolveArguments=function(l,d){return r.props.nodeRef?[r.props.nodeRef.current,l]:[l,d]},r.getClassNames=function(l){var d=r.props.classNames,u=typeof d=="string",m=u&&d?d+"-":"",p=u?""+m+l:d[l],j=u?p+"-active":d[l+"Active"],N=u?p+"-done":d[l+"Done"];return{baseClassName:p,activeClassName:j,doneClassName:N}},r}var n=t.prototype;return n.addClass=function(a,i,o){var l=this.getClassNames(i)[o+"ClassName"],d=this.getClassNames("enter"),u=d.doneClassName;i==="appear"&&o==="done"&&u&&(l+=" "+u),o==="active"&&a&&nt(a),l&&(this.appliedClasses[i][o]=l,tn(a,l))},n.removeClasses=function(a,i){var o=this.appliedClasses[i],l=o.base,d=o.active,u=o.done;this.appliedClasses[i]={},l&&ms(a,l),d&&ms(a,d),u&&ms(a,u)},n.render=function(){var a=this.props;a.classNames;var i=et(a,["classNames"]);return G.createElement(le,js({},i,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(G.Component);se.defaultProps={classNames:""};se.propTypes={};const Cs=({open:s,onClose:t})=>{var K;const{authFetch:n,currentUser:r}=Y(),[a,i]=c.useState(""),[o,l]=c.useState(""),[d,u]=c.useState(""),[m,p]=c.useState(!1),[j,N]=c.useState(!1),[y,T]=c.useState({}),[C,k]=c.useState(!1),f=c.useRef(null),x=te(),b=fe(),D=c.useRef(null),v=c.useRef(null),{data:S=[],isLoading:L,refetch:R}=de({queryKey:["tags"],queryFn:()=>Gs(n),staleTime:1e3*60*10,enabled:C}),M={toolbar:[[{header:[!1]}],["bold","italic","underline","strike"]]},$=["header","bold","italic","underline","strike"],w=()=>{const F={};a||(F.tag="Select a tag"),o.trim()||(F.title="Discussion title cannot be blank"),o.trim().length<5&&(F.title="Discussion Title must be at least 5 characters"),o.trim().length>100&&(F.title="Discussion Title must not be more than 100 characters");const J=d.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").trim();return(!J||J.length<10)&&(F.body="Discussion content must be at least 10 characters"),J.length>8e3&&(F.body="Discussion content must not exceed 8000 characters"),T(F),Object.keys(F).length===0},_=async F=>{if(F.preventDefault(),!w())return;N(!0);const J=r.id;try{const Z=await Kt(n,{user_id:J,title:o,tag:a,description:d});if(Z.message==="Post saved successfully"){b.invalidateQueries({queryKey:["posts"]}),b.invalidateQueries({queryKey:["tags"]});const ue=`/d/${Z.post.id}`;x(ue)}else console.log(Z)}catch(ne){console.error("Error submitting Disussion:",ne)}finally{N(!1)}},O=()=>{i(""),l(""),u(""),T({}),t&&t()},W=()=>{o||d.replace(/<[^>]*>/g,"").trim()?p(!0):O()},ee=async()=>{k(!0),R()};c.useEffect(()=>{function F(J){f.current&&!f.current.contains(J.target)&&k(!1)}return C&&document.addEventListener("mousedown",F),()=>{document.removeEventListener("mousedown",F)}},[C]),c.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]);const B=()=>{p(!1),O()},H=()=>{p(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(se,{in:m,timeout:250,classNames:"fade-scale",unmountOnExit:!0,nodeRef:v,children:e.jsx("div",{ref:v,className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black bg-opacity-40",children:e.jsxs("div",{className:"w-full max-w-xs p-6 bg-white rounded-[6px] shadow-lg",children:[e.jsx("p",{className:"mb-[2rem] text-[.9rem] text-[--text-primary]",children:"You have unsaved changes. Are you sure you want to close?"}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{className:"px-4 py-2 text-[--text-primary-2] bg-[#071d2916] rounded-[6px] hover:bg-[#071d2920] transition text-[.85rem]",onClick:H,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 text-white bg-red-600 rounded-[6px] hover:bg-red-700 transition text-[.85rem]",onClick:B,children:"Discard"})]})]})})}),e.jsx(se,{in:s,timeout:1e3,classNames:"fade-scale",unmountOnExit:!0,nodeRef:D,children:e.jsx("div",{ref:D,className:"fixed inset-0 z-[1000] flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white shadow-2xl border border-gray-100 w-[100%] h-[100%] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between py-[1rem] px-[1rem] sm:px-[2rem] border-b border-[#f3f4f6] bg-[#f3f4f6]",children:[e.jsx("p",{className:"text-[.85rem]  text-[--primary] font-[550]",children:"Start a Disussion"}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs("div",{className:"flex gap-[1rem]",children:[e.jsx("button",{type:"submit",onClick:_,disabled:j,className:"flex items-center gap-2 px-6 text-white bg-[--primary] transition-all hover:bg-[--primary-hover] rounded-[6px] disabled:opacity-50 disabled:cursor-not-allowed",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.75rem]",children:"Posting..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-[.75rem]",children:"Post Discussion"})})}),e.jsx("button",{type:"button",className:"px-2 py-2 md:py-[.5rem] bg-[#071d2916] text-[1.2rem] rounded-[6px] hover:bg-[#071d2920] text-[--text-primary-2] transition-all",onClick:W,children:e.jsx(Ce,{})})]})})]}),e.jsx("div",{className:"flex-1 px-4 py-6 overflow-y-auto sm:p-6",children:e.jsxs("form",{children:[e.jsxs("div",{className:"flex flex-col gap-2 md:gap-3 mt-2 sm:flex-row sm:items-center mb-[.8rem]",children:[e.jsxs("div",{className:"relative",ref:f,children:[e.jsx("div",{className:"w-full md:w-[180px]",children:e.jsx("button",{type:"button",className:`flex justify-start md:justify-center w-full px-3 py-[.5rem] sm:py-[.6rem] text-[.8rem] sm:text-[.9rem] rounded-[6px] border  ${y.tag?"border-red-300":"border-[--text-primary-3]"}`,onClick:ee,children:e.jsx("span",{className:"font-[.8rem] text-[--text-primary-2] capitalize",children:a?((K=S.find(F=>F.name===a))==null?void 0:K.name)||a:"Select tag"})})}),C&&e.jsx("div",{className:"overflow-hidden",children:e.jsx("div",{className:"showTagDropdown absolute left-0 z-10 w-full md:w-[180px] mt-2 overflow-y-auto bg-white border border-[--text-primary-3] overflow-hidden rounded-[6px]  max-h-60",children:L?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsxs("div",{className:"flex items-center justify-center w-full",children:[e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"loading-text"})]})}):S.length>0?S.map(F=>e.jsx("button",{type:"button",className:`w-full text-[.8rem] text-left px-4 py-2 hover:bg-[#071d2907] capitalize ${a===F.name?"text-[--text-primary] bg-[#071d2907]":"text-[--text-primary-2]"}`,onClick:()=>{i(F.name),k(!1)},children:F.name},F.name)):e.jsx("div",{className:"w-full px-4 py-2 text-left text-[--text-primary-2] text-[.8rem]",children:"No tags found."})})}),y.tag?e.jsx("p",{className:"mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:y.tag}):e.jsx("p",{className:"invisible mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:"error msg"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",className:`w-full px-3  sm:px-4 py-[.5rem] sm:py-[.6rem] border rounded-[6px] outline-none text-[.8rem] sm:text-[.9rem] text-[--text-primary] ${y.title?"border-red-300":"border-[--text-primary-3]"}`,placeholder:"Discussion Title",value:o,onChange:F=>l(F.target.value),maxLength:100}),y.title?e.jsx("p",{className:"mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:y.title}):e.jsx("p",{className:"invisible mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:"error msg"})]})]}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:`border rounded-[6px] overflow-hidden ${y.body?"border-red-300":"border-gray-200"}`,children:e.jsx(Ye,{value:d,onChange:u,modules:M,formats:$,placeholder:"Write a post...",style:{backgroundColor:"white"},theme:"snow"})}),y.body?e.jsx("p",{className:"mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:y.body}):e.jsx("p",{className:"invisible mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:"error msg"})]}),e.jsx("div",{className:"block sm:hidden",children:e.jsx("div",{className:"flex justify-end py-3 sm:flex-row sm:items-center mt-[1rem] md:mt-0 mb-[2rem] md:mb-[2rem]",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",className:"px-6 py-2 md:py-3 bg-[#071d2916] rounded-[6px] hover:bg-[#071d2920] text-[.8rem] text-[--text-primary-2] transition-all",onClick:W,children:"Cancel"}),e.jsx("button",{type:"submit",onClick:_,disabled:j,className:"flex items-center gap-2 px-6 text-white bg-[--primary] transition-all hover:bg-[--primary-hover] rounded-[6px] disabled:opacity-50 disabled:cursor-not-allowed",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.8rem]",children:"Posting..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-[.8rem]",children:"Post Discussion"})})})]})})})]})})]})})})]})},nn=()=>{const{authFetch:s,currentUser:t}=Y(),[n,r]=c.useState(20),[a,i]=c.useState(!1),[o,l]=c.useState(1),d=oe(),u=te(),{data:m=[],isLoading:p,isFetching:j,isError:N,refetch:y}=de({queryKey:["posts"],queryFn:()=>Qs(s),staleTime:1e3*60*5,refetchOnWindowFocus:!0}),T=m.slice(0,o*n),C=T.length<m.length,k=()=>{y(),l(1)},f=()=>{C&&l(v=>v+1)},x=async v=>{try{const S={user_id:t.id,post_id:v},L=await Je(s,S);if(L.message==="Post has been marked as read")return;console.log(L)}catch(S){console.error("Error marking discussions as read:",S)}},b=async()=>{try{const v={user_id:t.id},S=await Xs(s,v);S.message==="All posts marked as read"?y():console.log(S)}catch(v){console.error("Error marking all discussions as read:",v)}};function D(){d.pathname==="/"?k():u("/")}return e.jsxs(e.Fragment,{children:[e.jsx(pe,{onStartDiscussion:()=>i(!0)}),e.jsx(ie,{children:e.jsxs("div",{className:"forumHomeLayout",children:[e.jsx(Ns,{onAllDiscussionsClick:D,currentPath:d.pathname,onStartDiscussion:()=>i(!0)}),p?e.jsxs("div",{className:"flex items-center justify-center w-full spinner-container",children:[e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"loading-text",children:"Loading..."})]}):m.length===0?e.jsx("div",{className:"flex items-center justify-center w-full pt-[10rem] lg:pt-[5rem]",children:e.jsx("span",{className:"text-center loading-text",children:"It's a bit quiet in here! Be the first to Start a Discussion."})}):e.jsxs("div",{className:"forumHomeMainSection",children:[e.jsx("div",{className:"forum-filter-bar",children:e.jsxs("div",{className:"filter-actions",children:[e.jsx("button",{className:`action-button refresh-button ${j?"refreshing":""}`,onClick:k,"aria-label":"Refresh",disabled:j||p,children:e.jsx(Ps,{})}),e.jsx("button",{className:"action-button mark-read-button",onClick:b,"aria-label":"Mark all as read",children:e.jsx(Bs,{})})]})}),j?e.jsxs("div",{className:"flex items-center justify-center w-full spinner-container",children:[e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"loading-text",children:"Loading..."})]}):e.jsxs("div",{className:"discussions-container",children:[e.jsx("ul",{className:"discussions-list",children:T.map(v=>e.jsx(ks,{discussion:v,handleMarkAsRead:x},v.id))}),C&&e.jsx("div",{className:"load-more-container",children:p?e.jsx("div",{className:"spinner"}):e.jsx(xe,{loadMoreDiscussions:f,isLoading:p})})]})]})]})}),e.jsx(Cs,{open:a,onClose:()=>i(!1)})]})},rn=({displaySidebarMenu:s,onCloseSidebar:t,onSelectDiscussion:n})=>{const{authFetch:r,currentUser:a}=Y(),[i,o]=c.useState(20),{data:l=[],isLoading:d,isFetched:u,refetch:m}=de({queryKey:["allDiscussions"],queryFn:async()=>{const f=await Qs(r);return Array.isArray(f)?f:[]},staleTime:0,refetchOnWindowFocus:!0}),[p,j]=c.useState(1),N=l.slice(0,p*i),y=l.length>N.length,T=()=>{j(f=>f+1)},C=async f=>{try{const x={user_id:a.id,post_id:f},b=await Je(r,x);if(b.message==="Post has been marked as read")return;console.log(b)}catch(x){console.error("Error marking discussions as read:",x)}},k=f=>{C(f),n&&n(f),t()};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"discussionSidebar-wrapper",children:e.jsx("div",{className:`discussionSideMenu ${s?"open":""} pb-[5rem]`,children:u?e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"p-0 m-0 list-none",children:N.map(f=>e.jsx(U,{to:`/d/${f.id}`,onClick:()=>k(f.id),children:e.jsxs("li",{className:`relative flex items-center transition-[all_.5s_ease] py-[12px] px-[15px] hover:bg-[#071d290a] ${f.is_read?"":"unread"}`,children:[f.author.passport!==""?e.jsx("div",{className:"userProfileImage w-[40px] h-[40px] rounded-[5rem] overflow-auto mr-[10px]",children:e.jsx("img",{src:`https://rsjobhub.com/${f.author.passport}`,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}):e.jsx("div",{className:"userProfileImage w-[40px] h-[40px] rounded-[5rem] overflow-auto mr-[10px]",children:e.jsx("img",{src:Se,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}),e.jsxs("div",{className:"discussion-content",children:[e.jsx("h3",{className:"discussion-title",children:f.title}),e.jsxs("div",{className:"discussion-meta",children:[e.jsx("span",{className:"discussion-tag",children:f.tag}),f.comments_count>1&&f.last_commented_by!==null?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"reply-icon",children:e.jsx(ge,{})}),e.jsx("span",{className:"replied-by",children:f.last_commented_by}),e.jsxs("span",{className:"flex gap-1 replied-time",children:[e.jsx("span",{children:"replied"}),e.jsx(ke,{createdAt:f.last_commented_at})]})]}):e.jsx("div",{children:e.jsxs("span",{className:"flex gap-1 replied-time",children:[e.jsx("span",{children:"started"}),e.jsx(ke,{createdAt:f.created_at})]})})]})]}),e.jsx("div",{className:"discussion-info",children:e.jsxs("div",{className:"comment-count",children:[e.jsx(qs,{className:"comment-count-icon"}),e.jsx("span",{children:ws(f.comments_count)})]})})]})},f.id))}),y&&e.jsx("div",{className:"load-more-container ",children:d?e.jsx(e.Fragment,{children:e.jsx("div",{className:"spinner"})}):e.jsx(xe,{loadMoreDiscussions:T,isLoading:d})})]}):e.jsxs("div",{className:"flex items-center justify-center w-full spinner-container",children:[e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"loading-text",children:"Loading..."})]})})})})};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),on=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),Is=s=>{const t=on(s);return t.charAt(0).toUpperCase()+t.slice(1)},rt=(...s)=>s.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),ln=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=c.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...l},d)=>c.createElement("svg",{ref:d,...cn,width:t,height:t,stroke:s,strokeWidth:r?Number(n)*24/Number(t):n,className:rt("lucide",a),...!i&&!ln(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,m])=>c.createElement(u,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=(s,t)=>{const n=c.forwardRef(({className:r,...a},i)=>c.createElement(dn,{ref:i,iconNode:t,className:rt(`lucide-${an(Is(s))}`,`lucide-${s}`,r),...a}));return n.displayName=Is(s),n};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],mn=Pe("circle-check-big",un);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],xn=Pe("circle-x",hn);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],fn=Pe("refresh-cw",pn);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],jn=Pe("send",gn);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],As=Pe("thumbs-up",vn);function yn(s){return z({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M10.3623 15.529L8.94804 16.9432L3.99829 11.9934L8.94804 7.0437L10.3623 8.45791L7.86379 10.9564H16.0018C18.2109 10.9564 20.0018 12.7472 20.0018 14.9564V16.9564H18.0018V14.9564C18.0018 13.8518 17.1063 12.9564 16.0018 12.9564H7.78965L10.3623 15.529Z",fill:"currentColor"},child:[]}]})(s)}const bn=({size:s="md"})=>{const t={sm:"px-2 py-[.04rem] text-[.5rem] md:text-[.55rem]"};return e.jsx("span",{className:`inline-flex items-center gap-1 ${t[s]} bg-red-600 text-white rounded-full font-medium ml-[1rem] `,children:"Admin"})},Ke=({post:s,isOnline:t,userLikedComments:n=[],highlightedCommentId:r,handleLike:a,handleUnLike:i,onReplyClick:o,onEditClick:l,showMoreMenu:d,toggleMoreMenu:u,handleDeleteComment:m,moreMenuRef:p,onReplyLink:j})=>{const{currentUser:N}=Y(),y=c.useRef(null);c.useEffect(()=>{r===s.id&&y.current&&setTimeout(()=>{y.current.scrollIntoView({behavior:"smooth",block:"center"}),y.current.classList.add("highlighted-comment"),setTimeout(()=>{y.current&&y.current.classList.remove("highlighted-comment")},3e3)},100)},[r,s.id]);const T=n.some(C=>Number(C.liked_user_id)===Number(N.id)&&Number(C.id)===Number(s.id));return e.jsxs("div",{className:"post",ref:y,id:`${s.id}`,children:[e.jsx("div",{children:e.jsx(U,{to:`/user/${s.user_id}`,className:"post-avatar-link",children:e.jsx("div",{className:"relative",children:s.commenter_passport!==""?e.jsx("div",{className:"userProfileImage w-[32px] h-[32px] sm:w-[35px] sm:h-[35px] md:w-[50px] md:h-[50px] rounded-[5rem] overflow-auto mr-[8px] sm:mr-[1rem] shrink-0 flex",children:e.jsx("img",{src:`https://rsjobhub.com/${s.commenter_passport}`,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}):e.jsx("div",{className:"userProfileImage w-[32px] h-[32px] sm:w-[35px] sm:h-[35px] md:w-[50px] md:h-[50px] rounded-[5rem] overflow-auto mr-[8px] sm:mr-[1rem] shrink-0 flex",children:e.jsx("img",{src:Se,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})})})})}),e.jsxs("div",{className:"post-content",children:[e.jsxs("div",{className:"post-header",children:[e.jsx(U,{to:`/user/${s.user_id}`,className:"post-username-link",children:e.jsx("span",{className:"capitalize post-username",children:s.commenter_name})}),e.jsx("span",{className:"post-time",children:e.jsx(ke,{createdAt:s.created_at})}),s.commenter_status==="admin"?e.jsx(bn,{size:"sm"}):null]}),e.jsxs("div",{className:"post-body",children:[s.is_reply?e.jsxs("span",{className:"flex items-center reply-indicator mb-[.5rem] cursor-pointer",onClick:()=>j(s.replying_to_comment_id),children:[e.jsx("span",{className:"reply-icon",children:e.jsx(ge,{})}),e.jsx("span",{className:"replying-to",children:s.replying_to_user_name})]}):null,e.jsx("div",{dangerouslySetInnerHTML:{__html:s.content}})]}),e.jsxs("div",{className:"post-actions",children:[T?e.jsxs("button",{onClick:()=>i(s.id),className:"flex items-center gap-1 transition-all duration-200 hover:scale-105 text-red-500 bg-red-50",children:[e.jsx(As,{className:"w-[14px] h-[14px] transition-all duration-200 fill-red-500"}),e.jsx("span",{className:"text-[12px]",children:"Like"})]}):e.jsxs("button",{onClick:()=>a(s.id),className:"flex items-center gap-1  transition-all duration-200 hover:scale-105 text-[--text-primary-2]",children:[e.jsx(As,{className:"w-[14px] h-[14px] transition-all duration-200 fill-none"}),e.jsx("span",{className:"text-[12px]",children:"Like"})]}),e.jsxs("button",{onClick:()=>o(s.id),className:"flex items-center gap-1 transition-all duration-200 hover:scale-105 text-[--text-primary-2]",children:[e.jsx(yn,{className:"w-[16px] h-[16px] transition-all duration-200 "}),e.jsx("span",{className:"text-[12px]",children:"Reply"})]}),N.status==="admin"?e.jsxs("div",{className:"more-menu-container",ref:d===s.id?p:null,children:[e.jsx("button",{className:`post-action-button menu more-button ${d===s.id?"focus":""}`,onClick:()=>u(s.id),children:e.jsx(_s,{})}),d===s.id&&e.jsxs("div",{className:"flex flex-col more-menu",children:[e.jsxs("button",{onClick:()=>l(s),children:[e.jsx(Ue,{style:{fontSize:"16px"}}),"Edit"]}),e.jsxs("button",{onClick:()=>m(s.id),children:[e.jsx(Oe,{style:{fontSize:"16px"}}),"Delete"]})]})]}):N.id===s.user_id?e.jsxs("div",{className:"more-menu-container",ref:d===s.id?p:null,children:[e.jsx("button",{className:`post-action-button menu more-button ${d===s.id?"focus":""}`,onClick:()=>u(s.id),children:e.jsx(_s,{})}),d===s.id&&e.jsxs("div",{className:"flex flex-col more-menu",children:[e.jsxs("button",{onClick:()=>l(s),children:[e.jsx(Ue,{style:{fontSize:"16px"}}),"Edit"]}),e.jsxs("button",{onClick:()=>m(s.id),children:[e.jsx(Oe,{style:{fontSize:"16px"}}),"Delete"]})]})]}):null]})]})]},s.id)},Nn=({open:s,onClose:t,replyToDiscussionId:n,onCommentAdded:r})=>{const{authFetch:a,currentUser:i}=Y(),[o,l]=c.useState(""),[d,u]=c.useState(!1),[m,p]=c.useState(!1),[j,N]=c.useState({});te();const y=fe(),T=c.useRef(null),C=c.useRef(null),k={toolbar:[[{header:[!1]}],["bold","italic","underline","strike"]]},f=["header","bold","italic","underline","strike"],x=()=>{const R={},M=o.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").trim();return(!M||M==="")&&(R.body="Reply cannot be empty"),M.length>8e3&&(R.body="Discussion content must not exceed 8000 characters"),N(R),Object.keys(R).length===0},b=async R=>{if(R.preventDefault(),!x())return;p(!0);const M=i.id;try{const w=await Qt(a,{post_id:n,user_id:M,content:o});w.message==="Comment saved successfully"?(y.invalidateQueries({queryKey:["posts"]}),y.invalidateQueries({queryKey:["allDiscussions"]}),r(w.comment),D()):console.log(w)}catch($){console.error("Error submitting Disussion:",$)}finally{p(!1)}},D=()=>{l(""),N({}),t&&t()},v=()=>{o.replace(/<[^>]*>/g,"").trim()?u(!0):D()};c.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]);const S=()=>{u(!1),D()},L=()=>{u(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(se,{in:d,timeout:250,classNames:"fade-scale",unmountOnExit:!0,nodeRef:C,children:e.jsx("div",{ref:C,className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black bg-opacity-40",children:e.jsxs("div",{className:"w-[90%] md:w-full max-w-xs p-6 bg-white rounded-[6px] shadow-lg",children:[e.jsx("p",{className:"mb-[2rem] text-[.8rem] md:text-[.9rem] text-[--text-primary]",children:"You have unsaved changes. Are you sure you want to close?"}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{className:"px-4 py-2 text-[--text-primary-2] bg-[#071d2916] rounded-[6px] hover:bg-[#071d2920] transition text-[.8rem] md:text-[.85rem]",onClick:L,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 text-white bg-red-600 rounded-[6px] hover:bg-red-700 transition text-[.8rem] md:text-[.85rem]",onClick:S,children:"Discard"})]})]})})}),e.jsx(se,{in:s,timeout:200,classNames:"fade-scale",unmountOnExit:!0,nodeRef:T,children:e.jsx("div",{ref:T,className:"fixed inset-0 z-[1000] lg:bg-[#000] lg:bg-opacity-70 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white shadow-2xl rounded-[6px] border border-gray-100 w-[100%] h-[100%] lg:w-[90%] lg:h-[95%] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between py-[.8rem] px-[1rem] sm:px-[2rem] border-b border-[#f3f4f6] bg-[#f3f4f6]",children:[e.jsxs("div",{className:"text-[--primary] flex items-center gap-1",children:[e.jsx(ge,{className:"text-[.95rem]"}),e.jsx("p",{className:"text-[.85rem] font-[550]",children:n})]}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs("div",{className:"flex gap-[1rem]",children:[e.jsx("button",{type:"submit",onClick:b,disabled:m,className:"flex items-center gap-2 px-6 text-white bg-[--primary] transition-all hover:bg-[--primary-hover] rounded-[6px] disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.75rem]",children:"Posting..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-[.75rem]",children:"Post Reply"})})}),e.jsx("button",{type:"button",className:"px-2 py-2 md:py-[.5rem] bg-[#071d2916] text-[1.2rem] rounded-[6px] hover:bg-[#071d2920] text-[--text-primary-2] transition-all",onClick:v,children:e.jsx(Ce,{})})]})})]}),e.jsx("div",{className:"flex-1 px-4 py-6 overflow-y-auto sm:p-6",children:e.jsxs("form",{children:[e.jsxs("div",{className:"",children:[e.jsx("div",{className:`border rounded-[6px] overflow-hidden ${j.body?"border-red-300":"border-gray-200"}`,children:e.jsx(Ye,{value:o,onChange:l,modules:k,formats:f,placeholder:"Write a reply...",style:{backgroundColor:"white"},theme:"snow"})}),j.body?e.jsx("p",{className:"mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:j.body}):e.jsx("p",{className:"invisible mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:"error msg"})]}),e.jsx("div",{className:"block sm:hidden",children:e.jsx("div",{className:"flex justify-end py-3 sm:flex-row sm:items-center mt-[1rem] md:mt-0 mb-[2rem] md:mb-[2rem]",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",className:"px-6 py-2 md:py-3 bg-[#071d2916] rounded-[6px] hover:bg-[#071d2920] text-[.8rem] text-[--text-primary-2] transition-all",onClick:v,children:"Cancel"}),e.jsx("button",{type:"submit",onClick:b,disabled:m,className:"flex items-center gap-2 px-6 text-white bg-[--primary] transition-all hover:bg-[--primary-hover] rounded-[6px] disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.8rem]",children:"Posting..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-[.8rem]",children:"Post Reply"})})})]})})})]})})]})})})]})},wn=({onCancel:s,onConfirm:t})=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black bg-opacity-40",children:e.jsxs("div",{className:"w-[90%] md:w-full max-w-sm p-6 bg-white rounded-[6px] shadow-lg",children:[e.jsx("p",{className:"mb-[2rem] text-[.8rem] md:text-[.9rem] text-[--text-primary]",children:"Permanently delete this discussion? This cannot be undone."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{className:"px-4 py-2 text-[--text-primary-2] bg-[#071d2916] rounded-[6px] hover:bg-[#071d2920] transition text-[.8rem] md:text-[.85rem]",onClick:s,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 text-white bg-red-600 rounded-[6px] hover:bg-red-700 transition text-[.8rem] md:text-[.85rem]",onClick:t,children:"Yes, Delete"})]})]})})}),it=()=>{const[s,t]=c.useState(null),n=c.useRef(null),r=c.useCallback(i=>{t(o=>o===i?null:i)},[]),a=c.useCallback(i=>{n.current&&!n.current.contains(i.target)&&t(null)},[]);return c.useEffect(()=>(s?document.addEventListener("mousedown",a):document.removeEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}),[s,a]),{showMoreMenu:s,moreMenuRef:n,toggleMoreMenu:r,setShowMoreMenu:t}},kn=({open:s,onClose:t,replyToDiscussionId:n,replyToDiscussionTitle:r,onRenameDiscussionTitle:a})=>{const{authFetch:i,currentUser:o}=Y(),[l,d]=c.useState(""),[u,m]=c.useState(!1),[p,j]=c.useState({});te();const N=fe(),y=c.useRef(null);c.useEffect(()=>{s&&d(r||"")},[s,r]);const T=()=>{const x={};return(!l||l==="")&&(x.body="Discussion title cannot be empty"),l.length<2&&(x.body="Discussion title must be greater than 2 characters"),j(x),Object.keys(x).length===0},C=async x=>{if(x.preventDefault(),!T())return;m(!0);const b=o.id;try{const D={user_id:b,post_id:n,title:l};if(D.title===r)k();else{const v=await Yt(i,D);v.message==="Post title updated successfully"?(N.invalidateQueries({queryKey:["posts"]}),N.invalidateQueries({queryKey:["allDiscussions"]}),a(v.post.title),Notification("success","Discussion Title Updated!"),k()):console.log(v)}}catch(D){console.error("Error Renaming Disussion:",D)}finally{m(!1)}},k=()=>{d(""),j({}),t&&t()},f=()=>{k()};return c.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]),e.jsx(e.Fragment,{children:e.jsx(se,{in:s,timeout:200,classNames:"fade-scale",unmountOnExit:!0,nodeRef:y,children:e.jsx("div",{ref:y,className:"fixed inset-0 z-[1000] lg:bg-[#000] lg:bg-opacity-80 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white shadow-2xl rounded-[6px] border border-gray-100 w-[100%] h-[100%] lg:w-[35%] lg:h-[auto] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between py-[.8rem] px-[1rem] sm:px-[1.5rem] border-b border-[#f3f4f6] bg-[#f3f4f6]",children:[e.jsx("div",{className:"text-[--primary] flex items-center gap-1",children:e.jsx("p",{className:"text-[.85rem] font-[550]",children:"Rename Discussion"})}),e.jsx("div",{children:e.jsx("button",{type:"button",className:"px-1 py-1  bg-[#071d2916] text-[1.1rem] rounded-[6px] hover:bg-[#071d2920] text-[--text-primary-2] transition-all",onClick:f,children:e.jsx(Ce,{})})})]}),e.jsx("div",{className:"flex-1 px-4 py-6 overflow-y-auto sm:p-6",children:e.jsx("form",{onSubmit:C,children:e.jsxs("div",{className:"py-[.5rem]",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:l,onChange:x=>d(x.target.value),className:"border w-full py-[.8rem] px-[.5rem] text-[.8rem] border-[#071D2940] rounded-[7px] bg-[#F3F4F6] outline-none"}),p.body?e.jsx("p",{className:"mt-1 text-[.7rem] text-red-500 md:text-xs",children:p.body}):e.jsx("p",{className:"invisible mt-1 text-[.7rem] text-red-500 md:text-xs",children:"error msg"})]}),e.jsx("div",{className:"mt-[.5rem]",children:u?e.jsxs("button",{disabled:u,type:"submit",className:"bg-[--text-primary] text-white py-[.8rem] text-[.8rem] w-full rounded-[7px] flex items-center justify-center",children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.75rem]",children:"Updating..."})]}):e.jsx("button",{type:"submit",className:"bg-[--text-primary] text-white py-[.8rem] text-[.8rem] w-full rounded-[7px]",children:"Rename"})})]})})})]})})})})},at=({open:s,onClose:t,replyToDiscussionId:n,replyToCommentId:r,onReplyCommentAdded:a})=>{const{authFetch:i,currentUser:o}=Y(),[l,d]=c.useState(""),[u,m]=c.useState(!1),[p,j]=c.useState(!1),[N,y]=c.useState({});te();const T=oe(),C=fe(),k=c.useRef(null),f=c.useRef(null),x={toolbar:[[{header:[!1]}],["bold","italic","underline","strike"]]},b=["header","bold","italic","underline","strike"],D=()=>{const $={},w=l.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").trim();return(!w||w==="")&&($.body="Reply cannot be empty"),w.length>8e3&&($.body="Discussion content must not exceed 8000 characters"),y($),Object.keys($).length===0},v=async $=>{if($.preventDefault(),!D())return;j(!0);const w=o.id;try{const O=await Gt(i,{post_id:n,user_id:w,comment_id:r,content:l});O.message==="Reply posted successfully"?(C.invalidateQueries({queryKey:["posts"]}),C.invalidateQueries({queryKey:["allDiscussions"]}),T.pathname.startsWith("/user/")?(C.invalidateQueries({queryKey:["userPosts",w]}),Notification("submitted","Reply Posted")):a(O.reply),S()):console.log(O)}catch(_){console.error("Error submitting Disussion:",_)}finally{j(!1)}},S=()=>{d(""),y({}),t&&t()},L=()=>{l.replace(/<[^>]*>/g,"").trim()?m(!0):S()};c.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]);const R=()=>{m(!1),S()},M=()=>{m(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(se,{in:u,timeout:250,classNames:"fade-scale",unmountOnExit:!0,nodeRef:f,children:e.jsx("div",{ref:f,className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black bg-opacity-40",children:e.jsxs("div",{className:"w-[90%] md:w-full max-w-xs p-6 bg-white rounded-[6px] shadow-lg",children:[e.jsx("p",{className:"mb-[2rem] text-[.8rem] md:text-[.9rem] text-[--text-primary]",children:"You have unsaved changes. Are you sure you want to close?"}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{className:"px-4 py-2 text-[--text-primary-2] bg-[#071d2916] rounded-[6px] hover:bg-[#071d2920] transition text-[.8rem] md:text-[.85rem]",onClick:M,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 text-white bg-red-600 rounded-[6px] hover:bg-red-700 transition text-[.8rem] md:text-[.85rem]",onClick:R,children:"Discard"})]})]})})}),e.jsx(se,{in:s,timeout:200,classNames:"fade-scale",unmountOnExit:!0,nodeRef:k,children:e.jsx("div",{ref:k,className:"fixed inset-0 z-[1000] lg:bg-[#000] lg:bg-opacity-70 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white shadow-2xl rounded-[6px] border border-gray-100 w-[100%] h-[100%] lg:w-[90%] lg:h-[95%] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between py-[.8rem] px-[1rem] sm:px-[2rem] border-b border-[#f3f4f6] bg-[#f3f4f6]",children:[e.jsxs("div",{className:"text-[--primary] flex items-center gap-1",children:[e.jsx(ge,{className:"text-[.95rem]"}),e.jsxs("p",{className:"text-[.85rem] font-[550]",children:[n,"/",r]})]}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs("div",{className:"flex gap-[1rem]",children:[e.jsx("button",{type:"submit",onClick:v,disabled:p,className:"flex items-center gap-2 px-6 text-white bg-[--primary] transition-all hover:bg-[--primary-hover] rounded-[6px] disabled:opacity-50 disabled:cursor-not-allowed",children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.75rem]",children:"Posting..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-[.75rem]",children:"Post Reply"})})}),e.jsx("button",{type:"button",className:"px-2 py-2 md:py-[.5rem] bg-[#071d2916] text-[1.2rem] rounded-[6px] hover:bg-[#071d2920] text-[--text-primary-2] transition-all",onClick:L,children:e.jsx(Ce,{})})]})})]}),e.jsx("div",{className:"flex-1 px-4 py-6 overflow-y-auto sm:p-6",children:e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"",children:[e.jsx("div",{className:`border rounded-[6px] overflow-hidden ${N.body?"border-red-300":"border-gray-200"}`,children:e.jsx(Ye,{value:l,onChange:d,modules:x,formats:b,placeholder:"Write a reply...",style:{backgroundColor:"white"},theme:"snow"})}),N.body?e.jsx("p",{className:"mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:N.body}):e.jsx("p",{className:"invisible mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:"error msg"})]}),e.jsx("div",{className:"block sm:hidden",children:e.jsx("div",{className:"flex justify-end py-3 sm:flex-row sm:items-center mt-[1rem] md:mt-0 mb-[2rem] md:mb-[2rem]",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",className:"px-6 py-2 md:py-3 bg-[#071d2916] rounded-[6px] hover:bg-[#071d2920] text-[.8rem] text-[--text-primary-2] transition-all",onClick:L,children:"Cancel"}),e.jsx("button",{type:"submit",onClick:v,disabled:p,className:"flex items-center gap-2 px-6 text-white bg-[--primary] transition-all hover:bg-[--primary-hover] rounded-[6px] disabled:opacity-50 disabled:cursor-not-allowed",children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.8rem]",children:"Posting..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-[.8rem]",children:"Post Reply"})})})]})})})]})})]})})})]})},ot=({open:s,onClose:t,editCommentDiscussionId:n,editCommentId:r,initialContent:a,onEditCommentContent:i})=>{const{authFetch:o,currentUser:l}=Y(),[d,u]=c.useState(""),[m,p]=c.useState(!1),[j,N]=c.useState({});te();const y=fe(),T=c.useRef(null);c.useEffect(()=>{s&&u(a||"")},[s,a]);const C={toolbar:[[{header:[!1]}],["bold","italic","underline","strike"]]},k=["header","bold","italic","underline","strike"],f=()=>{const v={},S=d.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").trim();return(!S||S==="")&&(v.body="Reply cannot be empty"),S.length>8e3&&(v.body="Discussion content must not exceed 8000 characters"),N(v),Object.keys(v).length===0},x=async v=>{if(v.preventDefault(),!f())return;p(!0);const S=l.id;try{const L={user_id:S,comment_id:r,content:d};if(L.content===a)b();else{const R=await Jt(o,L);R.message==="Comment updated successfully"?(y.invalidateQueries({queryKey:["posts"]}),i(R.comment),Notification("success","Comment Updated!"),b()):console.log(R)}}catch(L){console.error("Error Updating Comment:",L)}finally{p(!1)}},b=()=>{u(""),N({}),t&&t()},D=()=>{b()};return c.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]),e.jsx(e.Fragment,{children:e.jsx(se,{in:s,timeout:200,classNames:"fade-scale",unmountOnExit:!0,nodeRef:T,children:e.jsx("div",{ref:T,className:"fixed inset-0 z-[1000] lg:bg-[#000] lg:bg-opacity-70 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white shadow-2xl rounded-[6px] border border-gray-100 w-[100%] h-[100%] lg:w-[90%] lg:h-[95%] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between py-[.8rem] px-[1rem] sm:px-[2rem] border-b border-[#f3f4f6] bg-[#f3f4f6]",children:[e.jsxs("div",{className:"text-[--primary] flex items-center gap-1",children:[e.jsx(ge,{className:"text-[.95rem]"}),e.jsxs("p",{className:"text-[.85rem] font-[550]",children:[n,"/",r]})]}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs("div",{className:"flex gap-[1rem]",children:[e.jsx("button",{type:"submit",onClick:x,disabled:m,className:"flex items-center gap-2 px-6 text-white bg-[--primary] transition-all hover:bg-[--primary-hover] rounded-[6px] disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.75rem]",children:"Updating..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-[.75rem]",children:"Save Changes"})})}),e.jsx("button",{type:"button",className:"px-2 py-2 md:py-[.5rem] bg-[#071d2916] text-[1.2rem] rounded-[6px] hover:bg-[#071d2920] text-[--text-primary-2] transition-all",onClick:D,children:e.jsx(Ce,{})})]})})]}),e.jsx("div",{className:"flex-1 px-4 py-6 overflow-y-auto sm:p-6",children:e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"",children:[e.jsx("div",{className:`border rounded-[6px] overflow-hidden ${j.body?"border-red-300":"border-gray-200"}`,children:e.jsx(Ye,{value:d,onChange:u,modules:C,formats:k,placeholder:"Write a reply...",style:{backgroundColor:"white"},theme:"snow"})}),j.body?e.jsx("p",{className:"mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:j.body}):e.jsx("p",{className:"invisible mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:"error msg"})]}),e.jsx("div",{className:"block sm:hidden",children:e.jsx("div",{className:"flex justify-end py-3 sm:flex-row sm:items-center mt-[1rem] md:mt-0 mb-[2rem] md:mb-[2rem]",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",className:"px-6 py-2 md:py-3 bg-[#071d2916] rounded-[6px] hover:bg-[#071d2920] text-[.8rem] text-[--text-primary-2] transition-all",onClick:D,children:"Cancel"}),e.jsx("button",{type:"submit",onClick:x,disabled:m,className:"flex items-center gap-2 px-6 text-white bg-[--primary] transition-all hover:bg-[--primary-hover] rounded-[6px] disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.8rem]",children:"Updating..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-[.8rem]",children:"Save Changes"})})})]})})})]})})]})})})})},Os=()=>{var Re;const{authFetch:s,currentUser:t}=Y(),{id:n,commentId:r}=bs(),[a,i]=c.useState(null),[o,l]=c.useState(null),[d,u]=c.useState(!0),[m,p]=c.useState(null),[j,N]=c.useState(!1),[y,T]=c.useState(!1),[C,k]=c.useState(!1),[f,x]=c.useState(!1),[b,D]=c.useState(!1),[v,S]=c.useState(!1),[L,R]=c.useState(null),[M,$]=c.useState(null),[w,_]=c.useState(r||null),[O,W]=c.useState(0),ee=te(),B=fe(),[H,K]=c.useState(!1),F=c.useRef(null),J=c.useRef(null),[ne,Z]=c.useState([]),[Be,ue]=c.useState(!1),[Ss,ce]=c.useState(null),{showMoreMenu:Ze,moreMenuRef:Xe,toggleMoreMenu:Es,setShowMoreMenu:ve}=it();c.useEffect(()=>{let g=!0;return u(!0),p(null),i(null),l([]),(async()=>{try{const h=Number(n),E=await fs(s,h,t.id);g&&(i(E),l(E.comments||[]),u(!1),B.invalidateQueries({queryKey:["posts"]}))}catch(h){g&&(p(h.message||"Failed to fetch discussion"),u(!1),ee(-1))}})(),()=>{g=!1}},[s,ee,n,t.id,B]),c.useEffect(()=>{if(!d&&w){const g=document.getElementById(w);g&&(g.scrollIntoView({behavior:"smooth",block:"center"}),g.classList.add("highlighted-comment"),setTimeout(()=>{g.classList.remove("highlighted-comment")},3e3))}},[d,w,O]),c.useEffect(()=>{r&&_(r)},[r]);const es=g=>{_(g),W(A=>A+1)},ss=()=>{D(!0),S(!0)},ts=()=>{D(!1),S(!1)},ye=g=>{g!==n&&(u(!0),ee(`/d/${g}`))},ns=g=>{R(g),T(!0)},rs=g=>{$(g),x(!0)},is=()=>{K(g=>!g)};c.useEffect(()=>{if(!H)return;function g(A){J.current&&!J.current.contains(A.target)&&F.current&&!F.current.contains(A.target)&&K(!1)}return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[H]);const Ee=g=>{let A;Number(g.user_id)===t.id&&t.status==="admin"?A="admin":A="user";const h={id:g.id,post_id:g.post_id,user_id:Number(g.user_id),commenter_passport:t.passport,commenter_name:t.first_name,created_at:g.created_at,is_reply:0,replying_to_comment_id:g.replying_to_comment_id,replying_to_user_name:g.replying_to_user_name,content:g.content,commenter_status:A};l(E=>[...E,h]),_(g.id),W(E=>E+1)},De=g=>{let A;Number(g.user_id)===t.id&&t.status==="admin"?A="admin":A="user";const h={id:g.id,post_id:g.post_id,user_id:Number(g.user_id),commenter_passport:t.passport,commenter_name:t.first_name,created_at:g.created_at,is_reply:1,replying_to_comment_id:g.replying_to_comment_id,replying_to_user_name:g.replying_to_user_name,content:g.content,commenter_status:A};l(E=>[...E,h]),_(g.id),W(E=>E+1)},_e=g=>{i(A=>({...A,title:g}))},as=g=>{l(A=>A.map(h=>Number(h.id)===Number(g.id)?{...h,content:g.content}:h))},re=g=>{ce(g),ue(!0)},Te=async()=>{try{(await Zt(s,Ss)).message==="Post and related data deleted successfully"&&(Notification("success","Discussion Deleted!"),ee("/"))}catch(g){console.log(g)}ue(!1),ce(null)},ze=()=>{ue(!1),ce(null)},Le=async g=>{try{const A=await Ys(s,g);A.message==="Comment and its likes deleted successfully"&&(l(h=>h.filter(E=>E.id!==g)),B.invalidateQueries({queryKey:["allDiscussions"]}),Notification("success","Comment Deleted!")),A.error==="Comment not found"&&Notification("failed","Invalid Comment ID")}catch(A){console.log(A)}ve(null)};c.useEffect(()=>{(async()=>{if(t&&t.id)try{const A=await gs(s,t.id);Z(Array.isArray(A)?A:[])}catch{Z([])}})()},[s,t]);const os=async g=>{(await Js(s,{comment_id:g,user_id:t.id})).message==="Comment liked successfully"?Z(h=>[...h,{id:g,liked_user_id:t.id}]):Notification("failed","Failed to like comment",3e3)},ls=async g=>{(await Zs(s,{comment_id:g,user_id:t.id})).message==="Comment unliked successfully"?Z(h=>h.filter(E=>!(Number(E.liked_user_id)===Number(t.id)&&Number(E.id)===Number(g)))):Notification("failed","Failed to like comment",3e3)};return e.jsxs(e.Fragment,{children:[e.jsx(pe,{openDiscussionSidebarMenu:ss,isDiscussionSidebarMenuActive:v,closeDiscussionSidebarMenu:ts,discussionOwnerId:((Re=a==null?void 0:a.author)==null?void 0:Re.id)||null,onStartDiscussionReply:()=>N(!0),onStartRenameDiscussion:()=>k(!0),deleteDiscussion:()=>re(a.id)}),d?e.jsx("div",{className:"flex items-center justify-center w-full spinner-container pt-[7rem]",children:e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}})}):e.jsx(e.Fragment,{children:m?e.jsx("div",{className:"flex items-center justify-center w-full spinner-container pt-[5rem]",children:e.jsxs("span",{className:"loading-text",children:["Error Fetching Data: ",m]})}):e.jsx(e.Fragment,{children:a?e.jsxs("div",{children:[e.jsx("div",{className:"relative w-full discussion-page-banner",children:e.jsx("div",{className:"flex justify-center text-center discussion-page-header",children:e.jsxs("div",{className:"discussion-page-header-container",children:[e.jsx("div",{className:"capitalize discussion-page-tag",children:a.tag}),e.jsx("div",{className:"capitalize discussion-page-title",children:a.title})]})})}),e.jsx(ie,{children:e.jsxs("div",{className:"discussion-page-content-wrapper",children:[e.jsxs("div",{className:"dicussion-area",children:[e.jsx("div",{className:"discussion-thread",children:o.map((g,A)=>e.jsx(Ke,{post:g,userLikedComments:ne,highlightedCommentId:w,handleLike:os,handleUnLike:ls,onReplyClick:ns,onEditClick:rs,showMoreMenu:Ze,toggleMoreMenu:Es,handleDeleteComment:Le,moreMenuRef:Xe,onReplyLink:es},g.id))}),e.jsxs("div",{className:"reply-input-container",onClick:()=>N(!0),style:{cursor:"text"},children:[e.jsx("div",{className:"reply-input-avatar",children:t.passport!==""?e.jsx("div",{className:"userProfileImage w-[32px] h-[32px] sm:w-[35px] sm:h-[35px] md:w-[50px] md:h-[50px] rounded-[5rem] overflow-auto  shrink-0 flex",children:e.jsx("img",{src:`https://rsjobhub.com/${t.passport}`,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}):e.jsx("div",{className:"userProfileImage w-[32px] h-[32px] sm:w-[35px] sm:h-[35px] md:w-[50px] md:h-[50px] rounded-[5rem] overflow-auto  shrink-0 flex",children:e.jsx("img",{src:Se,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})})}),e.jsx("form",{className:"reply-input-form",children:e.jsx("div",{className:"reply-input-field",placeholder:"Write a Reply...",children:"Write a Reply..."})})]})]}),t.status==="admin"?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-[20%] reply-btn-area-with-action sticky top-[100px] right-0 height-[calc(100vh - 100px)]  z-[50] pt-[2rem]",children:[e.jsxs("div",{className:"flex rounded-[4px] gap-[.2rem] overflow-hidden",children:[e.jsx("button",{className:"w-full bg-[--primary] hover:bg-[--primary-hover] text-white px-[2rem] h-[40px] text-[14px] transition-[all_.2s_ease]",onClick:()=>N(!0),children:"Reply"}),e.jsx("button",{ref:F,className:`bg-[--primary] hover:bg-[--primary-hover] text-white px-[.5rem] transition-[all_.2s_ease] ${H?"bg-[#134fa3]":""}`,onClick:is,type:"button",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2.3",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-down",children:e.jsx("path",{d:"m6 9 6 6 6-6"})})})]}),H&&e.jsx("div",{className:"more-menu-container",ref:J,children:e.jsxs("div",{className:"flex flex-col absolute top-[100%] mt-[10px] left-[0] bg-[#fff] rounded-[6px] border border-[--text-primary-3] z-[10]  w-[100%]",children:[e.jsxs("button",{onClick:()=>k(!0),className:"gap-[.5rem] w-[100%] text-left bg-none border-0 text-[12px] text-[--text-primary] cursor-pointer flex items-start p-[15px_15px] hover:bg-[#071d290a] transition-[all_.2s_ease]",children:[e.jsx(Ue,{style:{fontSize:"16px"}}),"Rename"]}),e.jsxs("button",{onClick:()=>re(a.id),className:" gap-[.5rem] w-[100%] text-left bg-none border-0 text-[12px] text-[--text-primary] cursor-pointer flex items-start p-[15px_15px] hover:bg-[#071d290a] transition-[all_.2s_ease]",children:[e.jsx(Oe,{style:{fontSize:"16px"}}),"Delete"]})]})})]})}):t.id===a.author.id?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-[20%] reply-btn-area-with-action sticky top-[100px] right-0 height-[calc(100vh - 100px)]  z-[50] pt-[2rem]",children:[e.jsxs("div",{className:"flex rounded-[4px] gap-[.2rem] overflow-hidden",children:[e.jsx("button",{className:"w-full bg-[--primary] hover:bg-[--primary-hover] text-white px-[2rem] h-[40px] text-[14px] transition-[all_.2s_ease]",onClick:()=>N(!0),children:"Reply"}),e.jsx("button",{ref:F,className:`bg-[--primary] hover:bg-[--primary-hover] text-white px-[.5rem] transition-[all_.2s_ease] ${H?"bg-[#134fa3]":""}`,onClick:is,type:"button",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2.3",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-down",children:e.jsx("path",{d:"m6 9 6 6 6-6"})})})]}),H&&e.jsx("div",{className:"more-menu-container",ref:J,children:e.jsxs("div",{className:"flex flex-col absolute top-[100%] mt-[10px] left-[0] bg-[#fff] rounded-[6px] border border-[--text-primary-3] z-[10]  w-[100%]",children:[e.jsxs("button",{onClick:()=>k(!0),className:"gap-[.5rem] w-[100%] text-left bg-none border-0 text-[12px] text-[--text-primary] cursor-pointer flex items-start p-[15px_15px] hover:bg-[#071d290a] transition-[all_.2s_ease]",children:[e.jsx(Ue,{style:{fontSize:"16px"}}),"Rename"]}),e.jsxs("button",{onClick:()=>re(a.id),className:" gap-[.5rem] w-[100%] text-left bg-none border-0 text-[12px] text-[--text-primary] cursor-pointer flex items-start p-[15px_15px] hover:bg-[#071d290a] transition-[all_.2s_ease]",children:[e.jsx(Oe,{style:{fontSize:"16px"}}),"Delete"]})]})})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-[20%] reply-btn-area",children:e.jsx("button",{onClick:()=>N(!0),children:"Reply"})})})]})}),e.jsx(rn,{displaySidebarMenu:b,onCloseSidebar:ts,onSelectDiscussion:ye})]}):e.jsx("div",{className:"flex items-center justify-center w-full spinner-container pt-[5rem]"})})}),e.jsx(Nn,{open:j,onClose:()=>N(!1),replyToDiscussionId:n,onCommentAdded:Ee}),e.jsx(at,{open:y,onClose:()=>T(!1),replyToDiscussionId:n,replyToCommentId:L,onReplyCommentAdded:De}),e.jsx(kn,{open:C,onClose:()=>k(!1),replyToDiscussionId:n,replyToDiscussionTitle:a==null?void 0:a.title,onRenameDiscussionTitle:_e}),e.jsx(ot,{open:f,onClose:()=>x(!1),editCommentDiscussionId:n,editCommentId:M==null?void 0:M.id,initialContent:M==null?void 0:M.content,onEditCommentContent:as}),e.jsx(se,{in:Be,timeout:250,classNames:"fade-scale",unmountOnExit:!0,children:e.jsx(wn,{onCancel:ze,onConfirm:Te})})]})},Cn=()=>{const{authFetch:s}=Y(),[t,n]=c.useState(!1),r=oe(),a=te();function i(){r.pathname==="/"?a(0):a("/")}const{data:o=[],isLoading:l,isError:d,refetch:u}=de({queryKey:["tags"],queryFn:()=>Gs(s),staleTime:0,refetchOnWindowFocus:!0});return e.jsxs(e.Fragment,{children:[e.jsx(pe,{onStartDiscussion:()=>n(!0)}),e.jsx(ie,{children:e.jsxs("div",{className:"forumHomeLayout",children:[e.jsx(Ns,{onAllDiscussionsClick:i,currentPath:r.pathname,onStartDiscussion:()=>n(!0)}),l?e.jsxs("div",{className:"flex items-center justify-center w-full spinner-container",children:[e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"loading-text",children:"Loading..."})]}):d?e.jsx("div",{className:"flex items-center justify-center w-full pt-8",children:e.jsx("span",{className:"loading-text",children:"Failed to fetch tags."})}):o.length===0?e.jsx("div",{className:"flex items-center justify-center w-full pt-8",children:e.jsx("span",{className:"loading-text",children:"No tags found."})}):e.jsx("div",{className:"forumHomeMainSection",children:e.jsx("div",{className:"grid w-full grid-cols-1 gap-4 tag-card sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3",children:o.map(m=>e.jsx(U,{to:`/tags/${m.id}/${m.name}`,children:e.jsxs("div",{className:"relative w-full h-[150px] rounded-[5px] bg-white overflow-hidden flex flex-col justify-between p-4 transition-all duration-300 ease hover:scale-[1.01]",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-[#071d2910] pb-[.5rem]",children:[e.jsx("div",{className:"text-[14px] md:text-[14px] text-[--primary] font-[600]  capitalize",children:m.name}),e.jsx("div",{className:"tagDiscussionCount",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ct,{className:"tagDiscussionCount-icon"}),e.jsx("span",{className:"text-[12px]",children:ws(m.discussionCount)})]})})]}),e.jsxs("div",{className:"absolute flex flex-col items-start bottom-3 left-4 right-4",children:[e.jsx("span",{className:"text-[12px] font-medium opacity-80 last-discussion",children:m.lastDiscussionTitle!==null?m.lastDiscussionTitle:"No discussions"}),e.jsx("span",{className:"text-[10px] text-[#071d2980] uppercase last-discussion-createdAt",children:e.jsx(ke,{createdAt:m.lastDiscussionCreatedAt})})]})]})},m.id))})})]})}),e.jsx(Cs,{open:t,onClose:()=>n(!1)})]})},Sn=(s=20,t=null)=>{const{authFetch:n}=Y(),[r,a]=c.useState([]),[i,o]=c.useState(1),[l,d]=c.useState(!1),[u,m]=c.useState(!1),[p,j]=c.useState(!1),[N,y]=c.useState(!0),T=c.useCallback(async(x,b,D)=>{try{const v=await Ht(n,D);return Array.isArray(v)?v.slice(x,b):[]}catch(v){return console.error("Error fetching discussions by tag:",v),[]}},[n]),C=c.useCallback(async x=>{m(!0);try{const b=await T(0,s,x);a(b);const D=b.length;y(D===s),j(!0),o(1)}catch(b){console.error("Error fetching initial discussions:",b)}finally{m(!1)}},[T,s]);c.useEffect(()=>{C(t)},[C,t]);const k=c.useCallback(async()=>{d(!0),o(1),y(!0);try{const x=await T(0,s,t);a(x),y(x.length===s)}catch(x){console.error("Error refreshing discussions:",x)}finally{d(!1)}},[T,s,t]),f=c.useCallback(async()=>{if(u||!N)return;m(!0);const x=i+1,b=(x-1)*s,D=x*s;try{const v=await T(b,D,t);a(S=>[...S,...v]),o(x),y(v.length===s)}catch(v){console.error("Error loading more discussions:",v)}finally{m(!1)}},[i,s,T,N,u,t]);return{visibleDiscussions:r,isRefreshing:l,isLoading:u,isDataFetched:p,hasMore:N,handleRefresh:k,loadMoreDiscussions:f,setVisibleDiscussions:a}},En=()=>{const{authFetch:s,currentUser:t}=Y(),{tagID:n,tagName:r}=bs(),[a,i]=c.useState(!1),[o,l]=c.useState(20),d=oe(),u=te(),{visibleDiscussions:m,isRefreshing:p,isLoading:j,isDataFetched:N,hasMore:y,handleRefresh:T,loadMoreDiscussions:C}=Sn(o,n),k=async b=>{try{const D={user_id:t.id,post_id:b},v=await Je(s,D);if(v.message==="Post has been marked as read")return;console.log(v)}catch(D){console.error("Error marking discussions as read:",D)}},f=async()=>{try{const b={user_id:t.id},D=await Xs(s,b);D.message==="All posts marked as read"?T():console.log(D)}catch(b){console.error("Error marking all discussions as read:",b)}};function x(){d.pathname==="/"?T():u("/")}return e.jsxs(e.Fragment,{children:[e.jsx(pe,{onStartDiscussion:()=>i(!0)}),e.jsx(ie,{children:e.jsxs("div",{className:"forumHomeLayout",children:[e.jsx(Ns,{onAllDiscussionsClick:x,currentPath:d.pathname,onStartDiscussion:()=>i(!0)}),N?e.jsxs("div",{className:"forumHomeMainSection",children:[e.jsxs("div",{className:"forum-filter-bar",children:[e.jsx("div",{className:"forum-tag-title",children:e.jsxs("h1",{className:"font-[600] text-[--primary] uppercase flex items-center gap-1",children:[e.jsx(wt,{className:"text-[14px] sm:text-[16px]"}),e.jsx("span",{className:" text-[12px] sm:text-[14px]",children:r})]})}),e.jsxs("div",{className:"filter-actions",children:[e.jsx("button",{className:`action-button refresh-button ${p?"refreshing":""}`,onClick:T,"aria-label":"Refresh",disabled:p||j,children:e.jsx(Ps,{})}),e.jsx("button",{className:"action-button mark-read-button",onClick:f,"aria-label":"Mark all as read",children:e.jsx(Bs,{})})]})]}),p?e.jsxs("div",{className:"flex items-center justify-center w-full spinner-container",children:[e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"loading-text",children:"Loading..."})]}):e.jsxs("div",{className:"discussions-container",children:[m.length>0?e.jsx("ul",{className:"discussions-list",children:m.map(b=>e.jsx(ks,{discussion:b,handleMarkAsRead:k},b.id))}):e.jsx("div",{className:"flex items-center justify-center w-full spinner-container",children:e.jsx("span",{className:"loading-text",children:e.jsxs("p",{className:"no-discussions-message",children:['No discussions found for this tag: "',r,'"']})})}),y&&e.jsx("div",{className:"load-more-container",children:j?e.jsx(e.Fragment,{children:e.jsx("div",{className:"spinner"})}):e.jsx(xe,{loadMoreDiscussions:C,isLoading:j})})]})]}):e.jsxs("div",{className:"flex items-center justify-center w-full spinner-container",children:[e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}}),e.jsxs("span",{className:"loading-text",children:['Loading discussions for "',r,'"...']})]})]})}),e.jsx(Cs,{open:a,onClose:()=>i(!1)})]})},Dn=G.createContext({}),lt=!0;function _n({baseColor:s,highlightColor:t,width:n,height:r,borderRadius:a,circle:i,direction:o,duration:l,enableAnimation:d=lt,customHighlightBackground:u}){const m={};return o==="rtl"&&(m["--animation-direction"]="reverse"),typeof l=="number"&&(m["--animation-duration"]=`${l}s`),d||(m["--pseudo-element-display"]="none"),(typeof n=="string"||typeof n=="number")&&(m.width=n),(typeof r=="string"||typeof r=="number")&&(m.height=r),(typeof a=="string"||typeof a=="number")&&(m.borderRadius=a),i&&(m.borderRadius="50%"),typeof s<"u"&&(m["--base-color"]=s),typeof t<"u"&&(m["--highlight-color"]=t),typeof u=="string"&&(m["--custom-highlight-background"]=u),m}function Ae({count:s=1,wrapper:t,className:n,containerClassName:r,containerTestId:a,circle:i=!1,style:o,...l}){var d,u,m;const p=G.useContext(Dn),j={...l};for(const[x,b]of Object.entries(l))typeof b>"u"&&delete j[x];const N={...p,...j,circle:i},y={...o,..._n(N)};let T="react-loading-skeleton";n&&(T+=` ${n}`);const C=(d=N.inline)!==null&&d!==void 0?d:!1,k=[],f=Math.ceil(s);for(let x=0;x<f;x++){let b=y;if(f>s&&x===f-1){const v=(u=b.width)!==null&&u!==void 0?u:"100%",S=s%1,L=typeof v=="number"?v*S:`calc(${v} * ${S})`;b={...b,width:L}}const D=G.createElement("span",{className:T,style:b,key:x},"‌");C?k.push(D):k.push(G.createElement(G.Fragment,{key:x},D,G.createElement("br",null)))}return G.createElement("span",{className:r,"data-testid":a,"aria-live":"polite","aria-busy":(m=N.enableAnimation)!==null&&m!==void 0?m:lt},t?k.map((x,b)=>G.createElement(t,{key:b},x)):k)}function Tn(s){return z({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M48 48a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm448 16H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(s)}const Ln=({userid:s})=>{const[t,n]=c.useState("posts"),r=oe();return c.useEffect(()=>{r.pathname===`/user/${s}`?n("posts"):r.pathname===`/user/${s}/discussions`?n("discussions"):r.pathname===`/user/${s}/likes`?n("likes"):r.pathname===`/user/${s}/mentions`&&n("mentions")},[r.pathname]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"user-profile-sidebar",children:e.jsxs("ul",{children:[e.jsx(ds,{to:`/user/${s}`,children:e.jsxs("li",{className:`flex items-center gap-[.8rem]  ${t==="posts"?"active":""}`,children:[e.jsx("div",{className:"",children:e.jsx($e,{className:"text-[16px]"})}),e.jsx("p",{children:"Posts"})]})}),e.jsx(ds,{to:`/user/${s}/discussions`,children:e.jsxs("li",{className:`flex items-center gap-[.8rem]  ${t==="discussions"?"active":""}`,children:[e.jsx("div",{className:"",children:e.jsx(Tn,{className:"text-[16px]"})}),e.jsx("p",{children:"Discussions"})]})}),e.jsx(ds,{to:`/user/${s}/likes`,children:e.jsxs("li",{className:`flex items-center gap-[.8rem]  ${t==="likes"?"active":""}`,children:[e.jsx("div",{className:"",children:e.jsx(Hs,{className:"text-[16px]"})}),e.jsx("p",{children:"Likes"})]})})]})})})},hs=()=>e.jsxs("div",{className:"mb-[24px]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ae,{width:60,height:16}),e.jsx(Ae,{width:120,height:16})]}),e.jsx(Ae,{height:40,count:2,style:{marginBottom:8}})]}),Rn=()=>e.jsxs("div",{className:"mb-[24px]",children:[e.jsx(Ae,{width:180,height:24,style:{marginBottom:8}}),e.jsx(Ae,{height:32,count:2})]}),X=20,Ve=()=>{const{authFetch:s,currentUser:t}=Y(),n=fe(),{userId:r}=bs(),a=oe(),[i,o]=c.useState({}),[l,d]=c.useState(""),[u,m]=c.useState(!0),[p,j]=c.useState(null),[N,y]=c.useState(null),[T,C]=c.useState(!1),[k,f]=c.useState(null),[x,b]=c.useState(null),[D,v]=c.useState(!1),[S,L]=c.useState(null),[R,M]=c.useState(X),[$,w]=c.useState(X),[_,O]=c.useState(X),[W,ee]=c.useState(X),B=a.pathname===`/user/${r}`,H=a.pathname===`/user/${r}/discussions`,K=a.pathname===`/user/${r}/likes`,F=a.pathname===`/user/${r}/mentions`,[J,ne]=c.useState([]),{data:Z=[],isLoading:Be,error:ue,refetch:Ss}=de({queryKey:["userPosts",r],enabled:B,staleTime:0,refetchOnWindowFocus:!0,queryFn:async()=>{const h=await Vt(s,Number(r));return h&&Array.isArray(h)&&h.length>0?await Promise.all(h.map(async I=>{try{const V=await fs(s,I.post_id,r);return{...I,discussionTitle:V&&!V.error?V.title:"Unknown Discussion"}}catch{return{...I,discussionTitle:"Unknown Discussion"}}})):[]}}),{data:ce=[],isLoading:Ze,error:Xe,refetch:Es}=de({queryKey:["userDiscussions",r],enabled:H,staleTime:0,refetchOnWindowFocus:!0,queryFn:async()=>{const h=await Wt(s,Number(r));return h&&Array.isArray(h)?h:[]}}),{data:ve=[],isLoading:es,error:ss,refetch:ts}=de({queryKey:["userLikes",r],enabled:K,staleTime:0,refetchOnWindowFocus:!0,queryFn:async()=>{const h=await gs(s,Number(r));return h&&Array.isArray(h)&&h.length>0?await Promise.all(h.map(async I=>{try{const V=await fs(s,I.post_id,r);return{...I,discussionTitle:V&&!V.error?V.title:"Unknown Discussion"}}catch{return{...I,discussionTitle:"Unknown Discussion"}}})):[]}}),{data:ye=[],isLoading:ns,error:rs,refetch:is}=de({queryKey:["userMentions",r],enabled:F,staleTime:0,refetchOnWindowFocus:!0,queryFn:async()=>{const h=[];return h&&Array.isArray(h)?h:[]}});c.useEffect(()=>{y(null);const h=Number(r);(async()=>{try{const I=await qt(s,h);I&&!I.error?(o(I),m(!1),B?d("posts"):H?d("discussions"):K?d("likes"):F&&d("mentions")):(j("The page you are looking for is not available"),m(!1))}catch(I){j(I.message),m(!1);return}})()},[r,a.pathname,B,H,K,F,s]);const{showMoreMenu:Ee,moreMenuRef:De,toggleMoreMenu:_e,setShowMoreMenu:as}=it();c.useEffect(()=>{M(X),w(X),O(X),ee(X)},[r,B,H,K,F]);const re=c.useMemo(()=>B?Z.slice(0,R):H?ce.slice(0,$):K?ve.slice(0,_):F?ye.slice(0,W):[],[B,H,K,F,Z,ce,ve,ye,R,$,_,W]),Te=h=>{f(h);const E=re.find(I=>I.id===h);b(E?E.post_id:null),C(!0)},ze=h=>{L(h),v(!0)},Le=async(h,E)=>{try{const I=await Ys(s,h);I.message==="Comment and its likes deleted successfully"&&(E==="userPosts"?(n.setQueryData(["userPosts",r],V=>V&&V.filter(cs=>cs.id!==h)),n.invalidateQueries({queryKey:["userLikes",r]})):E==="userLikes"&&(n.setQueryData(["userLikes",r],V=>V&&V.filter(cs=>cs.id!==h)),n.invalidateQueries({queryKey:["userPosts",r]})),Notification("success","Comment Deleted")),I.error==="Comment not found"&&Notification("failed","Invalid Comment ID")}catch(I){console.log(I)}as(null)},os=h=>{B?(n.setQueryData(["userPosts",r],E=>E&&E.map(I=>Number(I.id)===Number(h.id)?{...I,content:h.content}:I)),n.invalidateQueries({queryKey:["userLikes",r]})):K&&(n.setQueryData(["userLikes",r],E=>E&&E.map(I=>Number(I.id)===Number(h.id)?{...I,content:h.content}:I)),n.invalidateQueries({queryKey:["userPosts",r]}))},ls=async h=>{try{const E={user_id:t.id,post_id:h},I=await Je(s,E);if(I.message==="Post has been marked as read")return;console.log(I)}catch(E){console.error("Error marking discussions as read:",E)}},Re=()=>{};c.useEffect(()=>{(async()=>{if(t&&t.id)try{const E=await gs(s,t.id);ne(Array.isArray(E)?E:[])}catch{ne([])}})()},[s,t]);const g=async h=>{(await Js(s,{comment_id:h,user_id:t.id})).message==="Comment liked successfully"?(ne(I=>[...I,{id:h,liked_user_id:t.id}]),n.invalidateQueries({queryKey:["userLikes",r]})):Notification("failed","Failed to like comment",3e3)},A=async h=>{(await Zs(s,{comment_id:h,user_id:t.id})).message==="Comment unliked successfully"?(ne(I=>I.filter(V=>!(Number(V.liked_user_id)===Number(t.id)&&Number(V.id)===Number(h)))),n.invalidateQueries({queryKey:["userLikes",r]})):Notification("failed","Failed to like comment",3e3)};return p?e.jsxs(e.Fragment,{children:[e.jsx(pe,{}),e.jsx(ie,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container pt-[5rem] text-[--text-primary-2]",children:p})})]}):e.jsxs(e.Fragment,{children:[e.jsx(pe,{profilePageRoute:l,userId:r}),u?e.jsx("div",{className:"flex justify-center w-full spinner-container pt-[5rem]",children:e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}})}):e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("div",{className:"user-profile-banner",children:e.jsx(ie,{children:e.jsxs("div",{className:"flex gap-[1rem] sm:gap-[1.5rem] items-center flex-col sm:flex-row",children:[i.passport!==""?e.jsx("div",{className:"user-profile-image-wrapper w-[80px] h-[80px] sm:w-[90px] md:w-[110px]  sm:h-[90px] md:h-[110px] border-[3px] sm:border-4 border-white rounded-full overflow-hidden shadow-[0_0_5px_#000]",children:e.jsx("img",{src:`https://rsjobhub.com/${i.passport}`,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}):e.jsx("div",{className:"user-profile-image-wrapper w-[80px] h-[80px] sm:w-[90px] md:w-[110px]  sm:h-[90px] md:h-[110px] border-[3px] sm:border-4 border-white rounded-full overflow-hidden shadow-[0_0_5px_#000]",children:e.jsx("img",{src:Se,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-white text-[14px] sm:text-[16px] capitalize",children:[i.first_name," ",i.last_name]}),e.jsxs("div",{className:"flex items-center gap-2 mt-[.5rem] sm:mt-[1rem] justify-center sm:justify-start",children:[e.jsx("div",{className:`user-profile-online-indicator w-[12px] h-[12px]  rounded-full ${i.status==="admin"?"bg-red-500":"bg-[--primary]"}`}),e.jsx("p",{className:"text-gray-300 text-[.8rem]",children:i.status==="admin"?"Admin":"User"})]})]})]})})}),e.jsx("section",{children:e.jsx(ie,{children:e.jsxs("div",{className:"user-profile-main-section mt-[2rem] flex gap-[3rem]",children:[e.jsx(Ln,{userid:r}),e.jsx("div",{className:"user-profile-content-area mb-[5rem]",children:B&&Be?e.jsx(e.Fragment,{children:Array.from({length:5}).map((h,E)=>e.jsx(hs,{},E))}):B&&ue?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:"Error loading posts."})}):B&&Z.length===0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:"Nothing to see here yet"})}):B?e.jsxs(e.Fragment,{children:[re.map(h=>e.jsxs("div",{className:"mb-[24px]",children:[e.jsxs("p",{className:"text-[.75rem] sm:text-[.8rem] font-[600]",children:["In ",e.jsx(U,{to:`/d/${h.post_id}/${h.id}`,className:"italic hover:underline",children:h.discussionTitle})]}),e.jsx(Ke,{post:h,userLikedComments:J,handleUnLike:A,handleLike:g,onReplyClick:Te,onEditClick:ze,showMoreMenu:Ee,toggleMoreMenu:_e,handleDeleteComment:()=>Le(h.id,"userPosts"),moreMenuRef:De,onReplyLink:Re},h.id)]},h.id)),Z.length>R&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(xe,{loadMoreDiscussions:()=>M(h=>h+X)})})})]}):H&&Ze?e.jsx(e.Fragment,{children:Array.from({length:3}).map((h,E)=>e.jsx(Rn,{},E))}):H&&Xe?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:"Error loading discussions."})}):H&&ce.length===0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:"Nothing to see here yet"})}):H?e.jsxs(e.Fragment,{children:[re.map(h=>e.jsx(ks,{discussion:h,handleMarkAsRead:ls},h.id)),ce.length>$&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(xe,{loadMoreDiscussions:()=>w(h=>h+X)})})})]}):K&&es?e.jsx(e.Fragment,{children:Array.from({length:5}).map((h,E)=>e.jsx(hs,{},E))}):K&&ss?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:"Error loading likes."})}):K&&ve.length===0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:"Nothing to see here yet"})}):K?e.jsxs(e.Fragment,{children:[re.map(h=>e.jsxs("div",{className:"mb-[24px]",children:[e.jsxs("p",{className:"text-[.75rem] sm:text-[.8rem] font-[600]",children:["in ",e.jsx(U,{to:`/d/${h.post_id}/${h.id}`,className:"italic hover:underline",children:h.discussionTitle})]}),e.jsx(Ke,{post:h,userLikedComments:J,handleUnLike:A,handleLike:g,onReplyClick:Te,onEditClick:ze,showMoreMenu:Ee,toggleMoreMenu:_e,handleDeleteComment:()=>Le(h.id,"userLikes"),moreMenuRef:De,onReplyLink:Re},h.id)]},h.liked_id)),ve.length>_&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(xe,{loadMoreDiscussions:()=>O(h=>h+X)})})})]}):F&&ns?e.jsx(e.Fragment,{children:Array.from({length:5}).map((h,E)=>e.jsx(hs,{},E))}):F&&rs?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:"Error loading mentions."})}):F&&ye.length===0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:"Nothing to see here yet"})}):F?e.jsxs(e.Fragment,{children:[re.map(h=>e.jsxs("div",{className:"mb-[24px]",children:[e.jsxs("p",{className:"text-[.75rem] sm:text-[.8rem] font-[600]",children:["in ",e.jsx(U,{to:`/d/${h.post_id}/${h.id}`,className:"hover:underline",children:h.discussionTitle})]}),e.jsx(Ke,{post:h,handleLike,onReplyClick:Te,showMoreMenu:Ee,toggleMoreMenu:_e,handleDeleteComment:Le,moreMenuRef:De},h.id)]},h.id)),ye.length>W&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(xe,{loadMoreDiscussions:()=>ee(h=>h+X)})})})]}):N?e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:N}):null})]})})})]})}),e.jsx(at,{open:T,onClose:()=>C(!1),replyToDiscussionId:x,replyToCommentId:k})," ",e.jsx(ot,{open:D,onClose:()=>v(!1),editCommentDiscussionId:S==null?void 0:S.post_id,editCommentId:S==null?void 0:S.id,initialContent:S==null?void 0:S.content,onEditCommentContent:os})]})};function Mn(){const s=oe();return c.useEffect(()=>{const n=(r=>{switch(r){case"/":return"RSJOBHUB FORUM";case"/notifications":return"NOTIFICATIONS - RSJOBHUB FORUM";case(r.startsWith("/d/")?r:void 0):return"DISCUSSION - RSJOBHUB FORUM";case(r.startsWith("/tags")?r:void 0):case(r.startsWith("/tags/")?r:void 0):return"TAGS - RSJOBHUB FORUM";case(r.startsWith("/user")?r:void 0):return"PROFILE - RSJOBHUB FORUM";default:return"RSJOBHUB FORUM"}})(s.pathname);document.title=n},[s.pathname]),null}const Fn=()=>{const{isAuthenticated:s}=Y();return s?e.jsx(xt,{}):e.jsx(ht,{to:"/redirect",replace:!0})},Me=()=>e.jsxs(e.Fragment,{children:[e.jsx(pe,{}),e.jsx("div",{className:"flex items-center justify-center w-full spinner-container pt-[5rem]",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-[.9rem] mb-[1rem]",children:"The Page you are looking for is not found"}),e.jsx(U,{to:"/",className:"text-[.9rem] text-[--primary] flex justify-center underline",children:"Back To Home"})]})})]}),$n=()=>e.jsx("div",{className:"flex items-center justify-center w-full spinner-container pt-[5rem]",children:e.jsx("div",{children:e.jsx("p",{className:"text-[.9rem] mb-[1rem]",children:"Redirecting..."})})}),In=()=>{const[s,t]=c.useState([]),n={success:{icon:mn,color:"text-green-600",bgColor:"bg-green-50",text:"Success",borderColor:"border-green-200"},failed:{icon:xn,color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200",text:"Failed"},"in-progress":{icon:fn,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",text:"In progress"},submitted:{icon:jn,color:"text-[#1966d2]",bgColor:"bg-[#f0f6fe]",borderColor:"border-[#1966d240]",text:"Submitted"}},r=(i,o=null,l=7e3)=>{const d=Date.now()+Math.random(),u=n[i];if(!u){console.warn(`Unknown notification type: ${i}`);return}const m={id:d,type:i,message:o||u.text,...u};t(p=>[...p,m]),setTimeout(()=>{t(p=>p.filter(j=>j.id!==d))},l)};G.useEffect(()=>(window.Notification=r,()=>{delete window.Notification}),[]);const a=i=>{t(o=>o.filter(l=>l.id!==i))};return e.jsx("div",{className:"fixed z-[999] space-y-2 bottom-8 left-8",children:s.map(i=>{const o=i.icon;return e.jsxs("div",{className:`
              flex items-center gap-3 px-4 py-3 rounded-[.8rem] border
              ${i.bgColor} ${i.borderColor}
              transform transition-all duration-300 ease-in-out cursor-pointer min-w-[250px] max-w-[250px] w-[100%] shadow-md
            `,onClick:()=>a(i.id),children:[e.jsx(o,{className:`w-4 h-4 md:w-5 md:h-5 ${i.color} ${i.type==="in-progress"?"animate-spin":""}`}),e.jsx("span",{className:`font-medium ${i.color} text-[.75rem] md:text-[.8rem]`,children:i.message})]},i.id)})})};function An(){return e.jsx(e.Fragment,{children:e.jsx(pt,{children:e.jsxs(bt,{children:[e.jsx(Mn,{}),e.jsx(In,{})," ",e.jsxs(ft,{children:[e.jsxs(Q,{element:e.jsx(Fn,{}),children:[" ",e.jsx(Q,{path:"/",element:e.jsx(nn,{})}),e.jsx(Q,{path:"/d/:id",element:e.jsx(Os,{})}),e.jsx(Q,{path:"/d/:id/:commentId?",element:e.jsx(Os,{})}),e.jsx(Q,{path:"/tags",element:e.jsx(Cn,{})}),e.jsx(Q,{path:"/tags/:tagID/:tagName",element:e.jsx(En,{})}),e.jsx(Q,{path:"/user/:userId",element:e.jsx(Ve,{})}),e.jsx(Q,{path:"/user/:userId/discussions",element:e.jsx(Ve,{})}),e.jsx(Q,{path:"/user/:userId/likes",element:e.jsx(Ve,{})}),e.jsx(Q,{path:"/user/:userId/mentions",element:e.jsx(Ve,{})}),e.jsx(Q,{path:"*",element:e.jsx(Me,{})}),e.jsx(Q,{path:"/d/*",element:e.jsx(Me,{})}),e.jsx(Q,{path:"/tags/*",element:e.jsx(Me,{})}),e.jsx(Q,{path:"/user/*",element:e.jsx(Me,{})}),e.jsx(Q,{path:"/user/:userId/*",element:e.jsx(Me,{})})]})," ",e.jsx(Q,{path:"/redirect",element:e.jsx($n,{})})]})]})})})}const On=new ct;vt.createRoot(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsx(dt,{client:On,children:e.jsx(An,{})})}));
