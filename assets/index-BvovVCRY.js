import{j as e,u as fe,a as de,Q as ot,b as lt}from"./react-query-DprFZe7P.js";import{b as ct,a as c,u as ae,d as te,L as O,g as dt,R as G,e as Pe,f as js,N as os,h as ut,O as mt,B as ht,i as xt,j as Q}from"./react-vendor-AOxAJ7Hw.js";import{G as z}from"./icons-Dyxe2h2u.js";import{r as pt}from"./quill-editor-BjhXd_7i.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();var Be={},Ds;function ft(){if(Ds)return Be;Ds=1;var s=ct();return Be.createRoot=s.createRoot,Be.hydrateRoot=s.hydrateRoot,Be}var gt=ft();/*! js-cookie v3.0.5 | MIT */function ze(s){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)s[r]=t[r]}return s}var jt={read:function(s){return s[0]==='"'&&(s=s.slice(1,-1)),s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(s){return encodeURIComponent(s).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function us(s,n){function t(a,i,o){if(!(typeof document>"u")){o=ze({},n,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),a=encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var d in o)o[d]&&(l+="; "+d,o[d]!==!0&&(l+="="+o[d].split(";")[0]));return document.cookie=a+"="+s.write(i,a)+l}}function r(a){if(!(typeof document>"u"||arguments.length&&!a)){for(var i=document.cookie?document.cookie.split("; "):[],o={},l=0;l<i.length;l++){var d=i[l].split("="),u=d.slice(1).join("=");try{var m=decodeURIComponent(d[0]);if(o[m]=s.read(u,m),a===m)break}catch{}}return a?o[a]:o}}return Object.create({set:t,get:r,remove:function(a,i){t(a,"",ze({},i,{expires:-1}))},withAttributes:function(a){return us(this.converter,ze({},this.attributes,a))},withConverter:function(a){return us(ze({},this.converter,a),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(s)}})}var P=us(jt,{path:"/"});const As=c.createContext(null),vt=({children:s})=>{const n=ae(),r=new URLSearchParams(n.search).get("uin"),[a,i]=c.useState(null),[o,l]=c.useState(null),[d,u]=c.useState(null),[m,f]=c.useState(!0),[g,w]=c.useState(null),y=c.useRef(null),_=te(),k="https://forumapi.rsjobhub.com/api",C=`${k}/auth/token`,p=`${k}/user`,x=async()=>{f(!0);try{let T=P.get("token"),M=P.get("userId"),L=P.get("userUIN");if(T&&M&&L){let I=await fetch(`${p}/${M}`,{method:"GET",headers:{Authorization:`Bearer ${T}`,SameSite:"Strict"}});if(I.ok){const N=await I.json();l(T),u(L),i(N)}else{const N=await fetch(`${C}/${L}`,{method:"GET",headers:{"Content-Type":"application/json",SameSite:"Strict"}});if(N.ok){const D=await N.json();l(D.token),u(D.user_uin),P.set("token",D.token,{expires:7,secure:!0,sameSite:"Strict",path:"/"}),P.set("userId",D.user_id,{expires:7,secure:!0,sameSite:"Strict",path:"/"}),P.set("userUIN",D.user_uin,{expires:7,secure:!0,sameSite:"Strict",path:"/"});const A=await fetch(`${p}/${D.user_id}`,{method:"GET",headers:{Authorization:`Bearer ${D.token}`,SameSite:"Strict"}});if(A.ok){const q=await A.json();i(q);return}}i(null),l(null),u(null),P.remove("token"),P.remove("userId"),P.remove("userUIN")}}else if(r){const I=await fetch(`${C}/${r}`,{method:"GET",headers:{"Content-Type":"application/json",SameSite:"Strict"}});if(I.ok){const N=await I.json();if(N.user_id===null)throw new Error("Invalid UIN");{l(N.token),u(N.user_uin),P.set("token",N.token,{expires:7,secure:!0,sameSite:"Strict",path:"/"}),P.set("userId",N.user_id,{expires:7,secure:!0,sameSite:"Strict",path:"/"}),P.set("userUIN",N.user_uin,{expires:7,secure:!0,sameSite:"Strict",path:"/"});const D=await fetch(`${p}/${N.user_id}`,{method:"GET",headers:{Authorization:`Bearer ${N.token}`,SameSite:"Strict"}});if(D.ok){const A=await D.json();i(A)}else throw new Error("Failed to fetch User Data")}}else throw new Error("Failed to Fetch Token")}else _(-1)}catch(T){console.error(T),P.remove("token"),P.remove("userId"),P.remove("userUIN"),l(null),u(null),i(null),w("Failed to Authenticate")}finally{f(!1)}},b=async()=>{try{let T=P.get("token"),M=P.get("userId"),L=P.get("userUIN");if(T&&M&&L){let I=await fetch(`${p}/${M}`,{method:"GET",headers:{Authorization:`Bearer ${T}`,SameSite:"Strict"}});if(I.ok){const N=await I.json();l(T),u(L),i(N)}else{const N=await fetch(`${C}/${L}`,{method:"GET",headers:{"Content-Type":"application/json",SameSite:"Strict"}});if(N.ok){const D=await N.json();l(D.token),u(D.user_uin),P.set("token",D.token,{expires:7,secure:!0,sameSite:"Strict",path:"/"}),P.set("userId",D.user_id,{expires:7,secure:!0,sameSite:"Strict",path:"/"}),P.set("userUIN",D.user_uin,{expires:7,secure:!0,sameSite:"Strict",path:"/"});const A=await fetch(`${p}/${D.user_id}`,{method:"GET",headers:{Authorization:`Bearer ${D.token}`,SameSite:"Strict"}});if(A.ok){const q=await A.json();i(q);return}}i(null),l(null),u(null),P.remove("token"),P.remove("userId"),P.remove("userUIN")}}}catch(T){console.error("Silent token refresh failed:",T)}},E=async(T,M={})=>{const L={...M,method:M.method||"GET",headers:{...M.headers,Authorization:`Bearer ${o}`,SameSite:"Strict"}};let I=await fetch(T,L),N=await I.text(),D={};try{D=N?JSON.parse(N):{}}catch{D={}}if(D.error==="Invalid or expired token"){await b();const A=sessionStorage.getItem("token");I=await fetch(T,{...L,headers:{...L.headers,Authorization:`Bearer ${A}`}}),N=await I.text();try{D=N?JSON.parse(N):{}}catch{D={}}}return D};c.useEffect(()=>{if(o&&a)return y.current&&clearInterval(y.current),y.current=setInterval(()=>{b()},55*60*1e3),()=>{y.current&&clearInterval(y.current)}},[o,a]),c.useEffect(()=>{x()},[]);const S={currentUser:a,token:o,loading:m,error:g,isAuthenticated:!!a,autoAuthenticate:x,authFetch:E,logout:()=>{i(null),l(null),P.remove("token"),P.remove("userId"),P.remove("userUIN"),window.location.href="https://rsjobhub.com/logout.php"}};return e.jsx(As.Provider,{value:S,children:m?e.jsx("div",{className:"mt-[2rem] flex items-center justify-center w-full spinner-container",children:e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}})}):s})};function Y(){return c.useContext(As)}function Os(s){return z({attr:{version:"1.1",viewBox:"0 0 17 17"},child:[{tag:"g",attr:{},child:[]},{tag:"path",attr:{d:"M6 8h-6v-6h1v4.109c1.013-3.193 4.036-5.484 7.5-5.484 3.506 0 6.621 2.36 7.574 5.739l-0.963 0.271c-0.832-2.95-3.551-5.011-6.611-5.011-3.226 0.001-6.016 2.276-6.708 5.376h4.208v1zM11 9v1h4.208c-0.693 3.101-3.479 5.375-6.708 5.375-3.062 0-5.78-2.061-6.611-5.011l-0.963 0.271c0.952 3.379 4.067 5.739 7.574 5.739 3.459 0 6.475-2.28 7.5-5.482v4.108h1v-6h-6z"},child:[]}]})(s)}function Us(s){return z({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"},child:[]}]})(s)}function We(s){return z({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"},child:[]}]})(s)}function yt(s){return z({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M64 144a48 48 0 1 0 0-96 48 48 0 1 0 0 96zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L192 64zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zM64 464a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm48-208a48 48 0 1 0 -96 0 48 48 0 1 0 96 0z"},child:[]}]})(s)}function ls(s){return z({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152L0 424c0 48.6 39.4 88 88 88l272 0c48.6 0 88-39.4 88-88l0-112c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 112c0 22.1-17.9 40-40 40L88 464c-22.1 0-40-17.9-40-40l0-272c0-22.1 17.9-40 40-40l112 0c13.3 0 24-10.7 24-24s-10.7-24-24-24L88 64z"},child:[]}]})(s)}const re=({children:s})=>e.jsx("div",{className:"forum-container",children:s});function Ps(s){return z({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"},child:[]}]})(s)}function ge(s){return z({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.707 3.293a1 1 0 010 1.414L5.414 7H11a7 7 0 017 7v2a1 1 0 11-2 0v-2a5 5 0 00-5-5H5.414l2.293 2.293a1 1 0 11-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"},child:[]}]})(s)}function be(s){return z({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 15.0006L7.75732 10.758L9.17154 9.34375L12 12.1722L14.8284 9.34375L16.2426 10.758L12 15.0006Z"},child:[]}]})(s)}function vs(s){return z({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 11H11V17H9V11ZM13 11H15V17H13V11ZM9 4V6H15V4H9Z"},child:[]}]})(s)}function Ie(s){return z({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16 14h.5c.827 0 1.5-.673 1.5-1.5v-9c0-.827-.673-1.5-1.5-1.5h-13C2.673 2 2 2.673 2 3.5V18l5.333-4H16zm-9.333-2L4 14V4h12v8H6.667z"},child:[]},{tag:"path",attr:{d:"M20.5 8H20v6.001c0 1.1-.893 1.993-1.99 1.999H8v.5c0 .827.673 1.5 1.5 1.5h7.167L22 22V9.5c0-.827-.673-1.5-1.5-1.5z"},child:[]}]})(s)}function bt(s){return z({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(s)}function Bs(s){return z({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 8h-5.612l1.123-3.367c.202-.608.1-1.282-.275-1.802S14.253 2 13.612 2H12c-.297 0-.578.132-.769.36L6.531 8H4c-1.103 0-2 .897-2 2v9c0 1.103.897 2 2 2h13.307a2.01 2.01 0 0 0 1.873-1.298l2.757-7.351A1 1 0 0 0 22 12v-2c0-1.103-.897-2-2-2zM4 10h2v9H4v-9zm16 1.819L17.307 19H8V9.362L12.468 4h1.146l-1.562 4.683A.998.998 0 0 0 13 10h7v1.819z"},child:[]}]})(s)}function zs(s){return z({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2C6.486 2 2 5.589 2 10c0 2.908 1.898 5.516 5 6.934V22l5.34-4.005C17.697 17.852 22 14.32 22 10c0-4.411-4.486-8-10-8zm0 14h-.333L9 18v-2.417l-.641-.247C5.67 14.301 4 12.256 4 10c0-3.309 3.589-6 8-6s8 2.691 8 6-3.589 6-8 6z"},child:[]}]})(s)}function Nt(s){return z({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"},child:[]},{tag:"circle",attr:{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor"},child:[]}]})(s)}function ms(s){return z({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19"},child:[]},{tag:"path",attr:{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z"},child:[]},{tag:"circle",attr:{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor"},child:[]}]})(s)}function wt(s){return z({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"},child:[]}]})(s)}function ys(s){return z({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m14.06 9.02.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83a.996.996 0 0 0 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"},child:[]}]})(s)}function Ct(s){return z({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M4 11.29l1-1v1.42l-1.15 1.14L3 12.5V10H1.5L1 9.5v-8l.5-.5h12l.5.5V6h-1V2H2v7h1.5l.5.5v1.79zM10.29 13l1.86 1.85.85-.35V13h1.5l.5-.5v-5l-.5-.5h-8l-.5.5v5l.5.5h3.79zm.21-1H7V8h7v4h-1.5l-.5.5v.79l-1.15-1.14-.35-.15z"},child:[]}]})(s)}function kt(s){return z({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.75409 10.082H9.71709C9.62501 10.6077 9.34889 11.0835 8.93813 11.4243C8.52737 11.7651 8.00876 11.9486 7.47509 11.942C7.14645 11.9529 6.81979 11.8872 6.52093 11.7501C6.22207 11.613 5.95919 11.4082 5.75309 11.152C5.29076 10.5433 5.05937 9.79032 5.10009 9.02702C5.06003 7.97574 5.37727 6.9419 6.00009 6.09402C6.27187 5.72239 6.62957 5.42205 7.04262 5.21866C7.45567 5.01527 7.91181 4.91487 8.37209 4.92602C8.72661 4.92177 9.07449 5.02231 9.37209 5.21502C9.64413 5.37906 9.84577 5.63806 9.93809 5.94202H9.96909C9.98009 5.79602 10.0051 5.49602 10.0471 5.04202H11.0241C10.7788 7.91202 10.6564 9.37302 10.6571 9.42502C10.6571 10.503 10.9668 11.042 11.5861 11.042C11.8803 11.0305 12.1658 10.9394 12.4124 10.7785C12.6589 10.6175 12.8572 10.3927 12.9861 10.128C13.3864 9.40541 13.5795 8.58634 13.5441 7.76102C13.5693 7.11522 13.4624 6.47108 13.2299 5.86804C12.9974 5.26501 12.6443 4.71579 12.1921 4.25402C11.6889 3.78464 11.0957 3.4222 10.4483 3.18861C9.80104 2.95502 9.11309 2.85515 8.42609 2.89502C7.70766 2.87569 6.99344 3.01075 6.33168 3.29109C5.66991 3.57142 5.07601 3.9905 4.59009 4.52002C3.57231 5.62318 3.02829 7.08181 3.07509 8.58202C3.04367 9.29097 3.15514 9.999 3.40286 10.664C3.65059 11.329 4.02951 11.9374 4.51709 12.453C5.0285 12.9532 5.63778 13.3422 6.30668 13.5957C6.97558 13.8491 7.68965 13.9616 8.40409 13.926C9.53781 13.9572 10.6645 13.7384 11.7041 13.285V14.254C10.6292 14.671 9.48146 14.8675 8.32909 14.832C7.48919 14.8696 6.65036 14.7371 5.86297 14.4424C5.07558 14.1477 4.35588 13.6969 3.74709 13.117C3.16356 12.5291 2.70767 11.827 2.40793 11.0547C2.10818 10.2825 1.97104 9.4567 2.00509 8.62902C1.97746 7.75691 2.12461 6.88808 2.43786 6.07369C2.75111 5.2593 3.22414 4.51582 3.82909 3.88702C4.43161 3.26559 5.15744 2.77704 5.95997 2.45275C6.7625 2.12847 7.62398 1.97562 8.48909 2.00402C10.1038 1.94632 11.679 2.51124 12.8891 3.58202C13.4621 4.10066 13.9148 4.73836 14.2154 5.45041C14.5159 6.16246 14.6572 6.93164 14.6291 7.70402C14.6758 8.79297 14.3546 9.86595 13.7171 10.75C13.4673 11.1142 13.1334 11.4127 12.7436 11.6203C12.3538 11.8278 11.9197 11.9382 11.4781 11.942C10.3348 11.942 9.76009 11.322 9.75409 10.082ZM8.35409 5.83202C8.03474 5.83297 7.72139 5.91886 7.44619 6.08089C7.17099 6.24292 6.94386 6.47524 6.78809 6.75402C6.36861 7.44196 6.16001 8.23777 6.18809 9.04302C6.15844 9.55812 6.29899 10.0687 6.58809 10.496C6.71024 10.6656 6.8721 10.8027 7.05951 10.8953C7.24692 10.9879 7.45415 11.0331 7.66309 11.027C7.9833 11.0251 8.29661 10.9338 8.56778 10.7635C8.83896 10.5932 9.05724 10.3506 9.19809 10.063C9.61196 9.27571 9.80936 8.39262 9.77009 7.50402C9.77009 6.39002 9.29875 5.83269 8.35609 5.83202H8.35409Z"},child:[]}]})(s)}const St=({location:s,navigate:n,handleLogoClick:t,homePage:r,isDiscussionPage:a,isTagsPage:i,isProfilePage:o,profilePageRoute:l,onStartDiscussion:d,discussionOwnerId:u,userId:m,onStartDiscussionReply:f,onStartRenameDiscussion:g,deleteDiscussion:w})=>{const{currentUser:y,logout:_}=Y(),[k,C]=c.useState(!1),[p,x]=c.useState(!1),[b,E]=c.useState("all-discussions"),v=c.useRef(null),S=c.useRef(null),T=c.useRef(null),M=c.useRef(null),L=D=>{E(D)},I=()=>{C(!k),p&&x(!1)},N=()=>{x(!p),k&&C(!1)};return c.useEffect(()=>{const D=A=>{k&&v.current&&!v.current.contains(A.target)&&S.current&&!S.current.contains(A.target)&&C(!1),p&&T.current&&!T.current.contains(A.target)&&M.current&&!M.current.contains(A.target)&&x(!1)};return document.addEventListener("mousedown",D),k||p?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.removeEventListener("mousedown",D),document.body.style.overflow=""}},[k,p]),e.jsx("nav",{className:"mobile-nav",children:e.jsx(re,{children:e.jsx("div",{className:"max-w-[1280px] my-0 mx-auto",children:e.jsx("div",{className:"flex h-[4rem] items-center justify-between",children:e.jsxs("div",{className:"relative w-full",children:[e.jsxs("nav",{className:"mobile-navbar",children:[r?e.jsx("button",{className:"menu-button",onClick:I,"aria-label":"Toggle menu",ref:S,children:e.jsx(Ps,{className:"menuIcon"})}):e.jsx(O,{className:"flex items-center gap-1 logo-link",onClick:t,children:e.jsx("div",{className:"back-to-home-wrapper",children:e.jsx(We,{className:"back-to-home"})})}),r&&e.jsxs("div",{className:"navbar-title",onClick:N,ref:M,children:[e.jsx("span",{children:"All Discussions"}),e.jsx(be,{className:"navbar-title-caret"})]}),i&&e.jsxs("div",{className:"navbar-title",onClick:N,ref:M,children:[e.jsx("span",{children:"Tags"}),e.jsx(be,{className:"navbar-title-caret"})]}),o&&e.jsx(e.Fragment,{children:l==="posts"?e.jsxs("div",{className:"navbar-title",onClick:N,ref:M,children:[e.jsx("span",{children:"Posts"}),e.jsx(be,{className:"navbar-title-caret"})]}):null}),o&&e.jsx(e.Fragment,{children:l==="discussions"?e.jsxs("div",{className:"navbar-title",onClick:N,ref:M,children:[e.jsx("span",{children:"Discussions"}),e.jsx(be,{className:"navbar-title-caret"})]}):null}),o&&e.jsx(e.Fragment,{children:l==="likes"?e.jsxs("div",{className:"navbar-title",onClick:N,ref:M,children:[e.jsx("span",{children:"Likes"}),e.jsx(be,{className:"navbar-title-caret"})]}):null}),o&&e.jsx(e.Fragment,{children:l==="mentions"?e.jsxs("div",{className:"navbar-title",onClick:N,ref:M,children:[e.jsx("span",{children:"Mentions"}),e.jsx(be,{className:"navbar-title-caret"})]}):null}),r&&e.jsx("button",{className:"compose-button","aria-label":"Compose new discussion",onClick:d,children:e.jsx(ls,{className:"compose-button-icon"})}),a&&e.jsx("button",{className:"flex items-center gap-1 logo-link",onClick:N,ref:M,children:e.jsx("div",{className:"back-to-home-wrapper",children:e.jsx(wt,{className:"back-to-home"})})}),i&&e.jsx("button",{className:"compose-button","aria-label":"Compose new discussion",onClick:d,children:e.jsx(ls,{className:"compose-button-icon"})}),o&&e.jsx("button",{className:"invisible compose-button",children:e.jsx(ls,{className:"compose-button-icon"})})]}),e.jsx("div",{className:`overlay ${k||p?"active":""}`,onClick:()=>{C(!1),x(!1)}}),e.jsxs("div",{className:`slide-menu ${k?"open":""}`,ref:v,children:[e.jsx(O,{to:"https://rsjobhub.com/candidate-dashboard",children:e.jsxs("div",{className:"flex items-center gap-2 menu-header logo-link",children:[e.jsx("div",{className:"back-to-home-wrapper",children:e.jsx(We,{className:"back-to-home"})}),e.jsx("h2",{className:"menu-title",onClick:t,children:"back to dashboard"})]})}),e.jsx("div",{className:"px-[1rem] sm:px-[.8rem]",children:e.jsxs("div",{className:"relative menu-items",children:[e.jsxs(O,{to:`/user/${y.id}`,className:"menu-item",children:[e.jsx("span",{children:"Profile"}),e.jsx("span",{children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#071d2980",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-user",children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})})]}),e.jsxs(O,{onClick:()=>_(),className:"menu-item mobile-logout",children:[e.jsx("span",{children:"Logout"}),e.jsx("span",{children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#d62323",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-log-out",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]})})]})]})})]}),r&&e.jsxs("div",{className:`dropdown-menu ${p?"open":""}`,ref:T,children:[e.jsxs(O,{to:"/",className:`dropdown-item ${s.pathname==="/"?"active":""}`,onClick:()=>{L("all-discussions"),x(!1)},children:[e.jsx("div",{className:"dropdown-icon",children:e.jsx(Ie,{})}),e.jsx("span",{children:"All Discussions"})]}),e.jsxs(O,{to:"/tags",className:`dropdown-item ${s.pathname.startsWith("/tags")?"active":""}`,onClick:()=>{L("tags"),x(!1)},children:[e.jsx("div",{className:"dropdown-icon",children:e.jsx(ms,{})}),e.jsx("span",{children:"Tags"})]})]}),i&&e.jsxs("div",{className:`dropdown-menu ${p?"open":""}`,ref:T,children:[e.jsxs(O,{to:"/",className:`dropdown-item ${s.pathname==="/"?"active":""}`,onClick:()=>{L("all-discussions"),x(!1)},children:[e.jsx("div",{className:"dropdown-icon",children:e.jsx(Ie,{})}),e.jsx("span",{children:"All Discussions"})]}),e.jsxs(O,{to:"/tags",className:`dropdown-item ${s.pathname.startsWith("/tags")?"active":""}`,onClick:()=>{L("tags"),x(!1)},children:[e.jsx("div",{className:"dropdown-icon",children:e.jsx(ms,{})}),e.jsx("span",{children:"Tags"})]})]}),o&&e.jsxs("div",{className:`dropdown-menu ${p?"open":""}`,ref:T,children:[e.jsxs(O,{to:`/user/${m}`,className:`dropdown-item ${l==="posts"?"active":""}`,onClick:()=>{x(!1)},children:[e.jsx("div",{className:"dropdown-icon",children:e.jsx(Ie,{})}),e.jsx("span",{children:"Posts"})]}),e.jsxs(O,{to:`/user/${m}/discussions`,className:`dropdown-item ${l==="discussions"?"active":""}`,onClick:()=>{L("tags"),x(!1)},children:[e.jsx("div",{className:"dropdown-icon",children:e.jsx(yt,{})}),e.jsx("span",{children:"Discussions"})]}),e.jsxs(O,{to:`/user/${m}/likes`,className:`dropdown-item ${l==="likes"?"active":""}`,onClick:()=>{L("tags"),x(!1)},children:[e.jsx("div",{className:"dropdown-icon",children:e.jsx(Bs,{})}),e.jsx("span",{children:"Likes"})]}),e.jsxs(O,{to:`/user/${m}/mentions`,className:`dropdown-item ${l==="mentions"?"active":""}`,onClick:()=>{L("tags"),x(!1)},children:[e.jsx("div",{className:"dropdown-icon",children:e.jsx(kt,{})}),e.jsx("span",{children:"Mentions"})]})]}),a&&e.jsxs("div",{className:`dropdown-menu ${p?"open":""}`,ref:T,children:[e.jsxs(O,{onClick:f,className:"dropdown-item",children:[" ",e.jsx("div",{className:"dropdown-icon",children:e.jsx(ge,{})}),e.jsx("span",{children:"Reply"})]}),y.id===u?e.jsxs(e.Fragment,{children:[e.jsxs(O,{onClick:g,className:"dropdown-item",children:[" ",e.jsx("div",{className:"dropdown-icon",children:e.jsx(ys,{})}),e.jsx("span",{children:"Rename"})]}),e.jsxs("button",{onClick:w,className:"dropdown-item w-full",children:[" ",e.jsx("div",{className:"dropdown-icon",children:e.jsx(vs,{})}),e.jsx("span",{children:"Delete"})]})]}):null]})]})})})})})};function ke(s){return z({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"},child:[]}]})(s)}const Se="/assets/defaultProfile-HGQlLIvo.png",pe=({openDiscussionSidebarMenu:s,closeDiscussionSidebarMenu:n,isDiscussionSidebarMenuActive:t,profilePageRoute:r,onStartDiscussion:a,discussionOwnerId:i,userId:o,onStartDiscussionReply:l,onStartRenameDiscussion:d,deleteDiscussion:u})=>{const{currentUser:m,logout:f}=Y(),[g,w]=c.useState(!1),y=c.useRef(null),_=c.useRef(null),k=te(),C=ae(),[p,x]=c.useState(null),[b,E]=c.useState(null),[v,S]=c.useState(null),[T,M]=c.useState(null),[L,I]=c.useState(null),[N,D]=c.useState(null);c.useEffect(()=>{x(!1),E(!1),S(!1),M(!1),I(!1),D(!1),C.pathname==="/"?(x(!0),S(!0)):C.pathname.startsWith("/d")?(M(!0),E(!0)):C.pathname.startsWith("/tags")?(I(!0),E(!0)):(C.pathname.startsWith("/user")&&D(!0),E(!0))},[C.pathname]);const A=B=>{B.preventDefault(),C.pathname==="/"?k("https://rsjobhub.com/candidate-dashboard"):k("/")},q=B=>{_.current&&!_.current.contains(B.target)&&y.current&&!y.current.contains(B.target)&&g&&w(!1)};c.useEffect(()=>(document.addEventListener("mousedown",q),()=>{document.removeEventListener("mousedown",q)}),[g]);const ee=()=>{w(!g)};return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:"fixed-nav desktop-nav",children:e.jsxs(re,{children:[e.jsx("div",{className:"max-w-[1280px] my-0 mx-auto",children:e.jsxs("div",{className:"flex h-[4rem] items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[p&&e.jsxs(O,{to:"https://rsjobhub.com/candidate-dashboard",className:"flex items-center gap-1 logo-link",children:[e.jsx("div",{className:"back-to-home-wrapper",children:e.jsx(We,{className:"back-to-home"})}),"back to dashboard"]}),b&&e.jsx(O,{className:"flex items-center gap-1 logo-link",onClick:A,children:e.jsx("div",{className:"back-to-home-wrapper",children:e.jsx(We,{className:"back-to-home"})})}),t?e.jsx(e.Fragment,{children:T&&e.jsx("button",{className:"discussionSidebarToggle",onClick:n,children:e.jsx(ke,{className:"discussionSidebarToggleIcon"})})}):e.jsx(e.Fragment,{children:T&&e.jsx("button",{className:"discussionSidebarToggle",onClick:s,children:e.jsx(Ps,{className:"discussionSidebarToggleIcon"})})})]}),e.jsxs("div",{className:"flex items-center",children:[m.passport!==""?e.jsx("div",{className:"userProfileImage w-[35px] h-[35px] rounded-[5rem] overflow-auto mr-[1rem]",children:e.jsx("img",{src:`https://rsjobhub.com/${m.passport}`,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}):e.jsx("div",{className:"userProfileImage w-[35px] h-[35px] rounded-[5rem] overflow-auto mr-[1rem]",children:e.jsx("img",{src:Se,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}),e.jsxs("button",{className:`userProfileName ${g?"focus":""} flex items-center gap-[.5rem]`,onClick:ee,ref:y,children:[e.jsx("p",{children:m.first_name})," ",g?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#000000",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-up",children:e.jsx("path",{d:"m18 15-6-6-6 6"})}):e.jsx("span",{className:"userProfileChevron",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#000000",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-down",children:e.jsx("path",{d:"m6 9 6 6 6-6"})})})]})]})]})}),e.jsx("div",{className:`absolute profile-drop-box ${g?"visible":""}`,ref:_,children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsxs(O,{to:`/user/${m.id}`,children:[" ",e.jsxs("span",{className:"flex items-center gap-3",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#000000",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-user",children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),e.jsx("p",{children:"Profile"})]})]})}),e.jsx("li",{children:e.jsxs(O,{onClick:()=>f(),children:[" ",e.jsxs("span",{className:"flex items-center gap-3",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#d62323",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-log-out",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]}),e.jsx("p",{style:{color:"#d62323"},children:"Logout"})," "]})]})})]})})]})}),e.jsx(St,{location:C,navigate:k,handleLogoClick:A,homePage:v,isDiscussionPage:T,isTagsPage:L,isProfilePage:N,profilePageRoute:r,onStartDiscussion:a,discussionOwnerId:i,userId:o,onStartDiscussionReply:l,onStartRenameDiscussion:d,deleteDiscussion:u})]})},bs=({onAllDiscussionsClick:s,currentPath:n,onStartDiscussion:t})=>{const[r,a]=c.useState(null),i=o=>{a(o)};return c.useEffect(()=>{if(n==="/")i("all-discussions");else if(n==="/tags")i("tags");else return},[n]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"sidebar",children:e.jsxs("div",{className:"sidebar-content",children:[e.jsx("button",{className:"start-discussion-button",onClick:t,children:"Start a Discussion"}),e.jsx("nav",{className:"mt-2 sidebar-nav",children:e.jsxs("ul",{className:"nav-list",children:[e.jsx("li",{className:"nav-item",children:e.jsxs(O,{to:"/",className:`nav-link ${r==="all-discussions"?"active":""}`,onClick:()=>{i("all-discussions"),s()},children:[e.jsxs("div",{className:"nav-icon",children:[e.jsx(Ie,{})," "]}),e.jsx("span",{children:"All Discussions"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(O,{to:"/tags",className:`nav-link ${r==="tags"?"active":""}`,onClick:()=>i("tags"),children:[e.jsxs("div",{className:"nav-icon",children:[e.jsx(ms,{})," "]}),e.jsx("span",{children:"Tags"})]})})]})})]})})})},xe=({loadMoreDiscussions:s,isLoading:n})=>e.jsx("button",{className:"load-more-button",onClick:s,disabled:n,children:"load more"}),Et=864e5,Dt=6e4,_t=36e5,_s=Symbol.for("constructDateFrom");function Hs(s,n){return typeof s=="function"?s(n):s&&typeof s=="object"&&_s in s?s[_s](n):s instanceof Date?new s.constructor(n):new Date(n)}function ie(s,n){return Hs(s,s)}function Ts(s){const n=ie(s),t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),+s-+t}function je(s,...n){const t=Hs.bind(null,n.find(r=>typeof r=="object"));return n.map(t)}function Ms(s,n){const t=ie(s);return t.setHours(0,0,0,0),t}function Tt(s,n,t){const[r,a]=je(t==null?void 0:t.in,s,n),i=Ms(r),o=Ms(a),l=+i-Ts(i),d=+o-Ts(o);return Math.round((l-d)/Et)}function $e(s,n){const t=+ie(s)-+ie(n);return t<0?-1:t>0?1:t}function Mt(s,n,t){const[r,a]=je(t==null?void 0:t.in,s,n),i=r.getFullYear()-a.getFullYear(),o=r.getMonth()-a.getMonth();return i*12+o}function Rt(s,n,t){const[r,a]=je(t==null?void 0:t.in,s,n);return r.getFullYear()-a.getFullYear()}function qs(s,n,t){const[r,a]=je(t==null?void 0:t.in,s,n),i=Rs(r,a),o=Math.abs(Tt(r,a));r.setDate(r.getDate()-i*o);const l=+(Rs(r,a)===-i),d=i*(o-l);return d===0?0:d}function Rs(s,n){const t=s.getFullYear()-n.getFullYear()||s.getMonth()-n.getMonth()||s.getDate()-n.getDate()||s.getHours()-n.getHours()||s.getMinutes()-n.getMinutes()||s.getSeconds()-n.getSeconds()||s.getMilliseconds()-n.getMilliseconds();return t<0?-1:t>0?1:t}function Ve(s){return n=>{const r=(s?Math[s]:Math.trunc)(n);return r===0?0:r}}function Lt(s,n,t){const[r,a]=je(t==null?void 0:t.in,s,n),i=(+r-+a)/_t;return Ve(t==null?void 0:t.roundingMethod)(i)}function Ws(s,n){return+ie(s)-+ie(n)}function Ft(s,n,t){const r=Ws(s,n)/Dt;return Ve(t==null?void 0:t.roundingMethod)(r)}function It(s,n){const t=ie(s);return t.setHours(23,59,59,999),t}function $t(s,n){const t=ie(s),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function At(s,n){const t=ie(s);return+It(t)==+$t(t)}function Ot(s,n,t){const[r,a,i]=je(t==null?void 0:t.in,s,s,n),o=$e(a,i),l=Math.abs(Mt(a,i));if(l<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-o*l);let d=$e(a,i)===-o;At(r)&&l===1&&$e(r,i)===1&&(d=!1);const u=o*(l-+d);return u===0?0:u}function Ut(s,n,t){const r=Ws(s,n)/1e3;return Ve(t==null?void 0:t.roundingMethod)(r)}function Pt(s,n,t){const r=qs(s,n,t)/7;return Ve(t==null?void 0:t.roundingMethod)(r)}function Bt(s,n,t){const[r,a]=je(t==null?void 0:t.in,s,n),i=$e(r,a),o=Math.abs(Rt(r,a));r.setFullYear(1584),a.setFullYear(1584);const l=$e(r,a)===-i,d=i*(o-+l);return d===0?0:d}function Ce({createdAt:s}){const[n,t]=c.useState("");return c.useEffect(()=>{if(s){const r=()=>{try{const i=new Date(s),o=new Date,l=Ut(o,i),d=Ft(o,i),u=Lt(o,i),m=qs(o,i),f=Pt(o,i),g=Ot(o,i),w=Bt(o,i);l<60?t("few seconds ago"):d<2?t("1 minute ago"):d<60?t(`${d} minutes ago`):u<2?t("an hour ago"):u<24?t(`${u} hours ago`):m<2?t("1 day ago"):m<7?t(`${m} days ago`):f<2?t("a week ago"):f<4?t(`${f} weeks ago`):g<2?t("a month ago"):g<12?t(`${g} months ago`):w<2?t("a year ago"):t(`${w} years ago`)}catch(i){console.error("Error parsing date:",i),t("Invalid date")}};r();const a=setInterval(r,1e3);return()=>clearInterval(a)}else t(" ")},[s]),`${n}`}const Ns=s=>s>=1e3?(s/1e3).toFixed(1)+"K":s,ws=({discussion:s,handleMarkAsRead:n})=>e.jsx(O,{to:`/d/${s.id}`,onClick:()=>n(s.id),children:e.jsxs("li",{className:`discussion-item ${s.is_read?"":"unread"}`,children:[s.author.passport!==""?e.jsx("div",{className:"userProfileImage w-[32px] h-[32px] sm:w-[35px] sm:h-[35px] rounded-[5rem] overflow-auto mr-[8px] sm:mr-[1rem]",children:e.jsx("img",{src:`https://rsjobhub.com/${s.author.passport}`,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}):e.jsx("div",{className:"userProfileImage w-[32px] h-[32px] sm:w-[35px] sm:h-[35px] rounded-[5rem] overflow-auto mr-[8px] sm:mr-[1rem]",children:e.jsx("img",{src:Se,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}),e.jsxs("div",{className:"discussion-content",children:[e.jsx("h3",{className:"discussion-title",children:s.title}),e.jsxs("div",{className:"discussion-meta",children:[e.jsx("span",{className:"discussion-tag",children:s.tag}),s.comments_count>1&&s.last_commented_by!==null?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"reply-icon",children:e.jsx(ge,{})}),e.jsx("span",{className:"replied-by",children:s.last_commented_by}),e.jsxs("span",{className:"flex gap-1 replied-time",children:[e.jsx("span",{children:"replied"}),e.jsx(Ce,{createdAt:s.last_commented_at})]})]}):e.jsx("div",{children:e.jsxs("span",{className:"flex gap-1 replied-time",children:[e.jsx("span",{children:"started"}),e.jsx(Ce,{createdAt:s.created_at})]})})]})]}),e.jsx("div",{className:"discussion-info",children:e.jsxs("div",{className:"comment-count",children:[e.jsx(zs,{className:"comment-count-icon"}),e.jsx("span",{children:Ns(s.comments_count)})]})})]})});var zt=pt();const Ke=dt(zt),H="https://forumapi.rsjobhub.com/api",Vs=async s=>{try{const n=await s(`${H}/posts`);if(n)return n;console.log(n)}catch(n){throw console.error("Error fetching discussion:",n),n}},hs=async(s,n,t)=>{try{return await s(`${H}/posts/${n}/${t}`)}catch(r){throw console.error("Error fetching discussion:",r),r}},Ks=async s=>{try{return await s(`${H}/tags`)}catch(n){throw console.error("Error fetching tags:",n),n}},Ht=async(s,n)=>{try{return await s(`${H}/posts/${n}`)}catch(t){throw console.error("Error fetching tag:",t),t}},qt=async(s,n)=>{const t=parseInt(n);try{return await s(`${H}/user/${t}`)}catch(r){throw console.error("Error fetching user:",r),r}},Wt=async(s,n)=>{const t=parseInt(n);try{return await s(`${H}/user/posts/${t}`)}catch(r){throw console.error("Error fetching user discussions:",r),r}},Vt=async(s,n)=>{const t=parseInt(n);try{return await s(`${H}/user/comments/${t}`)}catch(r){throw console.error("Error fetching user comments:",r),r}},xs=async(s,n)=>{const t=parseInt(n);try{return await s(`${H}/user/likes/${t}`)}catch(r){throw console.error("Error fetching user comments:",r),r}},Kt=async(s,n)=>{try{return await s(`${H}/posts/add`,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}})}catch(t){throw console.error("Error submitting discussion:",t),t}},Qt=async(s,n)=>{try{return await s(`${H}/comment/add`,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}})}catch(t){throw console.error("Error submitting discussion:",t),t}},Gt=async(s,n)=>{try{return await s(`${H}/comment/reply`,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}})}catch(t){throw console.error("Error submitting discussion:",t),t}},Yt=async(s,n)=>{try{return await s(`${H}/post/update`,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}})}catch(t){throw console.error("Error submitting discussion:",t),t}},Jt=async(s,n)=>{try{return await s(`${H}/comment/update`,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}})}catch(t){throw console.error("Error submitting discussion:",t),t}},Zt=async(s,n)=>{try{return await s(`${H}/post/delete/${n}`,{method:"DELETE"})}catch(t){throw console.error("Error deleting comment:",t),t}},Qs=async(s,n)=>{try{return await s(`${H}/comment/delete/${n}`,{method:"DELETE"})}catch(t){throw console.error("Error deleting comment:",t),t}},Gs=async(s,n)=>{try{return await s(`${H}/comment/like`,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}})}catch(t){throw console.error("Error submitting discussion:",t),t}},Ys=async(s,n)=>{try{return await s(`${H}/comment/unlike`,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}})}catch(t){throw console.error("Error submitting discussion:",t),t}},Qe=async(s,n)=>{try{return await s(`${H}/post/read`,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}})}catch(t){throw console.error("Error submitting discussion:",t),t}},Js=async(s,n)=>{try{return await s(`${H}/post/read/all`,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}})}catch(t){throw console.error("Error submitting discussion:",t),t}};function ps(){return ps=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},ps.apply(null,arguments)}function Zs(s,n){if(s==null)return{};var t={};for(var r in s)if({}.hasOwnProperty.call(s,r)){if(n.indexOf(r)!==-1)continue;t[r]=s[r]}return t}function fs(s,n){return fs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},fs(s,n)}function Xs(s,n){s.prototype=Object.create(n.prototype),s.prototype.constructor=s,fs(s,n)}function Xt(s,n){return s.classList?!!n&&s.classList.contains(n):(" "+(s.className.baseVal||s.className)+" ").indexOf(" "+n+" ")!==-1}function en(s,n){s.classList?s.classList.add(n):Xt(s,n)||(typeof s.className=="string"?s.className=s.className+" "+n:s.setAttribute("class",(s.className&&s.className.baseVal||"")+" "+n))}function Ls(s,n){return s.replace(new RegExp("(^|\\s)"+n+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function sn(s,n){s.classList?s.classList.remove(n):typeof s.className=="string"?s.className=Ls(s.className,n):s.setAttribute("class",Ls(s.className&&s.className.baseVal||"",n))}const Fs={disabled:!1},et=G.createContext(null);var st=function(n){return n.scrollTop},Fe="unmounted",me="exited",he="entering",we="entered",gs="exiting",oe=function(s){Xs(n,s);function n(r,a){var i;i=s.call(this,r,a)||this;var o=a,l=o&&!o.isMounting?r.enter:r.appear,d;return i.appearStatus=null,r.in?l?(d=me,i.appearStatus=he):d=we:r.unmountOnExit||r.mountOnEnter?d=Fe:d=me,i.state={status:d},i.nextCallback=null,i}n.getDerivedStateFromProps=function(a,i){var o=a.in;return o&&i.status===Fe?{status:me}:null};var t=n.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(a){var i=null;if(a!==this.props){var o=this.state.status;this.props.in?o!==he&&o!==we&&(i=he):(o===he||o===we)&&(i=gs)}this.updateStatus(!1,i)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var a=this.props.timeout,i,o,l;return i=o=l=a,a!=null&&typeof a!="number"&&(i=a.exit,o=a.enter,l=a.appear!==void 0?a.appear:o),{exit:i,enter:o,appear:l}},t.updateStatus=function(a,i){if(a===void 0&&(a=!1),i!==null)if(this.cancelNextCallback(),i===he){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Pe.findDOMNode(this);o&&st(o)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===me&&this.setState({status:Fe})},t.performEnter=function(a){var i=this,o=this.props.enter,l=this.context?this.context.isMounting:a,d=this.props.nodeRef?[l]:[Pe.findDOMNode(this),l],u=d[0],m=d[1],f=this.getTimeouts(),g=l?f.appear:f.enter;if(!a&&!o||Fs.disabled){this.safeSetState({status:we},function(){i.props.onEntered(u)});return}this.props.onEnter(u,m),this.safeSetState({status:he},function(){i.props.onEntering(u,m),i.onTransitionEnd(g,function(){i.safeSetState({status:we},function(){i.props.onEntered(u,m)})})})},t.performExit=function(){var a=this,i=this.props.exit,o=this.getTimeouts(),l=this.props.nodeRef?void 0:Pe.findDOMNode(this);if(!i||Fs.disabled){this.safeSetState({status:me},function(){a.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:gs},function(){a.props.onExiting(l),a.onTransitionEnd(o.exit,function(){a.safeSetState({status:me},function(){a.props.onExited(l)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(a,i){i=this.setNextCallback(i),this.setState(a,i)},t.setNextCallback=function(a){var i=this,o=!0;return this.nextCallback=function(l){o&&(o=!1,i.nextCallback=null,a(l))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},t.onTransitionEnd=function(a,i){this.setNextCallback(i);var o=this.props.nodeRef?this.props.nodeRef.current:Pe.findDOMNode(this),l=a==null&&!this.props.addEndListener;if(!o||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],u=d[0],m=d[1];this.props.addEndListener(u,m)}a!=null&&setTimeout(this.nextCallback,a)},t.render=function(){var a=this.state.status;if(a===Fe)return null;var i=this.props,o=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var l=Zs(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return G.createElement(et.Provider,{value:null},typeof o=="function"?o(a,l):G.cloneElement(G.Children.only(o),l))},n}(G.Component);oe.contextType=et;oe.propTypes={};function Ne(){}oe.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ne,onEntering:Ne,onEntered:Ne,onExit:Ne,onExiting:Ne,onExited:Ne};oe.UNMOUNTED=Fe;oe.EXITED=me;oe.ENTERING=he;oe.ENTERED=we;oe.EXITING=gs;var tn=function(n,t){return n&&t&&t.split(" ").forEach(function(r){return en(n,r)})},cs=function(n,t){return n&&t&&t.split(" ").forEach(function(r){return sn(n,r)})},se=function(s){Xs(n,s);function n(){for(var r,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=s.call.apply(s,[this].concat(i))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(l,d){var u=r.resolveArguments(l,d),m=u[0],f=u[1];r.removeClasses(m,"exit"),r.addClass(m,f?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(l,d)},r.onEntering=function(l,d){var u=r.resolveArguments(l,d),m=u[0],f=u[1],g=f?"appear":"enter";r.addClass(m,g,"active"),r.props.onEntering&&r.props.onEntering(l,d)},r.onEntered=function(l,d){var u=r.resolveArguments(l,d),m=u[0],f=u[1],g=f?"appear":"enter";r.removeClasses(m,g),r.addClass(m,g,"done"),r.props.onEntered&&r.props.onEntered(l,d)},r.onExit=function(l){var d=r.resolveArguments(l),u=d[0];r.removeClasses(u,"appear"),r.removeClasses(u,"enter"),r.addClass(u,"exit","base"),r.props.onExit&&r.props.onExit(l)},r.onExiting=function(l){var d=r.resolveArguments(l),u=d[0];r.addClass(u,"exit","active"),r.props.onExiting&&r.props.onExiting(l)},r.onExited=function(l){var d=r.resolveArguments(l),u=d[0];r.removeClasses(u,"exit"),r.addClass(u,"exit","done"),r.props.onExited&&r.props.onExited(l)},r.resolveArguments=function(l,d){return r.props.nodeRef?[r.props.nodeRef.current,l]:[l,d]},r.getClassNames=function(l){var d=r.props.classNames,u=typeof d=="string",m=u&&d?d+"-":"",f=u?""+m+l:d[l],g=u?f+"-active":d[l+"Active"],w=u?f+"-done":d[l+"Done"];return{baseClassName:f,activeClassName:g,doneClassName:w}},r}var t=n.prototype;return t.addClass=function(a,i,o){var l=this.getClassNames(i)[o+"ClassName"],d=this.getClassNames("enter"),u=d.doneClassName;i==="appear"&&o==="done"&&u&&(l+=" "+u),o==="active"&&a&&st(a),l&&(this.appliedClasses[i][o]=l,tn(a,l))},t.removeClasses=function(a,i){var o=this.appliedClasses[i],l=o.base,d=o.active,u=o.done;this.appliedClasses[i]={},l&&cs(a,l),d&&cs(a,d),u&&cs(a,u)},t.render=function(){var a=this.props;a.classNames;var i=Zs(a,["classNames"]);return G.createElement(oe,ps({},i,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},n}(G.Component);se.defaultProps={classNames:""};se.propTypes={};const Cs=({open:s,onClose:n})=>{var K;const{authFetch:t,currentUser:r}=Y(),[a,i]=c.useState(""),[o,l]=c.useState(""),[d,u]=c.useState(""),[m,f]=c.useState(!1),[g,w]=c.useState(!1),[y,_]=c.useState({}),[k,C]=c.useState(!1),p=c.useRef(null),x=te(),b=fe(),E=c.useRef(null),v=c.useRef(null),{data:S=[],isLoading:T,refetch:M}=de({queryKey:["tags"],queryFn:()=>Ks(t),staleTime:1e3*60*10,enabled:k}),L={toolbar:[[{header:[!1]}],["bold","italic","underline","strike"]]},I=["header","bold","italic","underline","strike"],N=()=>{const F={};a||(F.tag="Select a tag"),o.trim()||(F.title="Discussion title cannot be blank"),o.trim().length<5&&(F.title="Discussion Title must be at least 5 characters"),o.trim().length>100&&(F.title="Discussion Title must not be more than 100 characters");const J=d.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").trim();return(!J||J.length<10)&&(F.body="Discussion content must be at least 10 characters"),J.length>8e3&&(F.body="Discussion content must not exceed 8000 characters"),_(F),Object.keys(F).length===0},D=async F=>{if(F.preventDefault(),!N())return;w(!0);const J=r.id;try{const Z=await Kt(t,{user_id:J,title:o,tag:a,description:d});if(Z.message==="Post saved successfully"){b.invalidateQueries({queryKey:["posts"]}),b.invalidateQueries({queryKey:["tags"]});const ue=`/d/${Z.post.id}`;x(ue)}else console.log(Z)}catch(ne){console.error("Error submitting Disussion:",ne)}finally{w(!1)}},A=()=>{i(""),l(""),u(""),_({}),n&&n()},q=()=>{o||d.replace(/<[^>]*>/g,"").trim()?f(!0):A()},ee=async()=>{C(!0),M()};c.useEffect(()=>{function F(J){p.current&&!p.current.contains(J.target)&&C(!1)}return k&&document.addEventListener("mousedown",F),()=>{document.removeEventListener("mousedown",F)}},[k]),c.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]);const B=()=>{f(!1),A()},V=()=>{f(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(se,{in:m,timeout:250,classNames:"fade-scale",unmountOnExit:!0,nodeRef:v,children:e.jsx("div",{ref:v,className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black bg-opacity-40",children:e.jsxs("div",{className:"w-full max-w-xs p-6 bg-white rounded-[6px] shadow-lg",children:[e.jsx("p",{className:"mb-[2rem] text-[.9rem] text-[--text-primary]",children:"You have unsaved changes. Are you sure you want to close?"}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{className:"px-4 py-2 text-[--text-primary-2] bg-[#071d2916] rounded-[6px] hover:bg-[#071d2920] transition text-[.85rem]",onClick:V,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 text-white bg-red-600 rounded-[6px] hover:bg-red-700 transition text-[.85rem]",onClick:B,children:"Discard"})]})]})})}),e.jsx(se,{in:s,timeout:1e3,classNames:"fade-scale",unmountOnExit:!0,nodeRef:E,children:e.jsx("div",{ref:E,className:"fixed inset-0 z-[1000] flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white shadow-2xl border border-gray-100 w-[100%] h-[100%] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between py-[1rem] px-[1rem] sm:px-[2rem] border-b border-[#f3f4f6] bg-[#f3f4f6]",children:[e.jsx("p",{className:"text-[.85rem]  text-[--primary] font-[550]",children:"Start a Disussion"}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs("div",{className:"flex gap-[1rem]",children:[e.jsx("button",{type:"submit",onClick:D,disabled:g,className:"flex items-center gap-2 px-6 text-white bg-[--primary] transition-all hover:bg-[--primary-hover] rounded-[6px] disabled:opacity-50 disabled:cursor-not-allowed",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.75rem]",children:"Posting..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-[.75rem]",children:"Post Discussion"})})}),e.jsx("button",{type:"button",className:"px-2 py-2 md:py-[.5rem] bg-[#071d2916] text-[1.2rem] rounded-[6px] hover:bg-[#071d2920] text-[--text-primary-2] transition-all",onClick:q,children:e.jsx(ke,{})})]})})]}),e.jsx("div",{className:"flex-1 px-4 py-6 overflow-y-auto sm:p-6",children:e.jsxs("form",{children:[e.jsxs("div",{className:"flex flex-col gap-2 md:gap-3 mt-2 sm:flex-row sm:items-center mb-[.8rem]",children:[e.jsxs("div",{className:"relative",ref:p,children:[e.jsx("div",{className:"w-full md:w-[180px]",children:e.jsx("button",{type:"button",className:`flex justify-start md:justify-center w-full px-3 py-[.5rem] sm:py-[.6rem] text-[.8rem] sm:text-[.9rem] rounded-[6px] border  ${y.tag?"border-red-300":"border-[--text-primary-3]"}`,onClick:ee,children:e.jsx("span",{className:"font-[.8rem] text-[--text-primary-2] capitalize",children:a?((K=S.find(F=>F.name===a))==null?void 0:K.name)||a:"Select tag"})})}),k&&e.jsx("div",{className:"overflow-hidden",children:e.jsx("div",{className:"showTagDropdown absolute left-0 z-10 w-full md:w-[180px] mt-2 overflow-y-auto bg-white border border-[--text-primary-3] overflow-hidden rounded-[6px]  max-h-60",children:T?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsxs("div",{className:"flex items-center justify-center w-full",children:[e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"loading-text"})]})}):S.length>0?S.map(F=>e.jsx("button",{type:"button",className:`w-full text-[.8rem] text-left px-4 py-2 hover:bg-[#071d2907] capitalize ${a===F.name?"text-[--text-primary] bg-[#071d2907]":"text-[--text-primary-2]"}`,onClick:()=>{i(F.name),C(!1)},children:F.name},F.name)):e.jsx("div",{className:"w-full px-4 py-2 text-left text-[--text-primary-2] text-[.8rem]",children:"No tags found."})})}),y.tag?e.jsx("p",{className:"mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:y.tag}):e.jsx("p",{className:"invisible mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:"error msg"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",className:`w-full px-3  sm:px-4 py-[.5rem] sm:py-[.6rem] border rounded-[6px] outline-none text-[.8rem] sm:text-[.9rem] text-[--text-primary] ${y.title?"border-red-300":"border-[--text-primary-3]"}`,placeholder:"Discussion Title",value:o,onChange:F=>l(F.target.value),maxLength:100}),y.title?e.jsx("p",{className:"mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:y.title}):e.jsx("p",{className:"invisible mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:"error msg"})]})]}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:`border rounded-[6px] overflow-hidden ${y.body?"border-red-300":"border-gray-200"}`,children:e.jsx(Ke,{value:d,onChange:u,modules:L,formats:I,placeholder:"Write a post...",style:{backgroundColor:"white"},theme:"snow"})}),y.body?e.jsx("p",{className:"mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:y.body}):e.jsx("p",{className:"invisible mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:"error msg"})]}),e.jsx("div",{className:"block sm:hidden",children:e.jsx("div",{className:"flex justify-end py-3 sm:flex-row sm:items-center mt-[1rem] md:mt-0 mb-[2rem] md:mb-[2rem]",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",className:"px-6 py-2 md:py-3 bg-[#071d2916] rounded-[6px] hover:bg-[#071d2920] text-[.8rem] text-[--text-primary-2] transition-all",onClick:q,children:"Cancel"}),e.jsx("button",{type:"submit",onClick:D,disabled:g,className:"flex items-center gap-2 px-6 text-white bg-[--primary] transition-all hover:bg-[--primary-hover] rounded-[6px] disabled:opacity-50 disabled:cursor-not-allowed",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.8rem]",children:"Posting..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-[.8rem]",children:"Post Discussion"})})})]})})})]})})]})})})]})},nn=()=>{const{authFetch:s,currentUser:n}=Y(),[t,r]=c.useState(20),[a,i]=c.useState(!1),[o,l]=c.useState(1),d=ae(),u=te(),{data:m=[],isLoading:f,isFetching:g,isError:w,refetch:y}=de({queryKey:["posts"],queryFn:()=>Vs(s),staleTime:1e3*60*5,refetchOnWindowFocus:!0}),_=m.slice(0,o*t),k=_.length<m.length,C=()=>{y(),l(1)},p=()=>{k&&l(v=>v+1)},x=async v=>{try{const S={user_id:n.id,post_id:v},T=await Qe(s,S);if(T.message==="Post has been marked as read")return;console.log(T)}catch(S){console.error("Error marking discussions as read:",S)}},b=async()=>{try{const v={user_id:n.id},S=await Js(s,v);S.message==="All posts marked as read"?y():console.log(S)}catch(v){console.error("Error marking all discussions as read:",v)}};function E(){d.pathname==="/"?C():u("/")}return e.jsxs(e.Fragment,{children:[e.jsx(pe,{onStartDiscussion:()=>i(!0)}),e.jsx(re,{children:e.jsxs("div",{className:"forumHomeLayout",children:[e.jsx(bs,{onAllDiscussionsClick:E,currentPath:d.pathname,onStartDiscussion:()=>i(!0)}),f?e.jsxs("div",{className:"flex items-center justify-center w-full spinner-container",children:[e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"loading-text",children:"Loading..."})]}):m.length===0?e.jsx("div",{className:"flex items-center justify-center w-full pt-[10rem] lg:pt-[5rem]",children:e.jsx("span",{className:"text-center loading-text",children:"It's a bit quiet in here! Be the first to Start a Discussion."})}):e.jsxs("div",{className:"forumHomeMainSection",children:[e.jsx("div",{className:"forum-filter-bar",children:e.jsxs("div",{className:"filter-actions",children:[e.jsx("button",{className:`action-button refresh-button ${g?"refreshing":""}`,onClick:C,"aria-label":"Refresh",disabled:g||f,children:e.jsx(Os,{})}),e.jsx("button",{className:"action-button mark-read-button",onClick:b,"aria-label":"Mark all as read",children:e.jsx(Us,{})})]})}),g?e.jsxs("div",{className:"flex items-center justify-center w-full spinner-container",children:[e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"loading-text",children:"Loading..."})]}):e.jsxs("div",{className:"discussions-container",children:[e.jsx("ul",{className:"discussions-list",children:_.map(v=>e.jsx(ws,{discussion:v,handleMarkAsRead:x},v.id))}),k&&e.jsx("div",{className:"load-more-container",children:f?e.jsx("div",{className:"spinner"}):e.jsx(xe,{loadMoreDiscussions:p,isLoading:f})})]})]})]})}),e.jsx(Cs,{open:a,onClose:()=>i(!1)})]})},rn=({displaySidebarMenu:s,onCloseSidebar:n,onSelectDiscussion:t})=>{const{authFetch:r,currentUser:a}=Y(),[i,o]=c.useState(20),{data:l=[],isLoading:d,isFetched:u,refetch:m}=de({queryKey:["allDiscussions"],queryFn:async()=>{const p=await Vs(r);return Array.isArray(p)?p:[]},staleTime:0,refetchOnWindowFocus:!0}),[f,g]=c.useState(1),w=l.slice(0,f*i),y=l.length>w.length,_=()=>{g(p=>p+1)},k=async p=>{try{const x={user_id:a.id,post_id:p},b=await Qe(r,x);if(b.message==="Post has been marked as read")return;console.log(b)}catch(x){console.error("Error marking discussions as read:",x)}},C=p=>{k(p),t&&t(p),n()};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"discussionSidebar-wrapper",children:e.jsx("div",{className:`discussionSideMenu ${s?"open":""} pb-[5rem]`,children:u?e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"p-0 m-0 list-none",children:w.map(p=>e.jsx(O,{to:`/d/${p.id}`,onClick:()=>C(p.id),children:e.jsxs("li",{className:`relative flex items-center transition-[all_.5s_ease] py-[12px] px-[15px] hover:bg-[#071d290a] ${p.is_read?"":"unread"}`,children:[p.author.passport!==""?e.jsx("div",{className:"userProfileImage w-[40px] h-[40px] rounded-[5rem] overflow-auto mr-[10px]",children:e.jsx("img",{src:`https://rsjobhub.com/${p.author.passport}`,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}):e.jsx("div",{className:"userProfileImage w-[40px] h-[40px] rounded-[5rem] overflow-auto mr-[10px]",children:e.jsx("img",{src:Se,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}),e.jsxs("div",{className:"discussion-content",children:[e.jsx("h3",{className:"discussion-title",children:p.title}),e.jsxs("div",{className:"discussion-meta",children:[e.jsx("span",{className:"discussion-tag",children:p.tag}),p.comments_count>1&&p.last_commented_by!==null?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"reply-icon",children:e.jsx(ge,{})}),e.jsx("span",{className:"replied-by",children:p.last_commented_by}),e.jsxs("span",{className:"flex gap-1 replied-time",children:[e.jsx("span",{children:"replied"}),e.jsx(Ce,{createdAt:p.last_commented_at})]})]}):e.jsx("div",{children:e.jsxs("span",{className:"flex gap-1 replied-time",children:[e.jsx("span",{children:"started"}),e.jsx(Ce,{createdAt:p.created_at})]})})]})]}),e.jsx("div",{className:"discussion-info",children:e.jsxs("div",{className:"comment-count",children:[e.jsx(zs,{className:"comment-count-icon"}),e.jsx("span",{children:Ns(p.comments_count)})]})})]})},p.id))}),y&&e.jsx("div",{className:"load-more-container ",children:d?e.jsx(e.Fragment,{children:e.jsx("div",{className:"spinner"})}):e.jsx(xe,{loadMoreDiscussions:_,isLoading:d})})]}):e.jsxs("div",{className:"flex items-center justify-center w-full spinner-container",children:[e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"loading-text",children:"Loading..."})]})})})})},qe=({post:s,isOnline:n,userLikedComments:t=[],highlightedCommentId:r,handleLike:a,handleUnLike:i,onReplyClick:o,onEditClick:l,showMoreMenu:d,toggleMoreMenu:u,handleDeleteComment:m,moreMenuRef:f,onReplyLink:g})=>{const{currentUser:w}=Y(),y=c.useRef(null);c.useEffect(()=>{r===s.id&&y.current&&setTimeout(()=>{y.current.scrollIntoView({behavior:"smooth",block:"center"}),y.current.classList.add("highlighted-comment"),setTimeout(()=>{y.current&&y.current.classList.remove("highlighted-comment")},3e3)},100)},[r,s.id]);const _=t.some(k=>Number(k.user_id)===Number(w.id)&&Number(k.id)===Number(s.id));return e.jsxs("div",{className:"post",ref:y,id:`${s.id}`,children:[e.jsx("div",{children:e.jsx(O,{to:`/user/${s.user_id}`,className:"post-avatar-link",children:e.jsx("div",{className:"relative",children:s.commenter_passport!==""?e.jsx("div",{className:"userProfileImage w-[32px] h-[32px] sm:w-[35px] sm:h-[35px] md:w-[50px] md:h-[50px] rounded-[5rem] overflow-auto mr-[8px] sm:mr-[1rem] shrink-0 flex",children:e.jsx("img",{src:`https://rsjobhub.com/${s.commenter_passport}`,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}):e.jsx("div",{className:"userProfileImage w-[32px] h-[32px] sm:w-[35px] sm:h-[35px] md:w-[50px] md:h-[50px] rounded-[5rem] overflow-auto mr-[8px] sm:mr-[1rem] shrink-0 flex",children:e.jsx("img",{src:Se,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})})})})}),e.jsxs("div",{className:"post-content",children:[e.jsxs("div",{className:"post-header",children:[e.jsx(O,{to:`/user/${s.user_id}`,className:"post-username-link",children:e.jsx("span",{className:"capitalize post-username",children:s.commenter_name})}),e.jsx("span",{className:"post-time",children:e.jsx(Ce,{createdAt:s.created_at})})]}),e.jsxs("div",{className:"post-body",children:[s.is_reply?e.jsxs("span",{className:"flex items-center reply-indicator mb-[.5rem] cursor-pointer",onClick:()=>g(s.replying_to_comment_id),children:[e.jsx("span",{className:"reply-icon",children:e.jsx(ge,{})}),e.jsx("span",{className:"replying-to",children:s.replying_to_user_name})]}):null,e.jsx("div",{dangerouslySetInnerHTML:{__html:s.content}})]}),e.jsxs("div",{className:"post-actions",children:[_?e.jsx("button",{className:"post-action-button like like-button",onClick:()=>i(s.id),children:"unlike"}):e.jsx("button",{className:"post-action-button like like-button",onClick:()=>a(s.id),children:"Like"}),e.jsx("button",{className:"post-action-button reply reply-button",onClick:()=>o(s.id),children:"Reply"}),w.id===s.user_id?e.jsxs("div",{className:"more-menu-container",ref:d===s.id?f:null,children:[e.jsx("button",{className:`post-action-button menu more-button ${d===s.id?"focus":""}`,onClick:()=>u(s.id),children:e.jsx(bt,{})}),d===s.id&&e.jsxs("div",{className:"flex flex-col more-menu",children:[e.jsxs("button",{onClick:()=>l(s),children:[e.jsx(ys,{style:{fontSize:"16px"}}),"Edit"]}),e.jsxs("button",{onClick:()=>m(s.id),children:[e.jsx(vs,{style:{fontSize:"16px"}}),"Delete"]})]})]}):""]})]})]},s.id)},an=({open:s,onClose:n,replyToDiscussionId:t,onCommentAdded:r})=>{const{authFetch:a,currentUser:i}=Y(),[o,l]=c.useState(""),[d,u]=c.useState(!1),[m,f]=c.useState(!1),[g,w]=c.useState({});te();const y=fe(),_=c.useRef(null),k=c.useRef(null),C={toolbar:[[{header:[!1]}],["bold","italic","underline","strike"]]},p=["header","bold","italic","underline","strike"],x=()=>{const M={},L=o.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").trim();return(!L||L==="")&&(M.body="Reply cannot be empty"),L.length>8e3&&(M.body="Discussion content must not exceed 8000 characters"),w(M),Object.keys(M).length===0},b=async M=>{if(M.preventDefault(),!x())return;f(!0);const L=i.id;try{const N=await Qt(a,{post_id:t,user_id:L,content:o});N.message==="Comment saved successfully"?(y.invalidateQueries({queryKey:["posts"]}),y.invalidateQueries({queryKey:["allDiscussions"]}),r(N.comment),E()):console.log(N)}catch(I){console.error("Error submitting Disussion:",I)}finally{f(!1)}},E=()=>{l(""),w({}),n&&n()},v=()=>{o.replace(/<[^>]*>/g,"").trim()?u(!0):E()};c.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]);const S=()=>{u(!1),E()},T=()=>{u(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(se,{in:d,timeout:250,classNames:"fade-scale",unmountOnExit:!0,nodeRef:k,children:e.jsx("div",{ref:k,className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black bg-opacity-40",children:e.jsxs("div",{className:"w-[90%] md:w-full max-w-xs p-6 bg-white rounded-[6px] shadow-lg",children:[e.jsx("p",{className:"mb-[2rem] text-[.8rem] md:text-[.9rem] text-[--text-primary]",children:"You have unsaved changes. Are you sure you want to close?"}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{className:"px-4 py-2 text-[--text-primary-2] bg-[#071d2916] rounded-[6px] hover:bg-[#071d2920] transition text-[.8rem] md:text-[.85rem]",onClick:T,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 text-white bg-red-600 rounded-[6px] hover:bg-red-700 transition text-[.8rem] md:text-[.85rem]",onClick:S,children:"Discard"})]})]})})}),e.jsx(se,{in:s,timeout:200,classNames:"fade-scale",unmountOnExit:!0,nodeRef:_,children:e.jsx("div",{ref:_,className:"fixed inset-0 z-[1000] lg:bg-[#000] lg:bg-opacity-70 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white shadow-2xl rounded-[6px] border border-gray-100 w-[100%] h-[100%] lg:w-[90%] lg:h-[95%] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between py-[.8rem] px-[1rem] sm:px-[2rem] border-b border-[#f3f4f6] bg-[#f3f4f6]",children:[e.jsxs("div",{className:"text-[--primary] flex items-center gap-1",children:[e.jsx(ge,{className:"text-[.95rem]"}),e.jsx("p",{className:"text-[.85rem] font-[550]",children:t})]}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs("div",{className:"flex gap-[1rem]",children:[e.jsx("button",{type:"submit",onClick:b,disabled:m,className:"flex items-center gap-2 px-6 text-white bg-[--primary] transition-all hover:bg-[--primary-hover] rounded-[6px] disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.75rem]",children:"Posting..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-[.75rem]",children:"Post Reply"})})}),e.jsx("button",{type:"button",className:"px-2 py-2 md:py-[.5rem] bg-[#071d2916] text-[1.2rem] rounded-[6px] hover:bg-[#071d2920] text-[--text-primary-2] transition-all",onClick:v,children:e.jsx(ke,{})})]})})]}),e.jsx("div",{className:"flex-1 px-4 py-6 overflow-y-auto sm:p-6",children:e.jsxs("form",{children:[e.jsxs("div",{className:"",children:[e.jsx("div",{className:`border rounded-[6px] overflow-hidden ${g.body?"border-red-300":"border-gray-200"}`,children:e.jsx(Ke,{value:o,onChange:l,modules:C,formats:p,placeholder:"Write a reply...",style:{backgroundColor:"white"},theme:"snow"})}),g.body?e.jsx("p",{className:"mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:g.body}):e.jsx("p",{className:"invisible mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:"error msg"})]}),e.jsx("div",{className:"block sm:hidden",children:e.jsx("div",{className:"flex justify-end py-3 sm:flex-row sm:items-center mt-[1rem] md:mt-0 mb-[2rem] md:mb-[2rem]",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",className:"px-6 py-2 md:py-3 bg-[#071d2916] rounded-[6px] hover:bg-[#071d2920] text-[.8rem] text-[--text-primary-2] transition-all",onClick:v,children:"Cancel"}),e.jsx("button",{type:"submit",onClick:b,disabled:m,className:"flex items-center gap-2 px-6 text-white bg-[--primary] transition-all hover:bg-[--primary-hover] rounded-[6px] disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.8rem]",children:"Posting..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-[.8rem]",children:"Post Reply"})})})]})})})]})})]})})})]})},on=({onCancel:s,onConfirm:n})=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black bg-opacity-40",children:e.jsxs("div",{className:"w-[90%] md:w-full max-w-sm p-6 bg-white rounded-[6px] shadow-lg",children:[e.jsx("p",{className:"mb-[2rem] text-[.8rem] md:text-[.9rem] text-[--text-primary]",children:"Permanently delete this discussion? This cannot be undone."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{className:"px-4 py-2 text-[--text-primary-2] bg-[#071d2916] rounded-[6px] hover:bg-[#071d2920] transition text-[.8rem] md:text-[.85rem]",onClick:s,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 text-white bg-red-600 rounded-[6px] hover:bg-red-700 transition text-[.8rem] md:text-[.85rem]",onClick:n,children:"Yes, Delete"})]})]})})}),tt=()=>{const[s,n]=c.useState(null),t=c.useRef(null),r=c.useCallback(i=>{n(o=>o===i?null:i)},[]),a=c.useCallback(i=>{t.current&&!t.current.contains(i.target)&&n(null)},[]);return c.useEffect(()=>(s?document.addEventListener("mousedown",a):document.removeEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}),[s,a]),{showMoreMenu:s,moreMenuRef:t,toggleMoreMenu:r,setShowMoreMenu:n}},ln=({open:s,onClose:n,replyToDiscussionId:t,replyToDiscussionTitle:r,onRenameDiscussionTitle:a})=>{const{authFetch:i,currentUser:o}=Y(),[l,d]=c.useState(""),[u,m]=c.useState(!1),[f,g]=c.useState({});te();const w=fe(),y=c.useRef(null);c.useEffect(()=>{s&&d(r||"")},[s,r]);const _=()=>{const x={};return(!l||l==="")&&(x.body="Discussion title cannot be empty"),l.length<2&&(x.body="Discussion title must be greater than 2 characters"),g(x),Object.keys(x).length===0},k=async x=>{if(x.preventDefault(),!_())return;m(!0);const b=o.id;try{const E={user_id:b,post_id:t,title:l};if(E.title===r)C();else{const v=await Yt(i,E);v.message==="Post title updated successfully"?(w.invalidateQueries({queryKey:["posts"]}),w.invalidateQueries({queryKey:["allDiscussions"]}),a(v.post.title),Notification("success","Discussion Title Updated!"),C()):console.log(v)}}catch(E){console.error("Error Renaming Disussion:",E)}finally{m(!1)}},C=()=>{d(""),g({}),n&&n()},p=()=>{C()};return c.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]),e.jsx(e.Fragment,{children:e.jsx(se,{in:s,timeout:200,classNames:"fade-scale",unmountOnExit:!0,nodeRef:y,children:e.jsx("div",{ref:y,className:"fixed inset-0 z-[1000] lg:bg-[#000] lg:bg-opacity-80 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white shadow-2xl rounded-[6px] border border-gray-100 w-[100%] h-[100%] lg:w-[35%] lg:h-[auto] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between py-[.8rem] px-[1rem] sm:px-[1.5rem] border-b border-[#f3f4f6] bg-[#f3f4f6]",children:[e.jsx("div",{className:"text-[--primary] flex items-center gap-1",children:e.jsx("p",{className:"text-[.85rem] font-[550]",children:"Rename Discussion"})}),e.jsx("div",{children:e.jsx("button",{type:"button",className:"px-1 py-1  bg-[#071d2916] text-[1.1rem] rounded-[6px] hover:bg-[#071d2920] text-[--text-primary-2] transition-all",onClick:p,children:e.jsx(ke,{})})})]}),e.jsx("div",{className:"flex-1 px-4 py-6 overflow-y-auto sm:p-6",children:e.jsx("form",{onSubmit:k,children:e.jsxs("div",{className:"py-[.5rem]",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:l,onChange:x=>d(x.target.value),className:"border w-full py-[.8rem] px-[.5rem] text-[.8rem] border-[#071D2940] rounded-[7px] bg-[#F3F4F6] outline-none"}),f.body?e.jsx("p",{className:"mt-1 text-[.7rem] text-red-500 md:text-xs",children:f.body}):e.jsx("p",{className:"invisible mt-1 text-[.7rem] text-red-500 md:text-xs",children:"error msg"})]}),e.jsx("div",{className:"mt-[.5rem]",children:u?e.jsxs("button",{disabled:u,type:"submit",className:"bg-[--text-primary] text-white py-[.8rem] text-[.8rem] w-full rounded-[7px] flex items-center justify-center",children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.75rem]",children:"Updating..."})]}):e.jsx("button",{type:"submit",className:"bg-[--text-primary] text-white py-[.8rem] text-[.8rem] w-full rounded-[7px]",children:"Rename"})})]})})})]})})})})},nt=({open:s,onClose:n,replyToDiscussionId:t,replyToCommentId:r,onReplyCommentAdded:a})=>{const{authFetch:i,currentUser:o}=Y(),[l,d]=c.useState(""),[u,m]=c.useState(!1),[f,g]=c.useState(!1),[w,y]=c.useState({});te();const _=ae(),k=fe(),C=c.useRef(null),p=c.useRef(null),x={toolbar:[[{header:[!1]}],["bold","italic","underline","strike"]]},b=["header","bold","italic","underline","strike"],E=()=>{const I={},N=l.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").trim();return(!N||N==="")&&(I.body="Reply cannot be empty"),N.length>8e3&&(I.body="Discussion content must not exceed 8000 characters"),y(I),Object.keys(I).length===0},v=async I=>{if(I.preventDefault(),!E())return;g(!0);const N=o.id;try{const A=await Gt(i,{post_id:t,user_id:N,comment_id:r,content:l});A.message==="Reply posted successfully"?(k.invalidateQueries({queryKey:["posts"]}),k.invalidateQueries({queryKey:["allDiscussions"]}),_.pathname.startsWith("/user/")?(k.invalidateQueries({queryKey:["userPosts",N]}),Notification("submitted","Reply Posted")):a(A.reply),S()):console.log(A)}catch(D){console.error("Error submitting Disussion:",D)}finally{g(!1)}},S=()=>{d(""),y({}),n&&n()},T=()=>{l.replace(/<[^>]*>/g,"").trim()?m(!0):S()};c.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]);const M=()=>{m(!1),S()},L=()=>{m(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(se,{in:u,timeout:250,classNames:"fade-scale",unmountOnExit:!0,nodeRef:p,children:e.jsx("div",{ref:p,className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black bg-opacity-40",children:e.jsxs("div",{className:"w-[90%] md:w-full max-w-xs p-6 bg-white rounded-[6px] shadow-lg",children:[e.jsx("p",{className:"mb-[2rem] text-[.8rem] md:text-[.9rem] text-[--text-primary]",children:"You have unsaved changes. Are you sure you want to close?"}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{className:"px-4 py-2 text-[--text-primary-2] bg-[#071d2916] rounded-[6px] hover:bg-[#071d2920] transition text-[.8rem] md:text-[.85rem]",onClick:L,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 text-white bg-red-600 rounded-[6px] hover:bg-red-700 transition text-[.8rem] md:text-[.85rem]",onClick:M,children:"Discard"})]})]})})}),e.jsx(se,{in:s,timeout:200,classNames:"fade-scale",unmountOnExit:!0,nodeRef:C,children:e.jsx("div",{ref:C,className:"fixed inset-0 z-[1000] lg:bg-[#000] lg:bg-opacity-70 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white shadow-2xl rounded-[6px] border border-gray-100 w-[100%] h-[100%] lg:w-[90%] lg:h-[95%] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between py-[.8rem] px-[1rem] sm:px-[2rem] border-b border-[#f3f4f6] bg-[#f3f4f6]",children:[e.jsxs("div",{className:"text-[--primary] flex items-center gap-1",children:[e.jsx(ge,{className:"text-[.95rem]"}),e.jsxs("p",{className:"text-[.85rem] font-[550]",children:[t,"/",r]})]}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs("div",{className:"flex gap-[1rem]",children:[e.jsx("button",{type:"submit",onClick:v,disabled:f,className:"flex items-center gap-2 px-6 text-white bg-[--primary] transition-all hover:bg-[--primary-hover] rounded-[6px] disabled:opacity-50 disabled:cursor-not-allowed",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.75rem]",children:"Posting..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-[.75rem]",children:"Post Reply"})})}),e.jsx("button",{type:"button",className:"px-2 py-2 md:py-[.5rem] bg-[#071d2916] text-[1.2rem] rounded-[6px] hover:bg-[#071d2920] text-[--text-primary-2] transition-all",onClick:T,children:e.jsx(ke,{})})]})})]}),e.jsx("div",{className:"flex-1 px-4 py-6 overflow-y-auto sm:p-6",children:e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"",children:[e.jsx("div",{className:`border rounded-[6px] overflow-hidden ${w.body?"border-red-300":"border-gray-200"}`,children:e.jsx(Ke,{value:l,onChange:d,modules:x,formats:b,placeholder:"Write a reply...",style:{backgroundColor:"white"},theme:"snow"})}),w.body?e.jsx("p",{className:"mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:w.body}):e.jsx("p",{className:"invisible mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:"error msg"})]}),e.jsx("div",{className:"block sm:hidden",children:e.jsx("div",{className:"flex justify-end py-3 sm:flex-row sm:items-center mt-[1rem] md:mt-0 mb-[2rem] md:mb-[2rem]",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",className:"px-6 py-2 md:py-3 bg-[#071d2916] rounded-[6px] hover:bg-[#071d2920] text-[.8rem] text-[--text-primary-2] transition-all",onClick:T,children:"Cancel"}),e.jsx("button",{type:"submit",onClick:v,disabled:f,className:"flex items-center gap-2 px-6 text-white bg-[--primary] transition-all hover:bg-[--primary-hover] rounded-[6px] disabled:opacity-50 disabled:cursor-not-allowed",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.8rem]",children:"Posting..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-[.8rem]",children:"Post Reply"})})})]})})})]})})]})})})]})},rt=({open:s,onClose:n,editCommentDiscussionId:t,editCommentId:r,initialContent:a,onEditCommentContent:i})=>{const{authFetch:o,currentUser:l}=Y(),[d,u]=c.useState(""),[m,f]=c.useState(!1),[g,w]=c.useState({});te();const y=fe(),_=c.useRef(null);c.useEffect(()=>{s&&u(a||"")},[s,a]);const k={toolbar:[[{header:[!1]}],["bold","italic","underline","strike"]]},C=["header","bold","italic","underline","strike"],p=()=>{const v={},S=d.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").trim();return(!S||S==="")&&(v.body="Reply cannot be empty"),S.length>8e3&&(v.body="Discussion content must not exceed 8000 characters"),w(v),Object.keys(v).length===0},x=async v=>{if(v.preventDefault(),!p())return;f(!0);const S=l.id;try{const T={user_id:S,comment_id:r,content:d};if(T.content===a)b();else{const M=await Jt(o,T);M.message==="Comment updated successfully"?(y.invalidateQueries({queryKey:["posts"]}),i(M.comment),Notification("success","Comment Updated!"),b()):console.log(M)}}catch(T){console.error("Error Updating Comment:",T)}finally{f(!1)}},b=()=>{u(""),w({}),n&&n()},E=()=>{b()};return c.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]),e.jsx(e.Fragment,{children:e.jsx(se,{in:s,timeout:200,classNames:"fade-scale",unmountOnExit:!0,nodeRef:_,children:e.jsx("div",{ref:_,className:"fixed inset-0 z-[1000] lg:bg-[#000] lg:bg-opacity-70 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white shadow-2xl rounded-[6px] border border-gray-100 w-[100%] h-[100%] lg:w-[90%] lg:h-[95%] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between py-[.8rem] px-[1rem] sm:px-[2rem] border-b border-[#f3f4f6] bg-[#f3f4f6]",children:[e.jsxs("div",{className:"text-[--primary] flex items-center gap-1",children:[e.jsx(ge,{className:"text-[.95rem]"}),e.jsxs("p",{className:"text-[.85rem] font-[550]",children:[t,"/",r]})]}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs("div",{className:"flex gap-[1rem]",children:[e.jsx("button",{type:"submit",onClick:x,disabled:m,className:"flex items-center gap-2 px-6 text-white bg-[--primary] transition-all hover:bg-[--primary-hover] rounded-[6px] disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.75rem]",children:"Updating..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-[.75rem]",children:"Save Changes"})})}),e.jsx("button",{type:"button",className:"px-2 py-2 md:py-[.5rem] bg-[#071d2916] text-[1.2rem] rounded-[6px] hover:bg-[#071d2920] text-[--text-primary-2] transition-all",onClick:E,children:e.jsx(ke,{})})]})})]}),e.jsx("div",{className:"flex-1 px-4 py-6 overflow-y-auto sm:p-6",children:e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"",children:[e.jsx("div",{className:`border rounded-[6px] overflow-hidden ${g.body?"border-red-300":"border-gray-200"}`,children:e.jsx(Ke,{value:d,onChange:u,modules:k,formats:C,placeholder:"Write a reply...",style:{backgroundColor:"white"},theme:"snow"})}),g.body?e.jsx("p",{className:"mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:g.body}):e.jsx("p",{className:"invisible mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:"error msg"})]}),e.jsx("div",{className:"block sm:hidden",children:e.jsx("div",{className:"flex justify-end py-3 sm:flex-row sm:items-center mt-[1rem] md:mt-0 mb-[2rem] md:mb-[2rem]",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",className:"px-6 py-2 md:py-3 bg-[#071d2916] rounded-[6px] hover:bg-[#071d2920] text-[.8rem] text-[--text-primary-2] transition-all",onClick:E,children:"Cancel"}),e.jsx("button",{type:"submit",onClick:x,disabled:m,className:"flex items-center gap-2 px-6 text-white bg-[--primary] transition-all hover:bg-[--primary-hover] rounded-[6px] disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.8rem]",children:"Updating..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-[.8rem]",children:"Save Changes"})})})]})})})]})})]})})})})},Is=()=>{var Re;const{authFetch:s,currentUser:n}=Y(),{id:t,commentId:r}=js(),[a,i]=c.useState(null),[o,l]=c.useState(null),[d,u]=c.useState(!0),[m,f]=c.useState(null),[g,w]=c.useState(!1),[y,_]=c.useState(!1),[k,C]=c.useState(!1),[p,x]=c.useState(!1),[b,E]=c.useState(!1),[v,S]=c.useState(!1),[T,M]=c.useState(null),[L,I]=c.useState(null),[N,D]=c.useState(r||null),[A,q]=c.useState(0),ee=te(),B=fe(),[V,K]=c.useState(!1),F=c.useRef(null),J=c.useRef(null),[ne,Z]=c.useState([]),[Oe,ue]=c.useState(!1),[ks,le]=c.useState(null),{showMoreMenu:Ye,moreMenuRef:Je,toggleMoreMenu:Ss,setShowMoreMenu:ve}=tt();c.useEffect(()=>{let j=!0;return u(!0),f(null),i(null),l([]),(async()=>{try{const h=Number(t),R=await hs(s,h,n.id);j&&(i(R),l(R.comments||[]),u(!1),B.invalidateQueries({queryKey:["posts"]}))}catch(h){j&&(f(h.message||"Failed to fetch discussion"),u(!1),ee(-1))}})(),()=>{j=!1}},[s,ee,t,n.id,B]),c.useEffect(()=>{if(!d&&N){const j=document.getElementById(N);j&&(j.scrollIntoView({behavior:"smooth",block:"center"}),j.classList.add("highlighted-comment"),setTimeout(()=>{j.classList.remove("highlighted-comment")},3e3))}},[d,N,A]),c.useEffect(()=>{r&&D(r)},[r]);const Ze=j=>{D(j),q(U=>U+1)},Xe=()=>{E(!0),S(!0)},es=()=>{E(!1),S(!1)},ye=j=>{j!==t&&(u(!0),ee(`/d/${j}`))},ss=j=>{M(j),_(!0)},ts=j=>{I(j),x(!0)},Es=()=>{K(j=>!j)};c.useEffect(()=>{if(!V)return;function j(U){J.current&&!J.current.contains(U.target)&&F.current&&!F.current.contains(U.target)&&K(!1)}return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[V]);const Ee=j=>{const U={id:j.id,post_id:j.post_id,user_id:Number(j.user_id),commenter_passport:n.passport,commenter_name:n.first_name,created_at:j.created_at,is_reply:0,replying_to_comment_id:j.replying_to_comment_id,replying_to_user_name:j.replying_to_user_name,content:j.content};l(h=>[...h,U]),D(j.id),q(h=>h+1)},De=j=>{const U={id:j.id,post_id:j.post_id,user_id:Number(j.user_id),commenter_passport:n.passport,commenter_name:n.first_name,created_at:j.created_at,is_reply:1,replying_to_comment_id:j.replying_to_comment_id,replying_to_user_name:j.replying_to_user_name,content:j.content};l(h=>[...h,U]),D(j.id),q(h=>h+1)},_e=j=>{i(U=>({...U,title:j}))},ns=j=>{l(U=>U.map(h=>Number(h.id)===Number(j.id)?{...h,content:j.content}:h))},ce=j=>{le(j),ue(!0)},Te=async()=>{try{(await Zt(s,ks)).message==="Post and related data deleted successfully"&&(Notification("success","Discussion Deleted!"),ee("/"))}catch(j){console.log(j)}ue(!1),le(null)},Ue=()=>{ue(!1),le(null)},Me=async j=>{try{const U=await Qs(s,j);U.message==="Comment and its likes deleted successfully"&&(l(h=>h.filter(R=>R.id!==j)),B.invalidateQueries({queryKey:["allDiscussions"]}),Notification("success","Comment Deleted!")),U.error==="Comment not found"&&Notification("failed","Invalid Comment ID")}catch(U){console.log(U)}ve(null)};c.useEffect(()=>{(async()=>{if(n&&n.id)try{const U=await xs(s,n.id);Z(Array.isArray(U)?U:[])}catch{Z([])}})()},[s,n]);const rs=async j=>{(await Gs(s,{comment_id:j,user_id:n.id})).message==="Comment liked successfully"?Z(h=>[...h,{id:j,user_id:n.id}]):Notification("failed","Failed to like comment",3e3)},is=async j=>{(await Ys(s,{comment_id:j,user_id:n.id})).message==="Comment unliked successfully"?Z(h=>h.filter(R=>!(Number(R.user_id)===Number(n.id)&&Number(R.id)===Number(j)))):Notification("failed","Failed to like comment",3e3)};return e.jsxs(e.Fragment,{children:[e.jsx(pe,{openDiscussionSidebarMenu:Xe,isDiscussionSidebarMenuActive:v,closeDiscussionSidebarMenu:es,discussionOwnerId:((Re=a==null?void 0:a.author)==null?void 0:Re.id)||null,onStartDiscussionReply:()=>w(!0),onStartRenameDiscussion:()=>C(!0),deleteDiscussion:()=>ce(a.id)}),d?e.jsx("div",{className:"flex items-center justify-center w-full spinner-container pt-[7rem]",children:e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}})}):e.jsx(e.Fragment,{children:m?e.jsx("div",{className:"flex items-center justify-center w-full spinner-container pt-[5rem]",children:e.jsxs("span",{className:"loading-text",children:["Error Fetching Data: ",m]})}):e.jsx(e.Fragment,{children:a?e.jsxs("div",{children:[e.jsx("div",{className:"relative w-full discussion-page-banner",children:e.jsx("div",{className:"flex justify-center text-center discussion-page-header",children:e.jsxs("div",{className:"discussion-page-header-container",children:[e.jsx("div",{className:"capitalize discussion-page-tag",children:a.tag}),e.jsx("div",{className:"capitalize discussion-page-title",children:a.title})]})})}),e.jsx(re,{children:e.jsxs("div",{className:"discussion-page-content-wrapper",children:[e.jsxs("div",{className:"dicussion-area",children:[e.jsx("div",{className:"discussion-thread",children:o.map((j,U)=>e.jsx(qe,{post:j,userLikedComments:ne,highlightedCommentId:N,handleLike:rs,handleUnLike:is,onReplyClick:ss,onEditClick:ts,showMoreMenu:Ye,toggleMoreMenu:Ss,handleDeleteComment:Me,moreMenuRef:Je,onReplyLink:Ze},j.id))}),e.jsxs("div",{className:"reply-input-container",onClick:()=>w(!0),style:{cursor:"text"},children:[e.jsx("div",{className:"reply-input-avatar",children:n.passport!==""?e.jsx("div",{className:"userProfileImage w-[32px] h-[32px] sm:w-[35px] sm:h-[35px] md:w-[50px] md:h-[50px] rounded-[5rem] overflow-auto  shrink-0 flex",children:e.jsx("img",{src:`https://rsjobhub.com/${n.passport}`,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}):e.jsx("div",{className:"userProfileImage w-[32px] h-[32px] sm:w-[35px] sm:h-[35px] md:w-[50px] md:h-[50px] rounded-[5rem] overflow-auto  shrink-0 flex",children:e.jsx("img",{src:Se,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})})}),e.jsx("form",{className:"reply-input-form",children:e.jsx("div",{className:"reply-input-field",placeholder:"Write a Reply...",children:"Write a Reply..."})})]})]}),n.id===a.author.id?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-[20%] reply-btn-area-with-action sticky top-[100px] right-0 height-[calc(100vh - 100px)]  z-[50] pt-[2rem]",children:[e.jsxs("div",{className:"flex rounded-[4px] gap-[.1rem] overflow-hidden",children:[e.jsx("button",{className:"w-full bg-[--primary] hover:bg-[--primary-hover] text-white px-[2rem] h-[40px] text-[14px] transition-[all_.2s_ease]",onClick:()=>w(!0),children:"Reply"}),e.jsx("button",{ref:F,className:`bg-[--primary] hover:bg-[--primary-hover] text-white px-[.5rem] transition-[all_.2s_ease] ${V?"bg-[--primary-hover]":""}`,onClick:Es,type:"button",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-down",children:e.jsx("path",{d:"m6 9 6 6 6-6"})})})]}),V&&e.jsx("div",{className:"more-menu-container",ref:J,children:e.jsxs("div",{className:"flex flex-col absolute top-[100%] mt-[10px] left-[0] bg-[#fff] rounded-[6px] border border-[--text-primary-3] z-[10]  w-[100%]",children:[e.jsxs("button",{onClick:()=>C(!0),className:"gap-[.5rem] w-[100%] text-left bg-none border-0 text-[12px] text-[--text-primary] cursor-pointer flex items-start p-[15px_15px] hover:bg-[#071d290a] transition-[all_.2s_ease]",children:[e.jsx(ys,{style:{fontSize:"16px"}}),"Rename"]}),e.jsxs("button",{onClick:()=>ce(a.id),className:" gap-[.5rem] w-[100%] text-left bg-none border-0 text-[12px] text-[--text-primary] cursor-pointer flex items-start p-[15px_15px] hover:bg-[#071d290a] transition-[all_.2s_ease]",children:[e.jsx(vs,{style:{fontSize:"16px"}}),"Delete"]})]})})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-[20%] reply-btn-area",children:e.jsx("button",{onClick:()=>w(!0),children:"Reply"})})})]})}),e.jsx(rn,{displaySidebarMenu:b,onCloseSidebar:es,onSelectDiscussion:ye})]}):e.jsx("div",{className:"flex items-center justify-center w-full spinner-container pt-[5rem]"})})}),e.jsx(an,{open:g,onClose:()=>w(!1),replyToDiscussionId:t,onCommentAdded:Ee}),e.jsx(nt,{open:y,onClose:()=>_(!1),replyToDiscussionId:t,replyToCommentId:T,onReplyCommentAdded:De}),e.jsx(ln,{open:k,onClose:()=>C(!1),replyToDiscussionId:t,replyToDiscussionTitle:a==null?void 0:a.title,onRenameDiscussionTitle:_e}),e.jsx(rt,{open:p,onClose:()=>x(!1),editCommentDiscussionId:t,editCommentId:L==null?void 0:L.id,initialContent:L==null?void 0:L.content,onEditCommentContent:ns}),e.jsx(se,{in:Oe,timeout:250,classNames:"fade-scale",unmountOnExit:!0,children:e.jsx(on,{onCancel:Ue,onConfirm:Te})})]})},cn=()=>{const{authFetch:s}=Y(),[n,t]=c.useState(!1),r=ae(),a=te();function i(){r.pathname==="/"?a(0):a("/")}const{data:o=[],isLoading:l,isError:d,refetch:u}=de({queryKey:["tags"],queryFn:()=>Ks(s),staleTime:0,refetchOnWindowFocus:!0});return e.jsxs(e.Fragment,{children:[e.jsx(pe,{onStartDiscussion:()=>t(!0)}),e.jsx(re,{children:e.jsxs("div",{className:"forumHomeLayout",children:[e.jsx(bs,{onAllDiscussionsClick:i,currentPath:r.pathname,onStartDiscussion:()=>t(!0)}),l?e.jsxs("div",{className:"flex items-center justify-center w-full spinner-container",children:[e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"loading-text",children:"Loading..."})]}):d?e.jsx("div",{className:"flex items-center justify-center w-full pt-8",children:e.jsx("span",{className:"loading-text",children:"Failed to fetch tags."})}):o.length===0?e.jsx("div",{className:"flex items-center justify-center w-full pt-8",children:e.jsx("span",{className:"loading-text",children:"No tags found."})}):e.jsx("div",{className:"forumHomeMainSection",children:e.jsx("div",{className:"grid w-full grid-cols-1 gap-4 tag-card sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3",children:o.map(m=>e.jsx(O,{to:`/tags/${m.id}/${m.name}`,children:e.jsxs("div",{className:"relative w-full h-[150px] rounded-[5px] bg-white overflow-hidden flex flex-col justify-between p-4 transition-all duration-300 ease hover:scale-[1.01]",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-[#071d2910] pb-[.5rem]",children:[e.jsx("div",{className:"text-[14px] md:text-[14px] text-[--primary] font-[600]  capitalize",children:m.name}),e.jsx("div",{className:"tagDiscussionCount",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ct,{className:"tagDiscussionCount-icon"}),e.jsx("span",{className:"text-[12px]",children:Ns(m.discussionCount)})]})})]}),e.jsxs("div",{className:"absolute flex flex-col items-start bottom-3 left-4 right-4",children:[e.jsx("span",{className:"text-[12px] font-medium opacity-80 last-discussion",children:m.lastDiscussionTitle!==null?m.lastDiscussionTitle:"No discussions"}),e.jsx("span",{className:"text-[10px] text-[#071d2980] uppercase last-discussion-createdAt",children:e.jsx(Ce,{createdAt:m.lastDiscussionCreatedAt})})]})]})},m.id))})})]})}),e.jsx(Cs,{open:n,onClose:()=>t(!1)})]})},dn=(s=20,n=null)=>{const{authFetch:t}=Y(),[r,a]=c.useState([]),[i,o]=c.useState(1),[l,d]=c.useState(!1),[u,m]=c.useState(!1),[f,g]=c.useState(!1),[w,y]=c.useState(!0),_=c.useCallback(async(x,b,E)=>{try{const v=await Ht(t,E);return Array.isArray(v)?v.slice(x,b):[]}catch(v){return console.error("Error fetching discussions by tag:",v),[]}},[t]),k=c.useCallback(async x=>{m(!0);try{const b=await _(0,s,x);a(b);const E=b.length;y(E===s),g(!0),o(1)}catch(b){console.error("Error fetching initial discussions:",b)}finally{m(!1)}},[_,s]);c.useEffect(()=>{k(n)},[k,n]);const C=c.useCallback(async()=>{d(!0),o(1),y(!0);try{const x=await _(0,s,n);a(x),y(x.length===s)}catch(x){console.error("Error refreshing discussions:",x)}finally{d(!1)}},[_,s,n]),p=c.useCallback(async()=>{if(u||!w)return;m(!0);const x=i+1,b=(x-1)*s,E=x*s;try{const v=await _(b,E,n);a(S=>[...S,...v]),o(x),y(v.length===s)}catch(v){console.error("Error loading more discussions:",v)}finally{m(!1)}},[i,s,_,w,u,n]);return{visibleDiscussions:r,isRefreshing:l,isLoading:u,isDataFetched:f,hasMore:w,handleRefresh:C,loadMoreDiscussions:p,setVisibleDiscussions:a}},un=()=>{const{authFetch:s,currentUser:n}=Y(),{tagID:t,tagName:r}=js(),[a,i]=c.useState(!1),[o,l]=c.useState(20),d=ae(),u=te(),{visibleDiscussions:m,isRefreshing:f,isLoading:g,isDataFetched:w,hasMore:y,handleRefresh:_,loadMoreDiscussions:k}=dn(o,t),C=async b=>{try{const E={user_id:n.id,post_id:b},v=await Qe(s,E);if(v.message==="Post has been marked as read")return;console.log(v)}catch(E){console.error("Error marking discussions as read:",E)}},p=async()=>{try{const b={user_id:n.id},E=await Js(s,b);E.message==="All posts marked as read"?_():console.log(E)}catch(b){console.error("Error marking all discussions as read:",b)}};function x(){d.pathname==="/"?_():u("/")}return e.jsxs(e.Fragment,{children:[e.jsx(pe,{onStartDiscussion:()=>i(!0)}),e.jsx(re,{children:e.jsxs("div",{className:"forumHomeLayout",children:[e.jsx(bs,{onAllDiscussionsClick:x,currentPath:d.pathname,onStartDiscussion:()=>i(!0)}),w?e.jsxs("div",{className:"forumHomeMainSection",children:[e.jsxs("div",{className:"forum-filter-bar",children:[e.jsx("div",{className:"forum-tag-title",children:e.jsxs("h1",{className:"font-[600] text-[--primary] uppercase flex items-center gap-1",children:[e.jsx(Nt,{className:"text-[14px] sm:text-[16px]"}),e.jsx("span",{className:" text-[12px] sm:text-[14px]",children:r})]})}),e.jsxs("div",{className:"filter-actions",children:[e.jsx("button",{className:`action-button refresh-button ${f?"refreshing":""}`,onClick:_,"aria-label":"Refresh",disabled:f||g,children:e.jsx(Os,{})}),e.jsx("button",{className:"action-button mark-read-button",onClick:p,"aria-label":"Mark all as read",children:e.jsx(Us,{})})]})]}),f?e.jsxs("div",{className:"flex items-center justify-center w-full spinner-container",children:[e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"loading-text",children:"Loading..."})]}):e.jsxs("div",{className:"discussions-container",children:[m.length>0?e.jsx("ul",{className:"discussions-list",children:m.map(b=>e.jsx(ws,{discussion:b,handleMarkAsRead:C},b.id))}):e.jsx("div",{className:"flex items-center justify-center w-full spinner-container",children:e.jsx("span",{className:"loading-text",children:e.jsxs("p",{className:"no-discussions-message",children:['No discussions found for this tag: "',r,'"']})})}),y&&e.jsx("div",{className:"load-more-container",children:g?e.jsx(e.Fragment,{children:e.jsx("div",{className:"spinner"})}):e.jsx(xe,{loadMoreDiscussions:k,isLoading:g})})]})]}):e.jsxs("div",{className:"flex items-center justify-center w-full spinner-container",children:[e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}}),e.jsxs("span",{className:"loading-text",children:['Loading discussions for "',r,'"...']})]})]})}),e.jsx(Cs,{open:a,onClose:()=>i(!1)})]})},mn=G.createContext({}),it=!0;function hn({baseColor:s,highlightColor:n,width:t,height:r,borderRadius:a,circle:i,direction:o,duration:l,enableAnimation:d=it,customHighlightBackground:u}){const m={};return o==="rtl"&&(m["--animation-direction"]="reverse"),typeof l=="number"&&(m["--animation-duration"]=`${l}s`),d||(m["--pseudo-element-display"]="none"),(typeof t=="string"||typeof t=="number")&&(m.width=t),(typeof r=="string"||typeof r=="number")&&(m.height=r),(typeof a=="string"||typeof a=="number")&&(m.borderRadius=a),i&&(m.borderRadius="50%"),typeof s<"u"&&(m["--base-color"]=s),typeof n<"u"&&(m["--highlight-color"]=n),typeof u=="string"&&(m["--custom-highlight-background"]=u),m}function Ae({count:s=1,wrapper:n,className:t,containerClassName:r,containerTestId:a,circle:i=!1,style:o,...l}){var d,u,m;const f=G.useContext(mn),g={...l};for(const[x,b]of Object.entries(l))typeof b>"u"&&delete g[x];const w={...f,...g,circle:i},y={...o,...hn(w)};let _="react-loading-skeleton";t&&(_+=` ${t}`);const k=(d=w.inline)!==null&&d!==void 0?d:!1,C=[],p=Math.ceil(s);for(let x=0;x<p;x++){let b=y;if(p>s&&x===p-1){const v=(u=b.width)!==null&&u!==void 0?u:"100%",S=s%1,T=typeof v=="number"?v*S:`calc(${v} * ${S})`;b={...b,width:T}}const E=G.createElement("span",{className:_,style:b,key:x},"");k?C.push(E):C.push(G.createElement(G.Fragment,{key:x},E,G.createElement("br",null)))}return G.createElement("span",{className:r,"data-testid":a,"aria-live":"polite","aria-busy":(m=w.enableAnimation)!==null&&m!==void 0?m:it},n?C.map((x,b)=>G.createElement(n,{key:b},x)):C)}function xn(s){return z({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M48 48a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm448 16H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(s)}const pn=({userid:s})=>{const[n,t]=c.useState("posts"),r=ae();return c.useEffect(()=>{r.pathname===`/user/${s}`?t("posts"):r.pathname===`/user/${s}/discussions`?t("discussions"):r.pathname===`/user/${s}/likes`?t("likes"):r.pathname===`/user/${s}/mentions`&&t("mentions")},[r.pathname]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"user-profile-sidebar",children:e.jsxs("ul",{children:[e.jsx(os,{to:`/user/${s}`,children:e.jsxs("li",{className:`flex items-center gap-[.8rem]  ${n==="posts"?"active":""}`,children:[e.jsx("div",{className:"",children:e.jsx(Ie,{className:"text-[16px]"})}),e.jsx("p",{children:"Posts"})]})}),e.jsx(os,{to:`/user/${s}/discussions`,children:e.jsxs("li",{className:`flex items-center gap-[.8rem]  ${n==="discussions"?"active":""}`,children:[e.jsx("div",{className:"",children:e.jsx(xn,{className:"text-[16px]"})}),e.jsx("p",{children:"Discussions"})]})}),e.jsx(os,{to:`/user/${s}/likes`,children:e.jsxs("li",{className:`flex items-center gap-[.8rem]  ${n==="likes"?"active":""}`,children:[e.jsx("div",{className:"",children:e.jsx(Bs,{className:"text-[16px]"})}),e.jsx("p",{children:"Likes"})]})})]})})})},ds=()=>e.jsxs("div",{className:"mb-[24px]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ae,{width:60,height:16}),e.jsx(Ae,{width:120,height:16})]}),e.jsx(Ae,{height:40,count:2,style:{marginBottom:8}})]}),fn=()=>e.jsxs("div",{className:"mb-[24px]",children:[e.jsx(Ae,{width:180,height:24,style:{marginBottom:8}}),e.jsx(Ae,{height:32,count:2})]}),X=20,He=()=>{const{authFetch:s,currentUser:n}=Y(),t=fe(),{userId:r}=js(),a=ae(),[i,o]=c.useState({}),[l,d]=c.useState(""),[u,m]=c.useState(!0),[f,g]=c.useState(null),[w,y]=c.useState(null),[_,k]=c.useState(!1),[C,p]=c.useState(null),[x,b]=c.useState(null),[E,v]=c.useState(!1),[S,T]=c.useState(null),[M,L]=c.useState(X),[I,N]=c.useState(X),[D,A]=c.useState(X),[q,ee]=c.useState(X),B=a.pathname===`/user/${r}`,V=a.pathname===`/user/${r}/discussions`,K=a.pathname===`/user/${r}/likes`,F=a.pathname===`/user/${r}/mentions`,[J,ne]=c.useState([]),{data:Z=[],isLoading:Oe,error:ue,refetch:ks}=de({queryKey:["userPosts",r],enabled:B,staleTime:0,refetchOnWindowFocus:!0,queryFn:async()=>{const h=await Vt(s,Number(r));return h&&Array.isArray(h)&&h.length>0?await Promise.all(h.map(async $=>{try{const W=await hs(s,$.post_id,r);return{...$,discussionTitle:W&&!W.error?W.title:"Unknown Discussion"}}catch{return{...$,discussionTitle:"Unknown Discussion"}}})):[]}}),{data:le=[],isLoading:Ye,error:Je,refetch:Ss}=de({queryKey:["userDiscussions",r],enabled:V,staleTime:0,refetchOnWindowFocus:!0,queryFn:async()=>{const h=await Wt(s,Number(r));return h&&Array.isArray(h)?h:[]}}),{data:ve=[],isLoading:Ze,error:Xe,refetch:es}=de({queryKey:["userLikes",r],enabled:K,staleTime:0,refetchOnWindowFocus:!0,queryFn:async()=>{const h=await xs(s,Number(r));return h&&Array.isArray(h)&&h.length>0?await Promise.all(h.map(async $=>{try{const W=await hs(s,$.post_id,r);return{...$,discussionTitle:W&&!W.error?W.title:"Unknown Discussion"}}catch{return{...$,discussionTitle:"Unknown Discussion"}}})):[]}}),{data:ye=[],isLoading:ss,error:ts,refetch:Es}=de({queryKey:["userMentions",r],enabled:F,staleTime:0,refetchOnWindowFocus:!0,queryFn:async()=>{const h=[];return h&&Array.isArray(h)?h:[]}});c.useEffect(()=>{y(null);const h=Number(r);(async()=>{try{const $=await qt(s,h);$&&!$.error?(o($),m(!1),B?d("posts"):V?d("discussions"):K?d("likes"):F&&d("mentions")):(g("The page you are looking for is not available"),m(!1))}catch($){g($.message),m(!1);return}})()},[r,a.pathname,B,V,K,F,s]);const{showMoreMenu:Ee,moreMenuRef:De,toggleMoreMenu:_e,setShowMoreMenu:ns}=tt();c.useEffect(()=>{L(X),N(X),A(X),ee(X)},[r,B,V,K,F]);const ce=c.useMemo(()=>B?Z.slice(0,M):V?le.slice(0,I):K?ve.slice(0,D):F?ye.slice(0,q):[],[B,V,K,F,Z,le,ve,ye,M,I,D,q]),Te=h=>{p(h);const R=ce.find($=>$.id===h);b(R?R.post_id:null),k(!0)},Ue=h=>{T(h),v(!0)},Me=async(h,R)=>{try{const $=await Qs(s,h);$.message==="Comment and its likes deleted successfully"&&(R==="userPosts"?(t.setQueryData(["userPosts",r],W=>W&&W.filter(as=>as.id!==h)),t.invalidateQueries({queryKey:["userLikes",r]})):R==="userLikes"&&(t.setQueryData(["userLikes",r],W=>W&&W.filter(as=>as.id!==h)),t.invalidateQueries({queryKey:["userPosts",r]})),Notification("success","Comment Deleted")),$.error==="Comment not found"&&Notification("failed","Invalid Comment ID")}catch($){console.log($)}ns(null)},rs=h=>{B?(t.setQueryData(["userPosts",r],R=>R&&R.map($=>Number($.id)===Number(h.id)?{...$,content:h.content}:$)),t.invalidateQueries({queryKey:["userLikes",r]})):K&&(t.setQueryData(["userLikes",r],R=>R&&R.map($=>Number($.id)===Number(h.id)?{...$,content:h.content}:$)),t.invalidateQueries({queryKey:["userPosts",r]}))},is=async h=>{try{const R={user_id:n.id,post_id:h},$=await Qe(s,R);if($.message==="Post has been marked as read")return;console.log($)}catch(R){console.error("Error marking discussions as read:",R)}},Re=()=>{};c.useEffect(()=>{(async()=>{if(n&&n.id)try{const R=await xs(s,n.id);ne(Array.isArray(R)?R:[])}catch{ne([])}})()},[s,n]);const j=async h=>{(await Gs(s,{comment_id:h,user_id:n.id})).message==="Comment liked successfully"?(ne($=>[...$,{id:h,user_id:n.id}]),t.invalidateQueries({queryKey:["userLikes",r]})):Notification("failed","Failed to like comment",3e3)},U=async h=>{(await Ys(s,{comment_id:h,user_id:n.id})).message==="Comment unliked successfully"?(ne($=>$.filter(W=>!(Number(W.user_id)===Number(n.id)&&Number(W.id)===Number(h)))),t.invalidateQueries({queryKey:["userLikes",r]})):Notification("failed","Failed to like comment",3e3)};return f?e.jsxs(e.Fragment,{children:[e.jsx(pe,{}),e.jsx(re,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container pt-[5rem] text-[--text-primary-2]",children:f})})]}):e.jsxs(e.Fragment,{children:[e.jsx(pe,{profilePageRoute:l,userId:r}),u?e.jsx("div",{className:"flex justify-center w-full spinner-container pt-[5rem]",children:e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}})}):e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("div",{className:"user-profile-banner",children:e.jsx(re,{children:e.jsxs("div",{className:"flex gap-[1rem] sm:gap-[1.5rem] items-center flex-col sm:flex-row",children:[i.passport!==""?e.jsx("div",{className:"user-profile-image-wrapper w-[80px] h-[80px] sm:w-[90px] md:w-[110px]  sm:h-[90px] md:h-[110px] border-[3px] sm:border-4 border-white rounded-full overflow-hidden shadow-[0_0_5px_#000]",children:e.jsx("img",{src:`https://rsjobhub.com/${i.passport}`,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}):e.jsx("div",{className:"user-profile-image-wrapper w-[80px] h-[80px] sm:w-[90px] md:w-[110px]  sm:h-[90px] md:h-[110px] border-[3px] sm:border-4 border-white rounded-full overflow-hidden shadow-[0_0_5px_#000]",children:e.jsx("img",{src:Se,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-white text-[14px] sm:text-[16px] capitalize",children:[i.first_name," ",i.last_name]}),e.jsxs("div",{className:"flex items-center gap-2 mt-[.5rem] sm:mt-[1rem] justify-center sm:justify-start",children:[e.jsx("div",{className:"user-profile-online-indicator w-[12px] h-[12px] bg-[--primary] rounded-full"}),e.jsx("p",{className:"text-gray-300 text-[.8rem]",children:"User"})]})]})]})})}),e.jsx("section",{children:e.jsx(re,{children:e.jsxs("div",{className:"user-profile-main-section mt-[2rem] flex gap-[3rem]",children:[e.jsx(pn,{userid:r}),e.jsx("div",{className:"user-profile-content-area mb-[5rem]",children:B&&Oe?e.jsx(e.Fragment,{children:Array.from({length:5}).map((h,R)=>e.jsx(ds,{},R))}):B&&ue?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:"Error loading posts."})}):B&&Z.length===0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:"Nothing to see here yet"})}):B?e.jsxs(e.Fragment,{children:[ce.map(h=>e.jsxs("div",{className:"mb-[24px]",children:[e.jsxs("p",{className:"text-[.75rem] sm:text-[.8rem] font-[600]",children:["in ",e.jsx(O,{to:`/d/${h.post_id}/${h.id}`,className:"hover:underline",children:h.discussionTitle})]}),e.jsx(qe,{post:h,userLikedComments:J,handleUnLike:U,handleLike:j,onReplyClick:Te,onEditClick:Ue,showMoreMenu:Ee,toggleMoreMenu:_e,handleDeleteComment:()=>Me(h.id,"userPosts"),moreMenuRef:De,onReplyLink:Re},h.id)]},h.id)),Z.length>M&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(xe,{loadMoreDiscussions:()=>L(h=>h+X)})})})]}):V&&Ye?e.jsx(e.Fragment,{children:Array.from({length:3}).map((h,R)=>e.jsx(fn,{},R))}):V&&Je?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:"Error loading discussions."})}):V&&le.length===0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:"Nothing to see here yet"})}):V?e.jsxs(e.Fragment,{children:[ce.map(h=>e.jsx(ws,{discussion:h,handleMarkAsRead:is},h.id)),le.length>I&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(xe,{loadMoreDiscussions:()=>N(h=>h+X)})})})]}):K&&Ze?e.jsx(e.Fragment,{children:Array.from({length:5}).map((h,R)=>e.jsx(ds,{},R))}):K&&Xe?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:"Error loading likes."})}):K&&ve.length===0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:"Nothing to see here yet"})}):K?e.jsxs(e.Fragment,{children:[ce.map(h=>e.jsxs("div",{className:"mb-[24px]",children:[e.jsxs("p",{className:"text-[.75rem] sm:text-[.8rem] font-[600]",children:["in ",e.jsx(O,{to:`/d/${h.post_id}/${h.id}`,className:"hover:underline",children:h.discussionTitle})]}),e.jsx(qe,{post:h,userLikedComments:J,handleUnLike:U,handleLike:j,onReplyClick:Te,onEditClick:Ue,showMoreMenu:Ee,toggleMoreMenu:_e,handleDeleteComment:()=>Me(h.id,"userLikes"),moreMenuRef:De,onReplyLink:Re},h.id)]},h.liked_id)),ve.length>D&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(xe,{loadMoreDiscussions:()=>A(h=>h+X)})})})]}):F&&ss?e.jsx(e.Fragment,{children:Array.from({length:5}).map((h,R)=>e.jsx(ds,{},R))}):F&&ts?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:"Error loading mentions."})}):F&&ye.length===0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:"Nothing to see here yet"})}):F?e.jsxs(e.Fragment,{children:[ce.map(h=>e.jsxs("div",{className:"mb-[24px]",children:[e.jsxs("p",{className:"text-[.75rem] sm:text-[.8rem] font-[600]",children:["in ",e.jsx(O,{to:`/d/${h.post_id}/${h.id}`,className:"hover:underline",children:h.discussionTitle})]}),e.jsx(qe,{post:h,handleLike,onReplyClick:Te,showMoreMenu:Ee,toggleMoreMenu:_e,handleDeleteComment:Me,moreMenuRef:De},h.id)]},h.id)),ye.length>q&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(xe,{loadMoreDiscussions:()=>ee(h=>h+X)})})})]}):w?e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:w}):null})]})})})]})}),e.jsx(nt,{open:_,onClose:()=>k(!1),replyToDiscussionId:x,replyToCommentId:C})," ",e.jsx(rt,{open:E,onClose:()=>v(!1),editCommentDiscussionId:S==null?void 0:S.post_id,editCommentId:S==null?void 0:S.id,initialContent:S==null?void 0:S.content,onEditCommentContent:rs})]})};function gn(){const s=ae();return c.useEffect(()=>{const t=(r=>{switch(r){case"/":return"RSJOBHUB FORUM";case"/notifications":return"NOTIFICATIONS - RSJOBHUB FORUM";case(r.startsWith("/d/")?r:void 0):return"DISCUSSION - RSJOBHUB FORUM";case(r.startsWith("/tags")?r:void 0):case(r.startsWith("/tags/")?r:void 0):return"TAGS - RSJOBHUB FORUM";case(r.startsWith("/user")?r:void 0):return"PROFILE - RSJOBHUB FORUM";default:return"RSJOBHUB FORUM"}})(s.pathname);document.title=t},[s.pathname]),null}const jn=()=>{const{isAuthenticated:s}=Y();return s?e.jsx(mt,{}):e.jsx(ut,{to:"/redirect",replace:!0})},Le=()=>e.jsxs(e.Fragment,{children:[e.jsx(pe,{}),e.jsx("div",{className:"flex items-center justify-center w-full spinner-container pt-[5rem]",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-[.9rem] mb-[1rem]",children:"The Page you are looking for is not found"}),e.jsx(O,{to:"/",className:"text-[.9rem] text-[--primary] flex justify-center underline",children:"Back To Home"})]})})]}),vn=()=>e.jsx("div",{className:"flex items-center justify-center w-full spinner-container pt-[5rem]",children:e.jsx("div",{children:e.jsx("p",{className:"text-[.9rem] mb-[1rem]",children:"Redirecting..."})})});/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bn=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,t,r)=>r?r.toUpperCase():t.toLowerCase()),$s=s=>{const n=bn(s);return n.charAt(0).toUpperCase()+n.slice(1)},at=(...s)=>s.filter((n,t,r)=>!!n&&n.trim()!==""&&r.indexOf(n)===t).join(" ").trim(),Nn=s=>{for(const n in s)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=c.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...l},d)=>c.createElement("svg",{ref:d,...wn,width:n,height:n,stroke:s,strokeWidth:r?Number(t)*24/Number(n):t,className:at("lucide",a),...!i&&!Nn(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,m])=>c.createElement(u,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=(s,n)=>{const t=c.forwardRef(({className:r,...a},i)=>c.createElement(Cn,{ref:i,iconNode:n,className:at(`lucide-${yn($s(s))}`,`lucide-${s}`,r),...a}));return t.displayName=$s(s),t};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Sn=Ge("circle-check-big",kn);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Dn=Ge("circle-x",En);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Tn=Ge("refresh-cw",_n);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Rn=Ge("send",Mn),Ln=()=>{const[s,n]=c.useState([]),t={success:{icon:Sn,color:"text-green-600",bgColor:"bg-green-50",text:"Success",borderColor:"border-green-200"},failed:{icon:Dn,color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200",text:"Failed"},"in-progress":{icon:Tn,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",text:"In progress"},submitted:{icon:Rn,color:"text-[#1966d2]",bgColor:"bg-[#f0f6fe]",borderColor:"border-[#1966d240]",text:"Submitted"}},r=(i,o=null,l=7e3)=>{const d=Date.now()+Math.random(),u=t[i];if(!u){console.warn(`Unknown notification type: ${i}`);return}const m={id:d,type:i,message:o||u.text,...u};n(f=>[...f,m]),setTimeout(()=>{n(f=>f.filter(g=>g.id!==d))},l)};G.useEffect(()=>(window.Notification=r,()=>{delete window.Notification}),[]);const a=i=>{n(o=>o.filter(l=>l.id!==i))};return e.jsx("div",{className:"fixed z-[999] space-y-2 bottom-8 left-8",children:s.map(i=>{const o=i.icon;return e.jsxs("div",{className:`
              flex items-center gap-3 px-4 py-3 rounded-[.8rem] border
              ${i.bgColor} ${i.borderColor}
              transform transition-all duration-300 ease-in-out cursor-pointer min-w-[250px] max-w-[250px] w-[100%] shadow-md
            `,onClick:()=>a(i.id),children:[e.jsx(o,{className:`w-4 h-4 md:w-5 md:h-5 ${i.color} ${i.type==="in-progress"?"animate-spin":""}`}),e.jsx("span",{className:`font-medium ${i.color} text-[.75rem] md:text-[.8rem]`,children:i.message})]},i.id)})})};function Fn(){return e.jsx(e.Fragment,{children:e.jsx(ht,{children:e.jsxs(vt,{children:[e.jsx(gn,{}),e.jsx(Ln,{})," ",e.jsxs(xt,{children:[e.jsxs(Q,{element:e.jsx(jn,{}),children:[" ",e.jsx(Q,{path:"/",element:e.jsx(nn,{})}),e.jsx(Q,{path:"/d/:id",element:e.jsx(Is,{})}),e.jsx(Q,{path:"/d/:id/:commentId?",element:e.jsx(Is,{})}),e.jsx(Q,{path:"/tags",element:e.jsx(cn,{})}),e.jsx(Q,{path:"/tags/:tagID/:tagName",element:e.jsx(un,{})}),e.jsx(Q,{path:"/user/:userId",element:e.jsx(He,{})}),e.jsx(Q,{path:"/user/:userId/discussions",element:e.jsx(He,{})}),e.jsx(Q,{path:"/user/:userId/likes",element:e.jsx(He,{})}),e.jsx(Q,{path:"/user/:userId/mentions",element:e.jsx(He,{})}),e.jsx(Q,{path:"*",element:e.jsx(Le,{})}),e.jsx(Q,{path:"/d/*",element:e.jsx(Le,{})}),e.jsx(Q,{path:"/tags/*",element:e.jsx(Le,{})}),e.jsx(Q,{path:"/user/*",element:e.jsx(Le,{})}),e.jsx(Q,{path:"/user/:userId/*",element:e.jsx(Le,{})})]})," ",e.jsx(Q,{path:"/redirect",element:e.jsx(vn,{})})]})]})})})}const In=new ot;gt.createRoot(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsx(lt,{client:In,children:e.jsx(Fn,{})})}));
