import{j as e,u as je,a as ce,Q as xt,b as pt}from"./react-query-DprFZe7P.js";import{b as ft,a as l,u as ie,d as ee,R as P,e as Ge,L as A,g as gt,f as Cs,N as xs,h as jt,O as yt,B as bt,i as vt,j as K}from"./react-vendor-AOxAJ7Hw.js";import{G as B}from"./icons-Dyxe2h2u.js";import{r as Nt}from"./quill-editor-BjhXd_7i.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var Ye={},Ls;function wt(){if(Ls)return Ye;Ls=1;var s=ft();return Ye.createRoot=s.createRoot,Ye.hydrateRoot=s.hydrateRoot,Ye}var kt=wt();/*! js-cookie v3.0.5 | MIT */function Je(s){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)s[r]=n[r]}return s}var Ct={read:function(s){return s[0]==='"'&&(s=s.slice(1,-1)),s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(s){return encodeURIComponent(s).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function js(s,t){function n(a,i,o){if(!(typeof document>"u")){o=Je({},t,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),a=encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="";for(var u in o)o[u]&&(c+="; "+u,o[u]!==!0&&(c+="="+o[u].split(";")[0]));return document.cookie=a+"="+s.write(i,a)+c}}function r(a){if(!(typeof document>"u"||arguments.length&&!a)){for(var i=document.cookie?document.cookie.split("; "):[],o={},c=0;c<i.length;c++){var u=i[c].split("="),m=u.slice(1).join("=");try{var h=decodeURIComponent(u[0]);if(o[h]=s.read(m,h),a===h)break}catch{}}return a?o[a]:o}}return Object.create({set:n,get:r,remove:function(a,i){n(a,"",Je({},i,{expires:-1}))},withAttributes:function(a){return js(this.converter,Je({},this.attributes,a))},withConverter:function(a){return js(Je({},this.converter,a),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(s)}})}var O=js(Ct,{path:"/"});const qs=l.createContext(null),St=({children:s})=>{const t=ie(),r=new URLSearchParams(t.search).get("uin"),[a,i]=l.useState(null),[o,c]=l.useState(null),[u,m]=l.useState(null),[h,f]=l.useState(!0),[g,w]=l.useState(null),j=l.useRef(null),M=ee(),v="https://forumapi.rsjobhub.com/api",C=`${v}/auth/token`,x=`${v}/user`,p=async()=>{f(!0);try{let L=O.get("token"),N=O.get("userId"),R=O.get("userUIN");if(L&&N&&R){let S=await fetch(`${x}/${N}`,{method:"GET",headers:{Authorization:`Bearer ${L}`,SameSite:"Strict"}});if(S.ok){const b=await S.json();c(L),m(R),i(b)}else{const b=await fetch(`${C}/${R}`,{method:"GET",headers:{"Content-Type":"application/json",SameSite:"Strict"}});if(b.ok){const E=await b.json();c(E.token),m(E.user_uin),O.set("token",E.token,{expires:7,secure:!0,sameSite:"Strict",path:"/"}),O.set("userId",E.user_id,{expires:7,secure:!0,sameSite:"Strict",path:"/"}),O.set("userUIN",E.user_uin,{expires:7,secure:!0,sameSite:"Strict",path:"/"});const U=await fetch(`${x}/${E.user_id}`,{method:"GET",headers:{Authorization:`Bearer ${E.token}`,SameSite:"Strict"}});if(U.ok){const W=await U.json();i(W);return}}i(null),c(null),m(null),O.remove("token"),O.remove("userId"),O.remove("userUIN")}}else if(r){const S=await fetch(`${C}/${r}`,{method:"GET",headers:{"Content-Type":"application/json",SameSite:"Strict"}});if(S.ok){const b=await S.json();if(b.user_id===null)throw new Error("Invalid UIN");{c(b.token),m(b.user_uin),O.set("token",b.token,{expires:7,secure:!0,sameSite:"Strict",path:"/"}),O.set("userId",b.user_id,{expires:7,secure:!0,sameSite:"Strict",path:"/"}),O.set("userUIN",b.user_uin,{expires:7,secure:!0,sameSite:"Strict",path:"/"});const E=await fetch(`${x}/${b.user_id}`,{method:"GET",headers:{Authorization:`Bearer ${b.token}`,SameSite:"Strict"}});if(E.ok){const U=await E.json();i(U)}else throw new Error("Failed to fetch User Data")}}else throw new Error("Failed to Fetch Token")}else M(-1)}catch(L){console.error(L),O.remove("token"),O.remove("userId"),O.remove("userUIN"),c(null),m(null),i(null),w("Failed to Authenticate")}finally{f(!1)}},D=async()=>{try{let L=O.get("token"),N=O.get("userId"),R=O.get("userUIN");if(L&&N&&R){let S=await fetch(`${x}/${N}`,{method:"GET",headers:{Authorization:`Bearer ${L}`,SameSite:"Strict"}});if(S.ok){const b=await S.json();c(L),m(R),i(b)}else{const b=await fetch(`${C}/${R}`,{method:"GET",headers:{"Content-Type":"application/json",SameSite:"Strict"}});if(b.ok){const E=await b.json();c(E.token),m(E.user_uin),O.set("token",E.token,{expires:7,secure:!0,sameSite:"Strict",path:"/"}),O.set("userId",E.user_id,{expires:7,secure:!0,sameSite:"Strict",path:"/"}),O.set("userUIN",E.user_uin,{expires:7,secure:!0,sameSite:"Strict",path:"/"});const U=await fetch(`${x}/${E.user_id}`,{method:"GET",headers:{Authorization:`Bearer ${E.token}`,SameSite:"Strict"}});if(U.ok){const W=await U.json();i(W);return}}i(null),c(null),m(null),O.remove("token"),O.remove("userId"),O.remove("userUIN")}}}catch(L){console.error("Silent token refresh failed:",L)}},F=async(L,N={})=>{const R={...N,method:N.method||"GET",headers:{...N.headers,Authorization:`Bearer ${o}`,SameSite:"Strict"}};let S=await fetch(L,R),b=await S.text(),E={};try{E=b?JSON.parse(b):{}}catch{E={}}if(E.error==="Invalid or expired token"){await D();const U=sessionStorage.getItem("token");S=await fetch(L,{...R,headers:{...R.headers,Authorization:`Bearer ${U}`}}),b=await S.text();try{E=b?JSON.parse(b):{}}catch{E={}}}return E};l.useEffect(()=>{if(o&&a)return j.current&&clearInterval(j.current),j.current=setInterval(()=>{D()},55*60*1e3),()=>{j.current&&clearInterval(j.current)}},[o,a]),l.useEffect(()=>{p()},[]);const T={currentUser:a,token:o,loading:h,error:g,isAuthenticated:!!a,autoAuthenticate:p,authFetch:F,logout:()=>{i(null),c(null),O.remove("token"),O.remove("userId"),O.remove("userUIN"),window.location.href="https://rsjobhub.com/logout.php"}};return e.jsx(qs.Provider,{value:T,children:h?e.jsx("div",{className:"mt-[2rem] flex items-center justify-center w-full spinner-container",children:e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}})}):s})};function G(){return l.useContext(qs)}function ys(){return ys=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(s[r]=n[r])}return s},ys.apply(null,arguments)}function Ws(s,t){if(s==null)return{};var n={};for(var r in s)if({}.hasOwnProperty.call(s,r)){if(t.indexOf(r)!==-1)continue;n[r]=s[r]}return n}function bs(s,t){return bs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},bs(s,t)}function Vs(s,t){s.prototype=Object.create(t.prototype),s.prototype.constructor=s,bs(s,t)}function Et(s,t){return s.classList?!!t&&s.classList.contains(t):(" "+(s.className.baseVal||s.className)+" ").indexOf(" "+t+" ")!==-1}function Dt(s,t){s.classList?s.classList.add(t):Et(s,t)||(typeof s.className=="string"?s.className=s.className+" "+t:s.setAttribute("class",(s.className&&s.className.baseVal||"")+" "+t))}function Fs(s,t){return s.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function _t(s,t){s.classList?s.classList.remove(t):typeof s.className=="string"?s.className=Fs(s.className,t):s.setAttribute("class",Fs(s.className&&s.className.baseVal||"",t))}const $s={disabled:!1},Ks=P.createContext(null);var Qs=function(t){return t.scrollTop},$e="unmounted",xe="exited",pe="entering",Se="entered",vs="exiting",ae=function(s){Vs(t,s);function t(r,a){var i;i=s.call(this,r,a)||this;var o=a,c=o&&!o.isMounting?r.enter:r.appear,u;return i.appearStatus=null,r.in?c?(u=xe,i.appearStatus=pe):u=Se:r.unmountOnExit||r.mountOnEnter?u=$e:u=xe,i.state={status:u},i.nextCallback=null,i}t.getDerivedStateFromProps=function(a,i){var o=a.in;return o&&i.status===$e?{status:xe}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(a){var i=null;if(a!==this.props){var o=this.state.status;this.props.in?o!==pe&&o!==Se&&(i=pe):(o===pe||o===Se)&&(i=vs)}this.updateStatus(!1,i)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var a=this.props.timeout,i,o,c;return i=o=c=a,a!=null&&typeof a!="number"&&(i=a.exit,o=a.enter,c=a.appear!==void 0?a.appear:o),{exit:i,enter:o,appear:c}},n.updateStatus=function(a,i){if(a===void 0&&(a=!1),i!==null)if(this.cancelNextCallback(),i===pe){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Ge.findDOMNode(this);o&&Qs(o)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===xe&&this.setState({status:$e})},n.performEnter=function(a){var i=this,o=this.props.enter,c=this.context?this.context.isMounting:a,u=this.props.nodeRef?[c]:[Ge.findDOMNode(this),c],m=u[0],h=u[1],f=this.getTimeouts(),g=c?f.appear:f.enter;if(!a&&!o||$s.disabled){this.safeSetState({status:Se},function(){i.props.onEntered(m)});return}this.props.onEnter(m,h),this.safeSetState({status:pe},function(){i.props.onEntering(m,h),i.onTransitionEnd(g,function(){i.safeSetState({status:Se},function(){i.props.onEntered(m,h)})})})},n.performExit=function(){var a=this,i=this.props.exit,o=this.getTimeouts(),c=this.props.nodeRef?void 0:Ge.findDOMNode(this);if(!i||$s.disabled){this.safeSetState({status:xe},function(){a.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:vs},function(){a.props.onExiting(c),a.onTransitionEnd(o.exit,function(){a.safeSetState({status:xe},function(){a.props.onExited(c)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(a,i){i=this.setNextCallback(i),this.setState(a,i)},n.setNextCallback=function(a){var i=this,o=!0;return this.nextCallback=function(c){o&&(o=!1,i.nextCallback=null,a(c))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(a,i){this.setNextCallback(i);var o=this.props.nodeRef?this.props.nodeRef.current:Ge.findDOMNode(this),c=a==null&&!this.props.addEndListener;if(!o||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],m=u[0],h=u[1];this.props.addEndListener(m,h)}a!=null&&setTimeout(this.nextCallback,a)},n.render=function(){var a=this.state.status;if(a===$e)return null;var i=this.props,o=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var c=Ws(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return P.createElement(Ks.Provider,{value:null},typeof o=="function"?o(a,c):P.cloneElement(P.Children.only(o),c))},t}(P.Component);ae.contextType=Ks;ae.propTypes={};function ke(){}ae.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ke,onEntering:ke,onEntered:ke,onExit:ke,onExiting:ke,onExited:ke};ae.UNMOUNTED=$e;ae.EXITED=xe;ae.ENTERING=pe;ae.ENTERED=Se;ae.EXITING=vs;var Mt=function(t,n){return t&&n&&n.split(" ").forEach(function(r){return Dt(t,r)})},ps=function(t,n){return t&&n&&n.split(" ").forEach(function(r){return _t(t,r)})},Q=function(s){Vs(t,s);function t(){for(var r,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=s.call.apply(s,[this].concat(i))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(c,u){var m=r.resolveArguments(c,u),h=m[0],f=m[1];r.removeClasses(h,"exit"),r.addClass(h,f?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(c,u)},r.onEntering=function(c,u){var m=r.resolveArguments(c,u),h=m[0],f=m[1],g=f?"appear":"enter";r.addClass(h,g,"active"),r.props.onEntering&&r.props.onEntering(c,u)},r.onEntered=function(c,u){var m=r.resolveArguments(c,u),h=m[0],f=m[1],g=f?"appear":"enter";r.removeClasses(h,g),r.addClass(h,g,"done"),r.props.onEntered&&r.props.onEntered(c,u)},r.onExit=function(c){var u=r.resolveArguments(c),m=u[0];r.removeClasses(m,"appear"),r.removeClasses(m,"enter"),r.addClass(m,"exit","base"),r.props.onExit&&r.props.onExit(c)},r.onExiting=function(c){var u=r.resolveArguments(c),m=u[0];r.addClass(m,"exit","active"),r.props.onExiting&&r.props.onExiting(c)},r.onExited=function(c){var u=r.resolveArguments(c),m=u[0];r.removeClasses(m,"exit"),r.addClass(m,"exit","done"),r.props.onExited&&r.props.onExited(c)},r.resolveArguments=function(c,u){return r.props.nodeRef?[r.props.nodeRef.current,c]:[c,u]},r.getClassNames=function(c){var u=r.props.classNames,m=typeof u=="string",h=m&&u?u+"-":"",f=m?""+h+c:u[c],g=m?f+"-active":u[c+"Active"],w=m?f+"-done":u[c+"Done"];return{baseClassName:f,activeClassName:g,doneClassName:w}},r}var n=t.prototype;return n.addClass=function(a,i,o){var c=this.getClassNames(i)[o+"ClassName"],u=this.getClassNames("enter"),m=u.doneClassName;i==="appear"&&o==="done"&&m&&(c+=" "+m),o==="active"&&a&&Qs(a),c&&(this.appliedClasses[i][o]=c,Mt(a,c))},n.removeClasses=function(a,i){var o=this.appliedClasses[i],c=o.base,u=o.active,m=o.done;this.appliedClasses[i]={},c&&ps(a,c),u&&ps(a,u),m&&ps(a,m)},n.render=function(){var a=this.props;a.classNames;var i=Ws(a,["classNames"]);return P.createElement(ae,ys({},i,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(P.Component);Q.defaultProps={classNames:""};Q.propTypes={};function Gs(s){return B({attr:{version:"1.1",viewBox:"0 0 17 17"},child:[{tag:"g",attr:{},child:[]},{tag:"path",attr:{d:"M6 8h-6v-6h1v4.109c1.013-3.193 4.036-5.484 7.5-5.484 3.506 0 6.621 2.36 7.574 5.739l-0.963 0.271c-0.832-2.95-3.551-5.011-6.611-5.011-3.226 0.001-6.016 2.276-6.708 5.376h4.208v1zM11 9v1h4.208c-0.693 3.101-3.479 5.375-6.708 5.375-3.062 0-5.78-2.061-6.611-5.011l-0.963 0.271c0.952 3.379 4.067 5.739 7.574 5.739 3.459 0 6.475-2.28 7.5-5.482v4.108h1v-6h-6z"},child:[]}]})(s)}function Ys(s){return B({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"},child:[]}]})(s)}function es(s){return B({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"},child:[]}]})(s)}function Tt(s){return B({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M64 144a48 48 0 1 0 0-96 48 48 0 1 0 0 96zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L192 64zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zM64 464a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm48-208a48 48 0 1 0 -96 0 48 48 0 1 0 96 0z"},child:[]}]})(s)}function fs(s){return B({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152L0 424c0 48.6 39.4 88 88 88l272 0c48.6 0 88-39.4 88-88l0-112c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 112c0 22.1-17.9 40-40 40L88 464c-22.1 0-40-17.9-40-40l0-272c0-22.1 17.9-40 40-40l112 0c13.3 0 24-10.7 24-24s-10.7-24-24-24L88 64z"},child:[]}]})(s)}const ne=({children:s})=>e.jsx("div",{className:"forum-container",children:s});function Js(s){return B({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"},child:[]}]})(s)}function ye(s){return B({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.707 3.293a1 1 0 010 1.414L5.414 7H11a7 7 0 017 7v2a1 1 0 11-2 0v-2a5 5 0 00-5-5H5.414l2.293 2.293a1 1 0 11-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"},child:[]}]})(s)}function Ce(s){return B({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 15.0006L7.75732 10.758L9.17154 9.34375L12 12.1722L14.8284 9.34375L16.2426 10.758L12 15.0006Z"},child:[]}]})(s)}function Ae(s){return B({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 11H11V17H9V11ZM13 11H15V17H13V11ZM9 4V6H15V4H9Z"},child:[]}]})(s)}function Ie(s){return B({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16 14h.5c.827 0 1.5-.673 1.5-1.5v-9c0-.827-.673-1.5-1.5-1.5h-13C2.673 2 2 2.673 2 3.5V18l5.333-4H16zm-9.333-2L4 14V4h12v8H6.667z"},child:[]},{tag:"path",attr:{d:"M20.5 8H20v6.001c0 1.1-.893 1.993-1.99 1.999H8v.5c0 .827.673 1.5 1.5 1.5h7.167L22 22V9.5c0-.827-.673-1.5-1.5-1.5z"},child:[]}]})(s)}function Is(s){return B({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(s)}function Zs(s){return B({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 8h-5.612l1.123-3.367c.202-.608.1-1.282-.275-1.802S14.253 2 13.612 2H12c-.297 0-.578.132-.769.36L6.531 8H4c-1.103 0-2 .897-2 2v9c0 1.103.897 2 2 2h13.307a2.01 2.01 0 0 0 1.873-1.298l2.757-7.351A1 1 0 0 0 22 12v-2c0-1.103-.897-2-2-2zM4 10h2v9H4v-9zm16 1.819L17.307 19H8V9.362L12.468 4h1.146l-1.562 4.683A.998.998 0 0 0 13 10h7v1.819z"},child:[]}]})(s)}function Xs(s){return B({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2C6.486 2 2 5.589 2 10c0 2.908 1.898 5.516 5 6.934V22l5.34-4.005C17.697 17.852 22 14.32 22 10c0-4.411-4.486-8-10-8zm0 14h-.333L9 18v-2.417l-.641-.247C5.67 14.301 4 12.256 4 10c0-3.309 3.589-6 8-6s8 2.691 8 6-3.589 6-8 6z"},child:[]}]})(s)}function Rt(s){return B({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"},child:[]},{tag:"circle",attr:{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor"},child:[]}]})(s)}function Ns(s){return B({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19"},child:[]},{tag:"path",attr:{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z"},child:[]},{tag:"circle",attr:{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor"},child:[]}]})(s)}function Lt(s){return B({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"},child:[]}]})(s)}function Pe(s){return B({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m14.06 9.02.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83a.996.996 0 0 0 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"},child:[]}]})(s)}function Ft(s){return B({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M4 11.29l1-1v1.42l-1.15 1.14L3 12.5V10H1.5L1 9.5v-8l.5-.5h12l.5.5V6h-1V2H2v7h1.5l.5.5v1.79zM10.29 13l1.86 1.85.85-.35V13h1.5l.5-.5v-5l-.5-.5h-8l-.5.5v5l.5.5h3.79zm.21-1H7V8h7v4h-1.5l-.5.5v.79l-1.15-1.14-.35-.15z"},child:[]}]})(s)}const $t=({location:s,navigate:t,handleLogoClick:n,homePage:r,isDiscussionPage:a,isTagsPage:i,isProfilePage:o,profilePageRoute:c,onStartDiscussion:u,discussionOwnerId:m,userId:h,onStartDiscussionReply:f,onStartRenameDiscussion:g,deleteDiscussion:w})=>{const{currentUser:j,logout:M}=G(),[v,C]=l.useState(!1),[x,p]=l.useState(!1),[D,F]=l.useState("all-discussions"),_=l.useRef(null),T=l.useRef(null),L=l.useRef(null),N=l.useRef(null),R=E=>{F(E)},S=()=>{C(!v),x&&p(!1)},b=()=>{p(!x),v&&C(!1)};return l.useEffect(()=>{const E=U=>{v&&_.current&&!_.current.contains(U.target)&&T.current&&!T.current.contains(U.target)&&C(!1),x&&L.current&&!L.current.contains(U.target)&&N.current&&!N.current.contains(U.target)&&p(!1)};return document.addEventListener("mousedown",E),v||x?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.removeEventListener("mousedown",E),document.body.style.overflow=""}},[v,x]),e.jsx("nav",{className:"mobile-nav",children:e.jsx(ne,{children:e.jsx("div",{className:"max-w-[1280px] my-0 mx-auto",children:e.jsx("div",{className:"flex h-[4rem] items-center justify-between",children:e.jsxs("div",{className:"relative w-full",children:[e.jsxs("nav",{className:"mobile-navbar",children:[r?e.jsx("button",{className:"menu-button",onClick:S,"aria-label":"Toggle menu",ref:T,children:e.jsx(Js,{className:"menuIcon"})}):e.jsx(A,{className:"flex items-center gap-1 logo-link",onClick:n,children:e.jsx("div",{className:"back-to-home-wrapper",children:e.jsx(es,{className:"back-to-home"})})}),r&&e.jsxs("div",{className:"navbar-title",onClick:b,ref:N,children:[e.jsx("span",{children:"All Discussions"}),e.jsx(Ce,{className:"navbar-title-caret"})]}),i&&e.jsxs("div",{className:"navbar-title",onClick:b,ref:N,children:[e.jsx("span",{children:"Tags"}),e.jsx(Ce,{className:"navbar-title-caret"})]}),o&&e.jsx(e.Fragment,{children:c==="posts"?e.jsxs("div",{className:"navbar-title",onClick:b,ref:N,children:[e.jsx("span",{children:"Posts"}),e.jsx(Ce,{className:"navbar-title-caret"})]}):null}),o&&e.jsx(e.Fragment,{children:c==="discussions"?e.jsxs("div",{className:"navbar-title",onClick:b,ref:N,children:[e.jsx("span",{children:"Discussions"}),e.jsx(Ce,{className:"navbar-title-caret"})]}):null}),o&&e.jsx(e.Fragment,{children:c==="likes"?e.jsxs("div",{className:"navbar-title",onClick:b,ref:N,children:[e.jsx("span",{children:"Likes"}),e.jsx(Ce,{className:"navbar-title-caret"})]}):null}),o&&e.jsx(e.Fragment,{children:c==="mentions"?e.jsxs("div",{className:"navbar-title",onClick:b,ref:N,children:[e.jsx("span",{children:"Mentions"}),e.jsx(Ce,{className:"navbar-title-caret"})]}):null}),r&&e.jsx("button",{className:"compose-button","aria-label":"Compose new discussion",onClick:u,children:e.jsx(fs,{className:"compose-button-icon"})}),a&&e.jsx("button",{className:"flex items-center gap-1 logo-link",onClick:b,ref:N,children:e.jsx("div",{className:"back-to-home-wrapper",children:e.jsx(Lt,{className:"back-to-home"})})}),i&&e.jsx("button",{className:"compose-button","aria-label":"Compose new discussion",onClick:u,children:e.jsx(fs,{className:"compose-button-icon"})}),o&&e.jsx("button",{className:"invisible compose-button",children:e.jsx(fs,{className:"compose-button-icon"})})]}),e.jsx("div",{className:`overlay ${v||x?"active":""}`,onClick:()=>{C(!1),p(!1)}}),e.jsxs("div",{className:`slide-menu ${v?"open":""}`,ref:_,children:[e.jsx(A,{to:"https://rsjobhub.com/candidate-dashboard",children:e.jsxs("div",{className:"flex items-center gap-2 menu-header logo-link",children:[e.jsx("div",{className:"back-to-home-wrapper",children:e.jsx(es,{className:"back-to-home"})}),e.jsx("h2",{className:"menu-title",children:"back to dashboard"})]})}),e.jsx("div",{className:"px-[1rem] sm:px-[.8rem]",children:e.jsxs("div",{className:"relative menu-items",children:[e.jsxs(A,{to:`/user/${j.id}`,className:"menu-item",children:[e.jsx("span",{children:"Profile"}),e.jsx("span",{children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#071d2980",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-user",children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})})]}),e.jsxs(A,{onClick:()=>M(),className:"menu-item mobile-logout",children:[e.jsx("span",{children:"Logout"}),e.jsx("span",{children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#d62323",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-log-out",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]})})]})]})})]}),r&&e.jsxs("div",{className:`dropdown-menu ${x?"open":""}`,ref:L,children:[e.jsxs(A,{to:"/",className:`dropdown-item ${s.pathname==="/"?"active":""}`,onClick:()=>{R("all-discussions"),p(!1)},children:[e.jsx("div",{className:"dropdown-icon",children:e.jsx(Ie,{})}),e.jsx("span",{children:"All Discussions"})]}),e.jsxs(A,{to:"/tags",className:`dropdown-item ${s.pathname.startsWith("/tags")?"active":""}`,onClick:()=>{R("tags"),p(!1)},children:[e.jsx("div",{className:"dropdown-icon",children:e.jsx(Ns,{})}),e.jsx("span",{children:"Tags"})]})]}),i&&e.jsxs("div",{className:`dropdown-menu ${x?"open":""}`,ref:L,children:[e.jsxs(A,{to:"/",className:`dropdown-item ${s.pathname==="/"?"active":""}`,onClick:()=>{R("all-discussions"),p(!1)},children:[e.jsx("div",{className:"dropdown-icon",children:e.jsx(Ie,{})}),e.jsx("span",{children:"All Discussions"})]}),e.jsxs(A,{to:"/tags",className:`dropdown-item ${s.pathname.startsWith("/tags")?"active":""}`,onClick:()=>{R("tags"),p(!1)},children:[e.jsx("div",{className:"dropdown-icon",children:e.jsx(Ns,{})}),e.jsx("span",{children:"Tags"})]})]}),o&&e.jsxs("div",{className:`dropdown-menu ${x?"open":""}`,ref:L,children:[e.jsxs(A,{to:`/user/${h}`,className:`dropdown-item ${c==="posts"?"active":""}`,onClick:()=>{p(!1)},children:[e.jsx("div",{className:"dropdown-icon",children:e.jsx(Ie,{})}),e.jsx("span",{children:"Posts"})]}),e.jsxs(A,{to:`/user/${h}/discussions`,className:`dropdown-item ${c==="discussions"?"active":""}`,onClick:()=>{R("tags"),p(!1)},children:[e.jsx("div",{className:"dropdown-icon",children:e.jsx(Tt,{})}),e.jsx("span",{children:"Discussions"})]}),e.jsxs(A,{to:`/user/${h}/likes`,className:`dropdown-item ${c==="likes"?"active":""}`,onClick:()=>{R("tags"),p(!1)},children:[e.jsx("div",{className:"dropdown-icon",children:e.jsx(Zs,{})}),e.jsx("span",{children:"Likes"})]})]}),a&&e.jsxs("div",{className:`dropdown-menu ${x?"open":""}`,ref:L,children:[e.jsxs("div",{onClick:f,className:"dropdown-item",children:[" ",e.jsx("div",{className:"dropdown-icon",children:e.jsx(ye,{})}),e.jsx("span",{children:"Reply"})]}),j.id===m?e.jsxs(e.Fragment,{children:[e.jsxs("div",{onClick:g,className:"dropdown-item",children:[" ",e.jsx("div",{className:"dropdown-icon",children:e.jsx(Pe,{})}),e.jsx("span",{children:"Rename"})]}),e.jsxs("button",{onClick:w,className:"dropdown-item w-full",children:[" ",e.jsx("div",{className:"dropdown-icon",children:e.jsx(Ae,{})}),e.jsx("span",{children:"Delete"})]})]}):null]})]})})})})})};function De(s){return B({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"},child:[]}]})(s)}const _e="/assets/defaultProfile-HGQlLIvo.png",ge=({openDiscussionSidebarMenu:s,closeDiscussionSidebarMenu:t,isDiscussionSidebarMenuActive:n,profilePageRoute:r,onStartDiscussion:a,discussionOwnerId:i,userId:o,onStartDiscussionReply:c,onStartRenameDiscussion:u,deleteDiscussion:m})=>{const{currentUser:h,logout:f}=G(),[g,w]=l.useState(!1),j=l.useRef(null),M=l.useRef(null),v=ee(),C=ie(),[x,p]=l.useState(null),[D,F]=l.useState(null),[_,T]=l.useState(null),[L,N]=l.useState(null),[R,S]=l.useState(null),[b,E]=l.useState(null);l.useEffect(()=>{p(!1),F(!1),T(!1),N(!1),S(!1),E(!1),C.pathname==="/"?(p(!0),T(!0)):C.pathname.startsWith("/d")?(N(!0),F(!0)):C.pathname.startsWith("/tags")?(S(!0),F(!0)):(C.pathname.startsWith("/user")&&E(!0),F(!0))},[C.pathname]);const U=Y=>{Y.preventDefault(),C.pathname==="/"?v("https://rsjobhub.com/candidate-dashboard"):v("/")},W=Y=>{M.current&&!M.current.contains(Y.target)&&j.current&&!j.current.contains(Y.target)&&g&&w(!1)};l.useEffect(()=>(document.addEventListener("mousedown",W),()=>{document.removeEventListener("mousedown",W)}),[g]);const oe=()=>{w(!g)};return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:"fixed-nav desktop-nav",children:e.jsxs(ne,{children:[e.jsx("div",{className:"max-w-[1280px] my-0 mx-auto",children:e.jsxs("div",{className:"flex h-[4rem] items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[x&&e.jsxs(A,{to:"https://rsjobhub.com/candidate-dashboard",className:"flex items-center gap-1 logo-link",children:[e.jsx("div",{className:"back-to-home-wrapper",children:e.jsx(es,{className:"back-to-home"})}),"back to dashboard"]}),D&&e.jsx(A,{className:"flex items-center gap-1 logo-link",onClick:U,children:e.jsx("div",{className:"back-to-home-wrapper",children:e.jsx(es,{className:"back-to-home"})})}),n?e.jsx(e.Fragment,{children:L&&e.jsx("button",{className:"discussionSidebarToggle",onClick:t,children:e.jsx(De,{className:"discussionSidebarToggleIcon"})})}):e.jsx(e.Fragment,{children:L&&e.jsx("button",{className:"discussionSidebarToggle",onClick:s,children:e.jsx(Js,{className:"discussionSidebarToggleIcon"})})})]}),e.jsxs("div",{className:"flex items-center relative right-[2.45rem]",children:[h.passport!==""?e.jsx("div",{className:"userProfileImage w-[34.5px] h-[34.5px] rounded-[5rem] overflow-auto mr-[1rem]",children:e.jsx("img",{src:`https://rsjobhub.com/${h.passport}`,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}):e.jsx("div",{className:"userProfileImage w-[35px] h-[35px] rounded-[5rem] overflow-auto mr-[1rem]",children:e.jsx("img",{src:_e,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}),e.jsxs("button",{className:`userProfileName ${g?"focus":""} flex items-center gap-[.5rem]`,onClick:oe,ref:j,children:[e.jsxs("p",{children:[h.first_name," ",h.last_name]})," ",g?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#000000",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-up",children:e.jsx("path",{d:"m18 15-6-6-6 6"})}):e.jsx("span",{className:"userProfileChevron",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#000000",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-down",children:e.jsx("path",{d:"m6 9 6 6 6-6"})})})]})]})]})}),e.jsx("div",{className:`absolute profile-drop-box ${g?"visible":""}`,ref:M,children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsxs(A,{to:`/user/${h.id}`,children:[" ",e.jsxs("span",{className:"flex items-center gap-3",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#000000",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-user",children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),e.jsx("p",{children:"Profile"})]})]})}),e.jsx("li",{children:e.jsxs(A,{onClick:()=>f(),children:[" ",e.jsxs("span",{className:"flex items-center gap-3",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#d62323",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-log-out",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]}),e.jsx("p",{style:{color:"#d62323"},children:"Logout"})," "]})]})})]})})]})}),e.jsx($t,{location:C,navigate:v,handleLogoClick:U,homePage:_,isDiscussionPage:L,isTagsPage:R,isProfilePage:b,profilePageRoute:r,onStartDiscussion:a,discussionOwnerId:i,userId:o,onStartDiscussionReply:c,onStartRenameDiscussion:u,deleteDiscussion:m})]})},Ss=({onAllDiscussionsClick:s,currentPath:t,onStartDiscussion:n})=>{const[r,a]=l.useState(null),i=o=>{a(o)};return l.useEffect(()=>{if(t==="/")i("all-discussions");else if(t==="/tags")i("tags");else return},[t]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"sidebar",children:e.jsxs("div",{className:"sidebar-content",children:[e.jsx("button",{className:"start-discussion-button",onClick:n,children:"Start a Discussion"}),e.jsx("nav",{className:"mt-2 sidebar-nav",children:e.jsxs("ul",{className:"nav-list",children:[e.jsx("li",{className:"nav-item",children:e.jsxs(A,{to:"/",className:`nav-link ${r==="all-discussions"?"active":""}`,onClick:()=>{i("all-discussions"),s()},children:[e.jsxs("div",{className:"nav-icon",children:[e.jsx(Ie,{})," "]}),e.jsx("span",{children:"All Discussions"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(A,{to:"/tags",className:`nav-link ${r==="tags"?"active":""}`,onClick:()=>i("tags"),children:[e.jsxs("div",{className:"nav-icon",children:[e.jsx(Ns,{})," "]}),e.jsx("span",{children:"Tags"})]})})]})})]})})})},fe=({loadMoreDiscussions:s,isLoading:t})=>e.jsx("button",{className:"load-more-button",onClick:s,disabled:t,children:"load more"}),It=864e5,Ut=6e4,Ot=36e5,Us=Symbol.for("constructDateFrom");function et(s,t){return typeof s=="function"?s(t):s&&typeof s=="object"&&Us in s?s[Us](t):s instanceof Date?new s.constructor(t):new Date(t)}function re(s,t){return et(s,s)}function Os(s){const t=re(s),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+s-+n}function be(s,...t){const n=et.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function As(s,t){const n=re(s);return n.setHours(0,0,0,0),n}function At(s,t,n){const[r,a]=be(n==null?void 0:n.in,s,t),i=As(r),o=As(a),c=+i-Os(i),u=+o-Os(o);return Math.round((c-u)/It)}function Ue(s,t){const n=+re(s)-+re(t);return n<0?-1:n>0?1:n}function Pt(s,t,n){const[r,a]=be(n==null?void 0:n.in,s,t),i=r.getFullYear()-a.getFullYear(),o=r.getMonth()-a.getMonth();return i*12+o}function zt(s,t,n){const[r,a]=be(n==null?void 0:n.in,s,t);return r.getFullYear()-a.getFullYear()}function st(s,t,n){const[r,a]=be(n==null?void 0:n.in,s,t),i=Ps(r,a),o=Math.abs(At(r,a));r.setDate(r.getDate()-i*o);const c=+(Ps(r,a)===-i),u=i*(o-c);return u===0?0:u}function Ps(s,t){const n=s.getFullYear()-t.getFullYear()||s.getMonth()-t.getMonth()||s.getDate()-t.getDate()||s.getHours()-t.getHours()||s.getMinutes()-t.getMinutes()||s.getSeconds()-t.getSeconds()||s.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function ss(s){return t=>{const r=(s?Math[s]:Math.trunc)(t);return r===0?0:r}}function Bt(s,t,n){const[r,a]=be(n==null?void 0:n.in,s,t),i=(+r-+a)/Ot;return ss(n==null?void 0:n.roundingMethod)(i)}function tt(s,t){return+re(s)-+re(t)}function Ht(s,t,n){const r=tt(s,t)/Ut;return ss(n==null?void 0:n.roundingMethod)(r)}function qt(s,t){const n=re(s);return n.setHours(23,59,59,999),n}function Wt(s,t){const n=re(s),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Vt(s,t){const n=re(s);return+qt(n)==+Wt(n)}function Kt(s,t,n){const[r,a,i]=be(n==null?void 0:n.in,s,s,t),o=Ue(a,i),c=Math.abs(Pt(a,i));if(c<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-o*c);let u=Ue(a,i)===-o;Vt(r)&&c===1&&Ue(r,i)===1&&(u=!1);const m=o*(c-+u);return m===0?0:m}function Qt(s,t,n){const r=tt(s,t)/1e3;return ss(n==null?void 0:n.roundingMethod)(r)}function Gt(s,t,n){const r=st(s,t,n)/7;return ss(n==null?void 0:n.roundingMethod)(r)}function Yt(s,t,n){const[r,a]=be(n==null?void 0:n.in,s,t),i=Ue(r,a),o=Math.abs(zt(r,a));r.setFullYear(1584),a.setFullYear(1584);const c=Ue(r,a)===-i,u=i*(o-+c);return u===0?0:u}function Ee({createdAt:s}){const[t,n]=l.useState("");return l.useEffect(()=>{if(s){const r=()=>{try{const i=new Date(s),o=new Date,c=Qt(o,i),u=Ht(o,i),m=Bt(o,i),h=st(o,i),f=Gt(o,i),g=Kt(o,i),w=Yt(o,i);c<60?n("few seconds ago"):u<2?n("1 minute ago"):u<60?n(`${u} minutes ago`):m<2?n("an hour ago"):m<24?n(`${m} hours ago`):h<2?n("1 day ago"):h<7?n(`${h} days ago`):f<2?n("a week ago"):f<4?n(`${f} weeks ago`):g<2?n("a month ago"):g<12?n(`${g} months ago`):w<2?n("a year ago"):n(`${w} years ago`)}catch(i){console.error("Error parsing date:",i),n("Invalid date")}};r();const a=setInterval(r,1e3);return()=>clearInterval(a)}else n(" ")},[s]),`${t}`}const Es=s=>s>=1e3?(s/1e3).toFixed(1)+"K":s,Ds=({discussion:s,handleMarkAsRead:t})=>e.jsx(A,{to:`/d/${s.id}`,onClick:()=>t(s.id),children:e.jsxs("li",{className:`discussion-item ${s.is_read?"":"unread"}`,children:[s.author.passport!==""?e.jsx("div",{className:"userProfileImage w-[32px] h-[32px] sm:w-[35px] sm:h-[35px] rounded-[5rem] overflow-auto mr-[8px] sm:mr-[1rem]",children:e.jsx("img",{src:`https://rsjobhub.com/${s.author.passport}`,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}):e.jsx("div",{className:"userProfileImage w-[32px] h-[32px] sm:w-[35px] sm:h-[35px] rounded-[5rem] overflow-auto mr-[8px] sm:mr-[1rem]",children:e.jsx("img",{src:_e,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}),e.jsxs("div",{className:"discussion-content",children:[e.jsx("h3",{className:"discussion-title",children:s.title}),e.jsxs("div",{className:"discussion-meta",children:[e.jsx("span",{className:"discussion-tag",children:s.tag}),s.comments_count>1&&s.last_commented_by!==null?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"reply-icon",children:e.jsx(ye,{})}),e.jsx("span",{className:"replied-by",children:s.last_commented_by}),e.jsxs("span",{className:"flex gap-1 replied-time",children:[e.jsx("span",{children:"replied"}),e.jsx(Ee,{createdAt:s.last_commented_at})]})]}):e.jsx("div",{children:e.jsxs("span",{className:"flex gap-1 replied-time",children:[e.jsx("span",{children:"started"}),e.jsx(Ee,{createdAt:s.created_at})]})})]})]}),e.jsx("div",{className:"discussion-info",children:e.jsxs("div",{className:"comment-count",children:[e.jsx(Xs,{className:"comment-count-icon"}),e.jsx("span",{children:Es(s.comments_count)})]})})]})});var Jt=Nt();const ts=gt(Jt),q="https://forumapi.rsjobhub.com/api",nt=async s=>{try{const t=await s(`${q}/posts`);if(t)return t;console.log(t)}catch(t){throw console.error("Error fetching discussion:",t),t}},ws=async(s,t,n)=>{try{return await s(`${q}/posts/${t}/${n}`)}catch(r){throw console.error("Error fetching discussion:",r),r}},rt=async s=>{try{return await s(`${q}/tags`)}catch(t){throw console.error("Error fetching tags:",t),t}},Zt=async(s,t)=>{try{return await s(`${q}/posts/tag/${t}`)}catch(n){throw console.error("Error fetching tag:",n),n}},Xt=async(s,t)=>{const n=parseInt(t);try{return await s(`${q}/user/${n}`)}catch(r){throw console.error("Error fetching user:",r),r}},en=async(s,t)=>{const n=parseInt(t);try{return await s(`${q}/user/posts/${n}`)}catch(r){throw console.error("Error fetching user discussions:",r),r}},sn=async(s,t)=>{const n=parseInt(t);try{return await s(`${q}/user/comments/${n}`)}catch(r){throw console.error("Error fetching user comments:",r),r}},ks=async(s,t)=>{const n=parseInt(t);try{return await s(`${q}/user/likes/${n}`)}catch(r){throw console.error("Error fetching user comments:",r),r}},tn=async(s,t)=>{try{return await s(`${q}/posts/add`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}catch(n){throw console.error("Error submitting discussion:",n),n}},nn=async(s,t)=>{try{return await s(`${q}/comment/add`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}catch(n){throw console.error("Error submitting discussion:",n),n}},rn=async(s,t)=>{try{return await s(`${q}/comment/reply`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}catch(n){throw console.error("Error submitting discussion:",n),n}},an=async(s,t)=>{try{return await s(`${q}/post/update`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}catch(n){throw console.error("Error submitting discussion:",n),n}},on=async(s,t)=>{try{return await s(`${q}/comment/update`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}catch(n){throw console.error("Error submitting discussion:",n),n}},ln=async(s,t)=>{try{return await s(`${q}/post/delete/${t}`,{method:"DELETE"})}catch(n){throw console.error("Error deleting comment:",n),n}},it=async(s,t)=>{try{return await s(`${q}/comment/delete/${t}`,{method:"DELETE"})}catch(n){throw console.error("Error deleting comment:",n),n}},at=async(s,t)=>{try{return await s(`${q}/comment/like`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}catch(n){throw console.error("Error submitting discussion:",n),n}},ot=async(s,t)=>{try{return await s(`${q}/comment/unlike`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}catch(n){throw console.error("Error submitting discussion:",n),n}},ns=async(s,t)=>{try{return await s(`${q}/post/read`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}catch(n){throw console.error("Error submitting discussion:",n),n}},lt=async(s,t)=>{try{return await s(`${q}/post/read/all`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}catch(n){throw console.error("Error submitting discussion:",n),n}},_s=({open:s,onClose:t})=>{var le;const{authFetch:n,currentUser:r}=G(),[a,i]=l.useState(""),[o,c]=l.useState(""),[u,m]=l.useState(""),[h,f]=l.useState(!1),[g,w]=l.useState(!1),[j,M]=l.useState({}),[v,C]=l.useState(!1),x=l.useRef(null),p=ee(),D=je(),F=P.useRef(null),_=P.useRef(null),{data:T=[],isLoading:L,refetch:N}=ce({queryKey:["tags"],queryFn:()=>rt(n),staleTime:1e3*60*10,enabled:v}),R={toolbar:[[{header:[!1]}],["bold","italic","underline","strike"]]},S=["header","bold","italic","underline","strike"],b=()=>{const I={};a||(I.tag="Select a tag"),o.trim()||(I.title="Discussion title cannot be blank"),o.trim().length<5&&(I.title="Discussion Title must be at least 5 characters"),o.trim().length>100&&(I.title="Discussion Title must not be more than 100 characters");const z=u.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").trim();return(!z||z.length<10)&&(I.body="Discussion content must be at least 10 characters"),z.length>8e3&&(I.body="Discussion content must not exceed 8000 characters"),M(I),Object.keys(I).length===0},E=async I=>{if(I.preventDefault(),!b())return;w(!0);const z=r.id;try{const H=await tn(n,{user_id:z,title:o,tag:a,description:u});if(H.message==="Post saved successfully"){D.invalidateQueries({queryKey:["posts"]}),D.invalidateQueries({queryKey:["tags"]});const se=`/d/${H.post.id}`;p(se)}else console.log(H)}catch(V){console.error("Error submitting Disussion:",V)}finally{w(!1)}},U=()=>{i(""),c(""),m(""),M({}),t&&t()},W=()=>{o||u.replace(/<[^>]*>/g,"").trim()?f(!0):U()},oe=async()=>{C(!0),N()};l.useEffect(()=>{function I(z){x.current&&!x.current.contains(z.target)&&C(!1)}return v&&document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[v]),l.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]);const Y=()=>{f(!1),U()},X=()=>{f(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(Q,{in:h,timeout:250,classNames:"fade-scale",unmountOnExit:!0,nodeRef:_,children:e.jsx("div",{ref:_,className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black bg-opacity-70 backdrop-blur-[5px]",children:e.jsxs("div",{className:"w-full max-w-xs p-6 bg-white rounded-[6px] shadow-lg",children:[e.jsx("p",{className:"mb-[2rem] text-[.9rem] text-[--text-primary]",children:"You have unsaved changes. Are you sure you want to close?"}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{className:"px-4 py-2 text-[--text-primary-2] bg-[#071d2916] rounded-[6px] hover:bg-[#071d2920] transition text-[.85rem]",onClick:X,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 text-white bg-red-600 rounded-[6px] hover:bg-red-700 transition text-[.85rem]",onClick:Y,children:"Discard"})]})]})})}),e.jsx(Q,{in:s,timeout:1e3,classNames:"fade-scale",unmountOnExit:!0,nodeRef:F,children:e.jsx("div",{ref:F,className:"fixed inset-0 z-[1000] flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white shadow-2xl border border-gray-100 w-[100%] h-[100%] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between py-[1rem] px-[1rem] sm:px-[2rem] border-b border-[#f3f4f6] bg-[#f3f4f6]",children:[e.jsx("p",{className:"text-[.85rem]  text-[--primary] font-[550]",children:"Start a Disussion"}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs("div",{className:"flex gap-[1rem]",children:[e.jsx("button",{type:"submit",onClick:E,disabled:g,className:"flex items-center gap-2 px-6 text-white bg-[--primary] transition-all hover:bg-[--primary-hover] rounded-[6px] disabled:opacity-50 disabled:cursor-not-allowed",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.75rem]",children:"Posting..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-[.75rem]",children:"Post Discussion"})})}),e.jsx("button",{type:"button",className:"px-2 py-2 md:py-[.5rem] bg-[#071d2916] text-[1.2rem] rounded-[6px] hover:bg-[#071d2920] text-[--text-primary-2] transition-all",onClick:W,children:e.jsx(De,{})})]})})]}),e.jsx("div",{className:"flex-1 px-4 py-6 overflow-y-auto sm:p-6",children:e.jsxs("form",{children:[e.jsxs("div",{className:"flex flex-col gap-2 md:gap-3 mt-2 sm:flex-row sm:items-center mb-[.8rem]",children:[e.jsxs("div",{className:"relative",ref:x,children:[e.jsx("div",{className:"w-full md:w-[180px]",children:e.jsx("button",{type:"button",className:`flex justify-start md:justify-center w-full px-3 py-[.5rem] sm:py-[.6rem] text-[.8rem] sm:text-[.9rem] rounded-[6px] border  ${j.tag?"border-red-300":"border-[--text-primary-3]"}`,onClick:oe,children:e.jsx("span",{className:"font-[.8rem] text-[--text-primary-2] capitalize",children:a?((le=T.find(I=>I.name===a))==null?void 0:le.name)||a:"Select tag"})})}),v&&e.jsx("div",{className:"overflow-hidden",children:e.jsx("div",{className:"showTagDropdown absolute left-0 z-10 w-full md:w-[180px] mt-2 overflow-y-auto bg-white border border-[--text-primary-3] overflow-hidden rounded-[6px]  max-h-60",children:L?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsxs("div",{className:"flex items-center justify-center w-full",children:[e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"loading-text"})]})}):T.length>0?T.map(I=>e.jsx("button",{type:"button",className:`w-full text-[.8rem] text-left px-4 py-2 hover:bg-[#071d2907] capitalize ${a===I.name?"text-[--text-primary] bg-[#071d2907]":"text-[--text-primary-2]"}`,onClick:()=>{i(I.name),C(!1)},children:I.name},I.name)):e.jsx("div",{className:"w-full px-4 py-2 text-left text-[--text-primary-2] text-[.8rem]",children:"No tags found."})})}),j.tag?e.jsx("p",{className:"mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:j.tag}):e.jsx("p",{className:"invisible mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:"error msg"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",className:`w-full px-3  sm:px-4 py-[.5rem] sm:py-[.6rem] border rounded-[6px] outline-none text-[.8rem] sm:text-[.9rem] text-[--text-primary] ${j.title?"border-red-300":"border-[--text-primary-3]"}`,placeholder:"Discussion Title",value:o,onChange:I=>c(I.target.value),maxLength:100}),j.title?e.jsx("p",{className:"mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:j.title}):e.jsx("p",{className:"invisible mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:"error msg"})]})]}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:`border rounded-[6px] overflow-hidden ${j.body?"border-red-300":"border-gray-200"}`,children:e.jsx(ts,{value:u,onChange:m,modules:R,formats:S,placeholder:"Write a post...",style:{backgroundColor:"white"},theme:"snow"})}),j.body?e.jsx("p",{className:"mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:j.body}):e.jsx("p",{className:"invisible mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:"error msg"})]}),e.jsx("div",{className:"block sm:hidden",children:e.jsx("div",{className:"flex justify-end py-3 sm:flex-row sm:items-center mt-[1rem] md:mt-0 mb-[2rem] md:mb-[2rem]",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",className:"px-6 py-2 md:py-3 bg-[#071d2916] rounded-[6px] hover:bg-[#071d2920] text-[.8rem] text-[--text-primary-2] transition-all",onClick:W,children:"Cancel"}),e.jsx("button",{type:"submit",onClick:E,disabled:g,className:"flex items-center gap-2 px-6 text-white bg-[--primary] transition-all hover:bg-[--primary-hover] rounded-[6px] disabled:opacity-50 disabled:cursor-not-allowed",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.8rem]",children:"Posting..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-[.8rem]",children:"Post Discussion"})})})]})})})]})})]})})})]})},ze=({onCancel:s,onConfirm:t})=>{const n=r=>{r.target===r.currentTarget&&s()};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black bg-opacity-20",onClick:n,children:e.jsxs("div",{className:"w-[90%] md:w-full max-w-sm p-6 bg-white rounded-[6px] shadow-lg",children:[e.jsx("p",{className:"mb-[.5rem] text-[.8rem] md:text-[.9rem] text-[--text-primary]",children:e.jsx("b",{children:"Unlock Exclusive Features 🚀"})}),e.jsx("p",{className:"mb-[2rem] text-[.8rem] md:text-[.9rem] text-[--text-primary]",children:"Posting is a premium feature. Join our community of subscribers to share your thoughts and content!"}),e.jsx("div",{className:"flex justify-end gap-3",children:e.jsx("a",{href:"https://rsjobhub.com/pricing",children:e.jsx("button",{className:"px-4 py-2 text-white bg-[--primary] rounded-[6px] hover:bg-[--primary-hover] transition text-[.8rem] md:text-[.85rem]",onClick:t,children:"Subscribe Now"})})})]})})})},cn=()=>{const{authFetch:s,currentUser:t}=G(),[n,r]=l.useState(20),[a,i]=l.useState(!1),[o,c]=l.useState(!1),[u,m]=l.useState(1),h=ie(),f=ee(),g=P.useRef(null),{data:w=[],isLoading:j,isFetching:M,isError:v,refetch:C}=ce({queryKey:["posts"],queryFn:()=>nt(s),staleTime:1e3*60*5,refetchOnWindowFocus:!0}),x=w.slice(0,u*n),p=x.length<w.length,D=()=>{C(),m(1)},F=()=>{p&&m(S=>S+1)},_=async S=>{try{const b={user_id:t.id,post_id:S},E=await ns(s,b);if(E.message==="Post has been marked as read")return;console.log(E)}catch(b){console.error("Error marking discussions as read:",b)}},T=async()=>{try{const S={user_id:t.id},b=await lt(s,S);b.message==="All posts marked as read"?C():console.log(b)}catch(S){console.error("Error marking all discussions as read:",S)}};function L(){h.pathname==="/"?D():f("/")}function N(S){t.is_subscribed?i(S):c(!0)}function R(){c(!1)}return e.jsxs(e.Fragment,{children:[e.jsx(ge,{onStartDiscussion:()=>N(!0)}),e.jsx(ne,{children:e.jsxs("div",{className:"forumHomeLayout",children:[e.jsx(Ss,{onAllDiscussionsClick:L,currentPath:h.pathname,onStartDiscussion:()=>N(!0)}),j?e.jsxs("div",{className:"flex items-center justify-center w-full spinner-container",children:[e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"loading-text",children:"Loading..."})]}):w.length===0?e.jsx("div",{className:"flex items-center justify-center w-full pt-[10rem] lg:pt-[5rem]",children:e.jsx("span",{className:"text-center loading-text",children:"It's a bit quiet in here! Be the first to Start a Discussion."})}):e.jsxs("div",{className:"forumHomeMainSection",children:[e.jsx("div",{className:"forum-filter-bar",children:e.jsxs("div",{className:"filter-actions",children:[e.jsx("button",{className:`action-button refresh-button ${M?"refreshing":""}`,onClick:D,"aria-label":"Refresh",disabled:M||j,children:e.jsx(Gs,{})}),e.jsx("button",{className:"action-button mark-read-button",onClick:T,"aria-label":"Mark all as read",children:e.jsx(Ys,{})})]})}),M?e.jsxs("div",{className:"flex items-center justify-center w-full spinner-container",children:[e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"loading-text",children:"Loading..."})]}):e.jsxs("div",{className:"discussions-container",children:[e.jsx("ul",{className:"discussions-list",children:x.map(S=>e.jsx(Ds,{discussion:S,handleMarkAsRead:_},S.id))}),p&&e.jsx("div",{className:"load-more-container",children:j?e.jsx("div",{className:"spinner"}):e.jsx(fe,{loadMoreDiscussions:F,isLoading:j})})]})]})]})}),e.jsx(_s,{open:a,onClose:()=>N(!1)}),e.jsx(Q,{in:o,timeout:250,classNames:"fade-scale",unmountOnExit:!0,nodeRef:g,children:e.jsx("div",{ref:g,className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black bg-opacity-70 backdrop-blur-[5px]",children:e.jsx(ze,{onCancel:R})})})]})},dn=({displaySidebarMenu:s,onCloseSidebar:t,onSelectDiscussion:n})=>{const{authFetch:r,currentUser:a}=G(),[i,o]=l.useState(20),{data:c=[],isLoading:u,isFetched:m,refetch:h}=ce({queryKey:["allDiscussions"],queryFn:async()=>{const x=await nt(r);return Array.isArray(x)?x:[]},staleTime:0,refetchOnWindowFocus:!0}),[f,g]=l.useState(1),w=c.slice(0,f*i),j=c.length>w.length,M=()=>{g(x=>x+1)},v=async x=>{try{const p={user_id:a.id,post_id:x},D=await ns(r,p);if(D.message==="Post has been marked as read")return;console.log(D)}catch(p){console.error("Error marking discussions as read:",p)}},C=x=>{v(x),n&&n(x),t()};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"discussionSidebar-wrapper",children:e.jsx("div",{className:`discussionSideMenu ${s?"open":""} pb-[5rem]`,children:m?e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"p-0 m-0 list-none",children:w.map(x=>e.jsx(A,{to:`/d/${x.id}`,onClick:()=>C(x.id),children:e.jsxs("li",{className:`relative flex items-center transition-[all_.5s_ease] py-[12px] px-[15px] hover:bg-[#071d290a] ${x.is_read?"":"unread"}`,children:[x.author.passport!==""?e.jsx("div",{className:"userProfileImage w-[40px] h-[40px] rounded-[5rem] overflow-auto mr-[10px]",children:e.jsx("img",{src:`https://rsjobhub.com/${x.author.passport}`,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}):e.jsx("div",{className:"userProfileImage w-[40px] h-[40px] rounded-[5rem] overflow-auto mr-[10px]",children:e.jsx("img",{src:_e,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}),e.jsxs("div",{className:"discussion-content",children:[e.jsx("h3",{className:"discussion-title",children:x.title}),e.jsxs("div",{className:"discussion-meta",children:[e.jsx("span",{className:"discussion-tag",children:x.tag}),x.comments_count>1&&x.last_commented_by!==null?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"reply-icon",children:e.jsx(ye,{})}),e.jsx("span",{className:"replied-by",children:x.last_commented_by}),e.jsxs("span",{className:"flex gap-1 replied-time",children:[e.jsx("span",{children:"replied"}),e.jsx(Ee,{createdAt:x.last_commented_at})]})]}):e.jsx("div",{children:e.jsxs("span",{className:"flex gap-1 replied-time",children:[e.jsx("span",{children:"started"}),e.jsx(Ee,{createdAt:x.created_at})]})})]})]}),e.jsx("div",{className:"discussion-info",children:e.jsxs("div",{className:"comment-count",children:[e.jsx(Xs,{className:"comment-count-icon"}),e.jsx("span",{children:Es(x.comments_count)})]})})]})},x.id))}),j&&e.jsx("div",{className:"load-more-container ",children:u?e.jsx(e.Fragment,{children:e.jsx("div",{className:"spinner"})}):e.jsx(fe,{loadMoreDiscussions:M,isLoading:u})})]}):e.jsxs("div",{className:"flex items-center justify-center w-full spinner-container",children:[e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"loading-text",children:"Loading..."})]})})})})};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mn=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),zs=s=>{const t=mn(s);return t.charAt(0).toUpperCase()+t.slice(1)},ct=(...s)=>s.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),hn=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=l.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...c},u)=>l.createElement("svg",{ref:u,...xn,width:t,height:t,stroke:s,strokeWidth:r?Number(n)*24/Number(t):n,className:ct("lucide",a),...!i&&!hn(c)&&{"aria-hidden":"true"},...c},[...o.map(([m,h])=>l.createElement(m,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=(s,t)=>{const n=l.forwardRef(({className:r,...a},i)=>l.createElement(pn,{ref:i,iconNode:t,className:ct(`lucide-${un(zs(s))}`,`lucide-${s}`,r),...a}));return n.displayName=zs(s),n};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],gn=Be("circle-check-big",fn);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],yn=Be("circle-x",jn);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],vn=Be("refresh-cw",bn);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],wn=Be("send",Nn);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],Bs=Be("thumbs-up",kn);function Cn(s){return B({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M10.3623 15.529L8.94804 16.9432L3.99829 11.9934L8.94804 7.0437L10.3623 8.45791L7.86379 10.9564H16.0018C18.2109 10.9564 20.0018 12.7472 20.0018 14.9564V16.9564H18.0018V14.9564C18.0018 13.8518 17.1063 12.9564 16.0018 12.9564H7.78965L10.3623 15.529Z",fill:"currentColor"},child:[]}]})(s)}const Sn=({size:s="md"})=>{const t={sm:"px-2 py-[.04rem] text-[.5rem] md:text-[.55rem]"};return e.jsx("span",{className:`inline-flex items-center gap-1 ${t[s]} bg-red-600 text-white rounded-full font-medium ml-[1rem] `,children:"Admin"})},Xe=({post:s,isOnline:t,userLikedComments:n=[],highlightedCommentId:r,handleLike:a,handleUnLike:i,onReplyClick:o,onEditClick:c,showMoreMenu:u,toggleMoreMenu:m,handleDeleteComment:h,moreMenuRef:f,onReplyLink:g})=>{const{currentUser:w}=G(),j=l.useRef(null);l.useEffect(()=>{r===s.id&&j.current&&setTimeout(()=>{j.current.scrollIntoView({behavior:"smooth",block:"center"}),j.current.classList.add("highlighted-comment"),setTimeout(()=>{j.current&&j.current.classList.remove("highlighted-comment")},3e3)},100)},[r,s.id]);const M=n.some(v=>Number(v.liked_user_id)===Number(w.id)&&Number(v.id)===Number(s.id));return e.jsxs("div",{className:"post",ref:j,id:`${s.id}`,children:[e.jsx("div",{children:e.jsx(A,{to:`/user/${s.user_id}`,className:"post-avatar-link",children:e.jsx("div",{className:"relative",children:s.commenter_passport!==""?e.jsx("div",{className:"userProfileImage w-[32px] h-[32px] sm:w-[35px] sm:h-[35px] md:w-[50px] md:h-[50px] rounded-[5rem] overflow-auto mr-[8px] sm:mr-[1rem] shrink-0 flex",children:e.jsx("img",{src:`https://rsjobhub.com/${s.commenter_passport}`,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}):e.jsx("div",{className:"userProfileImage w-[32px] h-[32px] sm:w-[35px] sm:h-[35px] md:w-[50px] md:h-[50px] rounded-[5rem] overflow-auto mr-[8px] sm:mr-[1rem] shrink-0 flex",children:e.jsx("img",{src:_e,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})})})})}),e.jsxs("div",{className:"post-content",children:[e.jsxs("div",{className:"post-header",children:[e.jsx(A,{to:`/user/${s.user_id}`,className:"post-username-link",children:e.jsx("span",{className:"capitalize post-username",children:s.commenter_name})}),e.jsx("span",{className:"post-time",children:e.jsx(Ee,{createdAt:s.created_at})}),s.commenter_status==="admin"?e.jsx(Sn,{size:"sm"}):null]}),e.jsxs("div",{className:"post-body",children:[s.is_reply?e.jsxs("span",{className:"flex items-center reply-indicator mb-[.5rem] cursor-pointer",onClick:()=>g(s.replying_to_comment_id),children:[e.jsx("span",{className:"reply-icon",children:e.jsx(ye,{})}),e.jsx("span",{className:"replying-to",children:s.replying_to_user_name})]}):null,e.jsx("div",{dangerouslySetInnerHTML:{__html:s.content}})]}),e.jsxs("div",{className:"post-actions",children:[M?e.jsxs("button",{onClick:()=>i(s.id),className:"flex items-center gap-1 transition-all duration-200 hover:scale-105 text-red-500 bg-red-50",children:[e.jsx(Bs,{className:"w-[14px] h-[14px] transition-all duration-200 fill-red-500"}),e.jsx("span",{className:"text-[12px]",children:"Like"})]}):e.jsxs("button",{onClick:()=>a(s.id),className:"flex items-center gap-1  transition-all duration-200 hover:scale-105 text-[--text-primary-2]",children:[e.jsx(Bs,{className:"w-[14px] h-[14px] transition-all duration-200 fill-none"}),e.jsx("span",{className:"text-[12px]",children:"Like"})]}),e.jsxs("button",{onClick:()=>o(s.id),className:"flex items-center gap-1 transition-all duration-200 hover:scale-105 text-[--text-primary-2]",children:[e.jsx(Cn,{className:"w-[16px] h-[16px] transition-all duration-200 "}),e.jsx("span",{className:"text-[12px]",children:"Reply"})]}),w.status==="admin"?e.jsxs("div",{className:"more-menu-container",ref:u===s.id?f:null,children:[e.jsx("button",{className:`post-action-button menu more-button ${u===s.id?"focus":""}`,onClick:()=>m(s.id),children:e.jsx(Is,{})}),u===s.id&&e.jsxs("div",{className:"flex flex-col more-menu",children:[e.jsxs("button",{onClick:()=>c(s),children:[e.jsx(Pe,{style:{fontSize:"16px"}}),"Edit"]}),e.jsxs("button",{onClick:()=>h(s.id),children:[e.jsx(Ae,{style:{fontSize:"16px"}}),"Delete"]})]})]}):w.id===s.user_id?e.jsxs("div",{className:"more-menu-container",ref:u===s.id?f:null,children:[e.jsx("button",{className:`post-action-button menu more-button ${u===s.id?"focus":""}`,onClick:()=>m(s.id),children:e.jsx(Is,{})}),u===s.id&&e.jsxs("div",{className:"flex flex-col more-menu",children:[e.jsxs("button",{onClick:()=>c(s),children:[e.jsx(Pe,{style:{fontSize:"16px"}}),"Edit"]}),e.jsxs("button",{onClick:()=>h(s.id),children:[e.jsx(Ae,{style:{fontSize:"16px"}}),"Delete"]})]})]}):null]})]})]},s.id)},En=({open:s,onClose:t,replyToDiscussionId:n,onCommentAdded:r})=>{const{authFetch:a,currentUser:i}=G(),[o,c]=l.useState(""),[u,m]=l.useState(!1),[h,f]=l.useState(!1),[g,w]=l.useState({});ee();const j=je(),M=l.useRef(null),v=l.useRef(null),C={toolbar:[[{header:[!1]}],["bold","italic","underline","strike"]]},x=["header","bold","italic","underline","strike"],p=()=>{const N={},R=o.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").trim();return(!R||R==="")&&(N.body="Reply cannot be empty"),R.length>8e3&&(N.body="Discussion content must not exceed 8000 characters"),w(N),Object.keys(N).length===0},D=async N=>{if(N.preventDefault(),!p())return;f(!0);const R=i.id;try{const b=await nn(a,{post_id:n,user_id:R,content:o});b.message==="Comment saved successfully"?(j.invalidateQueries({queryKey:["posts"]}),j.invalidateQueries({queryKey:["allDiscussions"]}),r(b.comment),F()):console.log(b)}catch(S){console.error("Error submitting Disussion:",S)}finally{f(!1)}},F=()=>{c(""),w({}),t&&t()},_=()=>{o.replace(/<[^>]*>/g,"").trim()?m(!0):F()};l.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]);const T=()=>{m(!1),F()},L=()=>{m(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(Q,{in:u,timeout:250,classNames:"fade-scale",unmountOnExit:!0,nodeRef:v,children:e.jsx("div",{ref:v,className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black bg-opacity-70 backdrop-blur-[5px]",children:e.jsxs("div",{className:"w-[90%] md:w-full max-w-xs p-6 bg-white rounded-[6px] shadow-lg",children:[e.jsx("p",{className:"mb-[2rem] text-[.8rem] md:text-[.9rem] text-[--text-primary]",children:"You have unsaved changes. Are you sure you want to close?"}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{className:"px-4 py-2 text-[--text-primary-2] bg-[#071d2916] rounded-[6px] hover:bg-[#071d2920] transition text-[.8rem] md:text-[.85rem]",onClick:L,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 text-white bg-red-600 rounded-[6px] hover:bg-red-700 transition text-[.8rem] md:text-[.85rem]",onClick:T,children:"Discard"})]})]})})}),e.jsx(Q,{in:s,timeout:200,classNames:"fade-scale",unmountOnExit:!0,nodeRef:M,children:e.jsx("div",{ref:M,className:"fixed inset-0 z-[1000] lg:bg-[#000] lg:bg-opacity-70 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white shadow-2xl rounded-[6px] border border-gray-100 w-[100%] h-[100%] lg:w-[90%] lg:h-[95%] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between py-[.8rem] px-[1rem] sm:px-[2rem] border-b border-[#f3f4f6] bg-[#f3f4f6]",children:[e.jsxs("div",{className:"text-[--primary] flex items-center gap-1",children:[e.jsx(ye,{className:"text-[.95rem]"}),e.jsx("p",{className:"text-[.85rem] font-[550]",children:n})]}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs("div",{className:"flex gap-[1rem]",children:[e.jsx("button",{type:"submit",onClick:D,disabled:h,className:"flex items-center gap-2 px-6 text-white bg-[--primary] transition-all hover:bg-[--primary-hover] rounded-[6px] disabled:opacity-50 disabled:cursor-not-allowed",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.75rem]",children:"Posting..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-[.75rem]",children:"Post Reply"})})}),e.jsx("button",{type:"button",className:"px-2 py-2 md:py-[.5rem] bg-[#071d2916] text-[1.2rem] rounded-[6px] hover:bg-[#071d2920] text-[--text-primary-2] transition-all",onClick:_,children:e.jsx(De,{})})]})})]}),e.jsx("div",{className:"flex-1 px-4 py-6 overflow-y-auto sm:p-6",children:e.jsxs("form",{children:[e.jsxs("div",{className:"",children:[e.jsx("div",{className:`border rounded-[6px] overflow-hidden ${g.body?"border-red-300":"border-gray-200"}`,children:e.jsx(ts,{value:o,onChange:c,modules:C,formats:x,placeholder:"Write a reply...",style:{backgroundColor:"white"},theme:"snow"})}),g.body?e.jsx("p",{className:"mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:g.body}):e.jsx("p",{className:"invisible mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:"error msg"})]}),e.jsx("div",{className:"block sm:hidden",children:e.jsx("div",{className:"flex justify-end py-3 sm:flex-row sm:items-center mt-[1rem] md:mt-0 mb-[2rem] md:mb-[2rem]",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",className:"px-6 py-2 md:py-3 bg-[#071d2916] rounded-[6px] hover:bg-[#071d2920] text-[.8rem] text-[--text-primary-2] transition-all",onClick:_,children:"Cancel"}),e.jsx("button",{type:"submit",onClick:D,disabled:h,className:"flex items-center gap-2 px-6 text-white bg-[--primary] transition-all hover:bg-[--primary-hover] rounded-[6px] disabled:opacity-50 disabled:cursor-not-allowed",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.8rem]",children:"Posting..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-[.8rem]",children:"Post Reply"})})})]})})})]})})]})})})]})},Dn=({onCancel:s,onConfirm:t})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-[90%] md:w-full max-w-sm p-6 bg-white rounded-[6px] shadow-lg",children:[e.jsx("p",{className:"mb-[2rem] text-[.8rem] md:text-[.9rem] text-[--text-primary]",children:"Permanently delete this discussion? This cannot be undone."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{className:"px-4 py-2 text-[--text-primary-2] bg-[#071d2916] rounded-[6px] hover:bg-[#071d2920] transition text-[.8rem] md:text-[.85rem]",onClick:s,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 text-white bg-red-600 rounded-[6px] hover:bg-red-700 transition text-[.8rem] md:text-[.85rem]",onClick:t,children:"Yes, Delete"})]})]})}),dt=()=>{const[s,t]=l.useState(null),n=l.useRef(null),r=l.useCallback(i=>{t(o=>o===i?null:i)},[]),a=l.useCallback(i=>{n.current&&!n.current.contains(i.target)&&t(null)},[]);return l.useEffect(()=>(s?document.addEventListener("mousedown",a):document.removeEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}),[s,a]),{showMoreMenu:s,moreMenuRef:n,toggleMoreMenu:r,setShowMoreMenu:t}},_n=({open:s,onClose:t,replyToDiscussionId:n,replyToDiscussionTitle:r,onRenameDiscussionTitle:a})=>{const{authFetch:i,currentUser:o}=G(),[c,u]=l.useState(""),[m,h]=l.useState(!1),[f,g]=l.useState({});ee();const w=je(),j=l.useRef(null);l.useEffect(()=>{s&&u(r||"")},[s,r]);const M=()=>{const p={};return(!c||c==="")&&(p.body="Discussion title cannot be empty"),c.length<2&&(p.body="Discussion title must be greater than 2 characters"),g(p),Object.keys(p).length===0},v=async p=>{if(p.preventDefault(),!M())return;h(!0);const D=o.id;try{const F={user_id:D,post_id:n,title:c};if(F.title===r)C();else{const _=await an(i,F);_.message==="Post title updated successfully"?(w.invalidateQueries({queryKey:["posts"]}),w.invalidateQueries({queryKey:["allDiscussions"]}),a(_.post.title),Notification("success","Discussion Title Updated!"),C()):console.log(_)}}catch(F){console.error("Error Renaming Disussion:",F)}finally{h(!1)}},C=()=>{u(""),g({}),t&&t()},x=()=>{C()};return l.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]),e.jsx(e.Fragment,{children:e.jsx(Q,{in:s,timeout:200,classNames:"fade-scale",unmountOnExit:!0,nodeRef:j,children:e.jsx("div",{ref:j,className:"fixed inset-0 z-[1000] lg:bg-[#000] lg:bg-opacity-80 flex items-center justify-center backdrop-blur-[5px]",children:e.jsxs("div",{className:"relative bg-white shadow-2xl rounded-[6px] border border-gray-100 w-[100%] h-[100%] lg:w-[35%] lg:h-[auto] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between py-[.8rem] px-[1rem] sm:px-[1.5rem] border-b border-[#f3f4f6] bg-[#f3f4f6]",children:[e.jsx("div",{className:"text-[--primary] flex items-center gap-1",children:e.jsx("p",{className:"text-[.85rem] font-[550]",children:"Rename Discussion"})}),e.jsx("div",{children:e.jsx("button",{type:"button",className:"px-1 py-1  bg-[#071d2916] text-[1.1rem] rounded-[6px] hover:bg-[#071d2920] text-[--text-primary-2] transition-all",onClick:x,children:e.jsx(De,{})})})]}),e.jsx("div",{className:"flex-1 px-4 py-6 overflow-y-auto sm:p-6",children:e.jsx("form",{onSubmit:v,children:e.jsxs("div",{className:"py-[.5rem]",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:c,onChange:p=>u(p.target.value),className:"border w-full py-[.8rem] px-[.5rem] text-[.8rem] border-[#071D2940] rounded-[7px] bg-[#F3F4F6] outline-none"}),f.body?e.jsx("p",{className:"mt-1 text-[.7rem] text-red-500 md:text-xs",children:f.body}):e.jsx("p",{className:"invisible mt-1 text-[.7rem] text-red-500 md:text-xs",children:"error msg"})]}),e.jsx("div",{className:"mt-[.5rem]",children:m?e.jsxs("button",{disabled:m,type:"submit",className:"bg-[--text-primary] text-white py-[.8rem] text-[.8rem] w-full rounded-[7px] flex items-center justify-center",children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.75rem]",children:"Updating..."})]}):e.jsx("button",{type:"submit",className:"bg-[--text-primary] text-white py-[.8rem] text-[.8rem] w-full rounded-[7px]",children:"Rename"})})]})})})]})})})})},ut=({open:s,onClose:t,replyToDiscussionId:n,replyToCommentId:r,onReplyCommentAdded:a})=>{const{authFetch:i,currentUser:o}=G(),[c,u]=l.useState(""),[m,h]=l.useState(!1),[f,g]=l.useState(!1),[w,j]=l.useState({});ee();const M=ie(),v=je(),C=l.useRef(null),x=l.useRef(null),p={toolbar:[[{header:[!1]}],["bold","italic","underline","strike"]]},D=["header","bold","italic","underline","strike"],F=()=>{const S={},b=c.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").trim();return(!b||b==="")&&(S.body="Reply cannot be empty"),b.length>8e3&&(S.body="Discussion content must not exceed 8000 characters"),j(S),Object.keys(S).length===0},_=async S=>{if(S.preventDefault(),!F())return;g(!0);const b=o.id;try{const U=await rn(i,{post_id:n,user_id:b,comment_id:r,content:c});U.message==="Reply posted successfully"?(v.invalidateQueries({queryKey:["posts"]}),v.invalidateQueries({queryKey:["allDiscussions"]}),M.pathname.startsWith("/user/")?(v.invalidateQueries({queryKey:["userPosts",b]}),Notification("submitted","Reply Posted")):a(U.reply),T()):console.log(U)}catch(E){console.error("Error submitting Disussion:",E)}finally{g(!1)}},T=()=>{u(""),j({}),t&&t()},L=()=>{c.replace(/<[^>]*>/g,"").trim()?h(!0):T()};l.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]);const N=()=>{h(!1),T()},R=()=>{h(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(Q,{in:m,timeout:250,classNames:"fade-scale",unmountOnExit:!0,nodeRef:x,children:e.jsx("div",{ref:x,className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black bg-opacity-70 backdrop-blur-[5px]",children:e.jsxs("div",{className:"w-[90%] md:w-full max-w-xs p-6 bg-white rounded-[6px] shadow-lg",children:[e.jsx("p",{className:"mb-[2rem] text-[.8rem] md:text-[.9rem] text-[--text-primary]",children:"You have unsaved changes. Are you sure you want to close?"}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{className:"px-4 py-2 text-[--text-primary-2] bg-[#071d2916] rounded-[6px] hover:bg-[#071d2920] transition text-[.8rem] md:text-[.85rem]",onClick:R,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 text-white bg-red-600 rounded-[6px] hover:bg-red-700 transition text-[.8rem] md:text-[.85rem]",onClick:N,children:"Discard"})]})]})})}),e.jsx(Q,{in:s,timeout:200,classNames:"fade-scale",unmountOnExit:!0,nodeRef:C,children:e.jsx("div",{ref:C,className:"fixed inset-0 z-[1000] lg:bg-[#000] lg:bg-opacity-70 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white shadow-2xl rounded-[6px] border border-gray-100 w-[100%] h-[100%] lg:w-[90%] lg:h-[95%] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between py-[.8rem] px-[1rem] sm:px-[2rem] border-b border-[#f3f4f6] bg-[#f3f4f6]",children:[e.jsxs("div",{className:"text-[--primary] flex items-center gap-1",children:[e.jsx(ye,{className:"text-[.95rem]"}),e.jsxs("p",{className:"text-[.85rem] font-[550]",children:[n,"/",r]})]}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs("div",{className:"flex gap-[1rem]",children:[e.jsx("button",{type:"submit",onClick:_,disabled:f,className:"flex items-center gap-2 px-6 text-white bg-[--primary] transition-all hover:bg-[--primary-hover] rounded-[6px] disabled:opacity-50 disabled:cursor-not-allowed",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.75rem]",children:"Posting..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-[.75rem]",children:"Post Reply"})})}),e.jsx("button",{type:"button",className:"px-2 py-2 md:py-[.5rem] bg-[#071d2916] text-[1.2rem] rounded-[6px] hover:bg-[#071d2920] text-[--text-primary-2] transition-all",onClick:L,children:e.jsx(De,{})})]})})]}),e.jsx("div",{className:"flex-1 px-4 py-6 overflow-y-auto sm:p-6",children:e.jsxs("form",{onSubmit:_,children:[e.jsxs("div",{className:"",children:[e.jsx("div",{className:`border rounded-[6px] overflow-hidden ${w.body?"border-red-300":"border-gray-200"}`,children:e.jsx(ts,{value:c,onChange:u,modules:p,formats:D,placeholder:"Write a reply...",style:{backgroundColor:"white"},theme:"snow"})}),w.body?e.jsx("p",{className:"mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:w.body}):e.jsx("p",{className:"invisible mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:"error msg"})]}),e.jsx("div",{className:"block sm:hidden",children:e.jsx("div",{className:"flex justify-end py-3 sm:flex-row sm:items-center mt-[1rem] md:mt-0 mb-[2rem] md:mb-[2rem]",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",className:"px-6 py-2 md:py-3 bg-[#071d2916] rounded-[6px] hover:bg-[#071d2920] text-[.8rem] text-[--text-primary-2] transition-all",onClick:L,children:"Cancel"}),e.jsx("button",{type:"submit",onClick:_,disabled:f,className:"flex items-center gap-2 px-6 text-white bg-[--primary] transition-all hover:bg-[--primary-hover] rounded-[6px] disabled:opacity-50 disabled:cursor-not-allowed",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.8rem]",children:"Posting..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-[.8rem]",children:"Post Reply"})})})]})})})]})})]})})})]})},mt=({open:s,onClose:t,editCommentDiscussionId:n,editCommentId:r,initialContent:a,onEditCommentContent:i})=>{const{authFetch:o,currentUser:c}=G(),[u,m]=l.useState(""),[h,f]=l.useState(!1),[g,w]=l.useState({});ee();const j=je(),M=l.useRef(null);l.useEffect(()=>{s&&m(a||"")},[s,a]);const v={toolbar:[[{header:[!1]}],["bold","italic","underline","strike"]]},C=["header","bold","italic","underline","strike"],x=()=>{const _={},T=u.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").trim();return(!T||T==="")&&(_.body="Reply cannot be empty"),T.length>8e3&&(_.body="Discussion content must not exceed 8000 characters"),w(_),Object.keys(_).length===0},p=async _=>{if(_.preventDefault(),!x())return;f(!0);const T=c.id;try{const L={user_id:T,comment_id:r,content:u};if(L.content===a)D();else{const N=await on(o,L);N.message==="Comment updated successfully"?(j.invalidateQueries({queryKey:["posts"]}),i(N.comment),Notification("success","Comment Updated!"),D()):console.log(N)}}catch(L){console.error("Error Updating Comment:",L)}finally{f(!1)}},D=()=>{m(""),w({}),t&&t()},F=()=>{D()};return l.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]),e.jsx(e.Fragment,{children:e.jsx(Q,{in:s,timeout:200,classNames:"fade-scale",unmountOnExit:!0,nodeRef:M,children:e.jsx("div",{ref:M,className:"fixed inset-0 z-[1000] lg:bg-[#000] lg:bg-opacity-70 flex items-center justify-center backdrop-blur-[5px]",children:e.jsxs("div",{className:"relative bg-white shadow-2xl rounded-[6px] border border-gray-100 w-[100%] h-[100%] lg:w-[90%] lg:h-[95%] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between py-[.8rem] px-[1rem] sm:px-[2rem] border-b border-[#f3f4f6] bg-[#f3f4f6]",children:[e.jsxs("div",{className:"text-[--primary] flex items-center gap-1",children:[e.jsx(ye,{className:"text-[.95rem]"}),e.jsxs("p",{className:"text-[.85rem] font-[550]",children:[n,"/",r]})]}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs("div",{className:"flex gap-[1rem]",children:[e.jsx("button",{type:"submit",onClick:p,disabled:h,className:"flex items-center gap-2 px-6 text-white bg-[--primary] transition-all hover:bg-[--primary-hover] rounded-[6px] disabled:opacity-50 disabled:cursor-not-allowed",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.75rem]",children:"Updating..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-[.75rem]",children:"Save Changes"})})}),e.jsx("button",{type:"button",className:"px-2 py-2 md:py-[.5rem] bg-[#071d2916] text-[1.2rem] rounded-[6px] hover:bg-[#071d2920] text-[--text-primary-2] transition-all",onClick:F,children:e.jsx(De,{})})]})})]}),e.jsx("div",{className:"flex-1 px-4 py-6 overflow-y-auto sm:p-6",children:e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"",children:[e.jsx("div",{className:`border rounded-[6px] overflow-hidden ${g.body?"border-red-300":"border-gray-200"}`,children:e.jsx(ts,{value:u,onChange:m,modules:v,formats:C,placeholder:"Write a reply...",style:{backgroundColor:"white"},theme:"snow"})}),g.body?e.jsx("p",{className:"mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:g.body}):e.jsx("p",{className:"invisible mt-1 md:mt-2 text-[.7rem] text-red-500 md:text-xs",children:"error msg"})]}),e.jsx("div",{className:"block sm:hidden",children:e.jsx("div",{className:"flex justify-end py-3 sm:flex-row sm:items-center mt-[1rem] md:mt-0 mb-[2rem] md:mb-[2rem]",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",className:"px-6 py-2 md:py-3 bg-[#071d2916] rounded-[6px] hover:bg-[#071d2920] text-[.8rem] text-[--text-primary-2] transition-all",onClick:F,children:"Cancel"}),e.jsx("button",{type:"submit",onClick:p,disabled:h,className:"flex items-center gap-2 px-6 text-white bg-[--primary] transition-all hover:bg-[--primary-hover] rounded-[6px] disabled:opacity-50 disabled:cursor-not-allowed",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-white",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"text-[.8rem]",children:"Updating..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-[.8rem]",children:"Save Changes"})})})]})})})]})})]})})})})},Hs=()=>{var Qe;const{authFetch:s,currentUser:t}=G(),{id:n,commentId:r}=Cs(),[a,i]=l.useState(null),[o,c]=l.useState(null),[u,m]=l.useState(!0),[h,f]=l.useState(null),[g,w]=l.useState(!1),[j,M]=l.useState(!1),[v,C]=l.useState(!1),[x,p]=l.useState(!1),[D,F]=l.useState(!1),[_,T]=l.useState(!1),[L,N]=l.useState(null),[R,S]=l.useState(null),[b,E]=l.useState(r||null),[U,W]=l.useState(0),[oe,Y]=l.useState(!1),X=ee(),le=je(),[I,z]=l.useState(!1),V=l.useRef(null),H=l.useRef(null),[J,se]=l.useState([]),[ve,Me]=l.useState(!1),[rs,He]=l.useState(null),de=P.useRef(null),qe=P.useRef(null),{showMoreMenu:is,moreMenuRef:Ms,toggleMoreMenu:Ne,setShowMoreMenu:as}=dt();l.useEffect(()=>{let d=!0;return m(!0),f(null),i(null),c([]),(async()=>{try{const k=Number(n),$=await ws(s,k,t.id);d&&(i($),c($.comments||[]),m(!1),le.invalidateQueries({queryKey:["posts"]}))}catch(k){d&&(f(k.message||"Failed to fetch discussion"),m(!1),X(-1))}})(),()=>{d=!1}},[s,X,n,t.id,le]),l.useEffect(()=>{if(!u&&b){const d=document.getElementById(b);d&&(d.scrollIntoView({behavior:"smooth",block:"center"}),d.classList.add("highlighted-comment"),setTimeout(()=>{d.classList.remove("highlighted-comment")},3e3))}},[u,b,U]),l.useEffect(()=>{r&&E(r)},[r]);const os=d=>{E(d),W(y=>y+1)},Ts=()=>{F(!0),T(!0)},ue=()=>{F(!1),T(!1)},ls=d=>{d!==n&&(m(!0),X(`/d/${d}`))},cs=d=>{t.is_subscribed?(N(d),M(!0)):Y(!0)},Rs=d=>{S(d),p(!0)},we=()=>{z(d=>!d)};l.useEffect(()=>{if(!I)return;function d(y){H.current&&!H.current.contains(y.target)&&V.current&&!V.current.contains(y.target)&&z(!1)}return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[I]);const Te=d=>{let y;Number(d.user_id)===t.id&&t.status==="admin"?y="admin":y="user";const k={id:d.id,post_id:d.post_id,user_id:Number(d.user_id),commenter_passport:t.passport,commenter_name:t.first_name,created_at:d.created_at,is_reply:0,replying_to_comment_id:d.replying_to_comment_id,replying_to_user_name:d.replying_to_user_name,content:d.content,commenter_status:y};c($=>[...$,k]),E(d.id),W($=>$+1)},Re=d=>{let y;Number(d.user_id)===t.id&&t.status==="admin"?y="admin":y="user";const k={id:d.id,post_id:d.post_id,user_id:Number(d.user_id),commenter_passport:t.passport,commenter_name:t.first_name,created_at:d.created_at,is_reply:1,replying_to_comment_id:d.replying_to_comment_id,replying_to_user_name:d.replying_to_user_name,content:d.content,commenter_status:y};c($=>[...$,k]),E(d.id),W($=>$+1)},ds=d=>{i(y=>({...y,title:d}))},me=d=>{c(y=>y.map(k=>Number(k.id)===Number(d.id)?{...k,content:d.content}:k))},he=d=>{He(d),Me(!0)},We=async()=>{try{(await ln(s,rs)).message==="Post and related data deleted successfully"&&(Notification("success","Discussion Deleted!"),X("/"))}catch(d){console.log(d)}Me(!1),He(null)},Le=()=>{Me(!1),He(null)},us=async d=>{try{const y=await it(s,d);y.message==="Comment and its likes deleted successfully"&&(c(k=>k.filter($=>$.id!==d)),le.invalidateQueries({queryKey:["allDiscussions"]}),Notification("success","Comment Deleted!")),y.error==="Comment not found"&&Notification("failed","Invalid Comment ID")}catch(y){console.log(y)}as(null)};l.useEffect(()=>{(async()=>{if(t&&t.id)try{const y=await ks(s,t.id);se(Array.isArray(y)?y:[])}catch{se([])}})()},[s,t]);const ms=async d=>{(await at(s,{comment_id:d,user_id:t.id})).message==="Comment liked successfully"?se(k=>[...k,{id:d,liked_user_id:t.id}]):Notification("failed","Failed to like comment",3e3)},Ve=async d=>{(await ot(s,{comment_id:d,user_id:t.id})).message==="Comment unliked successfully"?se(k=>k.filter($=>!(Number($.liked_user_id)===Number(t.id)&&Number($.id)===Number(d)))):Notification("failed","Failed to like comment",3e3)};function te(d){t.is_subscribed?w(d):Y(!0)}function Ke(){Y(!1)}return e.jsxs(e.Fragment,{children:[e.jsx(ge,{openDiscussionSidebarMenu:Ts,isDiscussionSidebarMenuActive:_,closeDiscussionSidebarMenu:ue,discussionOwnerId:((Qe=a==null?void 0:a.author)==null?void 0:Qe.id)||null,onStartDiscussionReply:()=>te(!0),onStartRenameDiscussion:()=>C(!0),deleteDiscussion:()=>he(a.id)}),u?e.jsx("div",{className:"flex items-center justify-center w-full spinner-container pt-[7rem]",children:e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}})}):e.jsx(e.Fragment,{children:h?e.jsx("div",{className:"flex items-center justify-center w-full spinner-container pt-[5rem]",children:e.jsxs("span",{className:"loading-text",children:["Error Fetching Data: ",h]})}):e.jsx(e.Fragment,{children:a?e.jsxs("div",{children:[e.jsx("div",{className:"relative w-full discussion-page-banner",children:e.jsx("div",{className:"flex justify-center text-center discussion-page-header",children:e.jsxs("div",{className:"discussion-page-header-container",children:[e.jsx("div",{className:"capitalize discussion-page-tag",children:a.tag}),e.jsx("div",{className:"capitalize discussion-page-title",children:a.title})]})})}),e.jsx(ne,{children:e.jsxs("div",{className:"discussion-page-content-wrapper",children:[e.jsxs("div",{className:"dicussion-area",children:[e.jsx("div",{className:"discussion-thread",children:o.map((d,y)=>e.jsx(Xe,{post:d,userLikedComments:J,highlightedCommentId:b,handleLike:ms,handleUnLike:Ve,onReplyClick:cs,onEditClick:Rs,showMoreMenu:is,toggleMoreMenu:Ne,handleDeleteComment:us,moreMenuRef:Ms,onReplyLink:os},d.id))}),e.jsxs("div",{className:"reply-input-container",onClick:()=>te(!0),style:{cursor:"text"},children:[e.jsx("div",{className:"reply-input-avatar",children:t.passport!==""?e.jsx("div",{className:"userProfileImage w-[32px] h-[32px] sm:w-[35px] sm:h-[35px] md:w-[50px] md:h-[50px] rounded-[5rem] overflow-auto  shrink-0 flex",children:e.jsx("img",{src:`https://rsjobhub.com/${t.passport}`,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}):e.jsx("div",{className:"userProfileImage w-[32px] h-[32px] sm:w-[35px] sm:h-[35px] md:w-[50px] md:h-[50px] rounded-[5rem] overflow-auto  shrink-0 flex",children:e.jsx("img",{src:_e,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})})}),e.jsx("form",{className:"reply-input-form",children:e.jsx("div",{className:"reply-input-field",placeholder:"Write a Reply...",children:"Write a Reply..."})})]})]}),t.status==="admin"?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-[20%] reply-btn-area-with-action sticky top-[100px] right-0 height-[calc(100vh - 100px)]  z-[50] pt-[2rem]",children:[e.jsxs("div",{className:"flex rounded-[4px] gap-[.2rem] overflow-hidden",children:[e.jsx("button",{className:"w-full bg-[--primary] hover:bg-[--primary-hover] text-white px-[2rem] h-[40px] text-[14px] transition-[all_.2s_ease]",onClick:()=>te(!0),children:"Reply"}),e.jsx("button",{ref:V,className:`bg-[--primary] hover:bg-[--primary-hover] text-white px-[.5rem] transition-[all_.2s_ease] ${I?"bg-[#134fa3]":""}`,onClick:we,type:"button",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2.3",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-down",children:e.jsx("path",{d:"m6 9 6 6 6-6"})})})]}),I&&e.jsx("div",{className:"more-menu-container",ref:H,children:e.jsxs("div",{className:"flex flex-col absolute top-[100%] mt-[10px] left-[0] bg-[#fff] rounded-[6px] border border-[--text-primary-3] z-[10]  w-[100%]",children:[e.jsxs("button",{onClick:()=>C(!0),className:"gap-[.5rem] w-[100%] text-left bg-none border-0 text-[12px] text-[--text-primary] cursor-pointer flex items-start p-[15px_15px] hover:bg-[#071d290a] transition-[all_.2s_ease]",children:[e.jsx(Pe,{style:{fontSize:"16px"}}),"Rename"]}),e.jsxs("button",{onClick:()=>he(a.id),className:" gap-[.5rem] w-[100%] text-left bg-none border-0 text-[12px] text-[--text-primary] cursor-pointer flex items-start p-[15px_15px] hover:bg-[#071d290a] transition-[all_.2s_ease]",children:[e.jsx(Ae,{style:{fontSize:"16px"}}),"Delete"]})]})})]})}):t.id===a.author.id?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-[20%] reply-btn-area-with-action sticky top-[100px] right-0 height-[calc(100vh - 100px)]  z-[50] pt-[2rem]",children:[e.jsxs("div",{className:"flex rounded-[4px] gap-[.2rem] overflow-hidden",children:[e.jsx("button",{className:"w-full bg-[--primary] hover:bg-[--primary-hover] text-white px-[2rem] h-[40px] text-[14px] transition-[all_.2s_ease]",onClick:()=>te(!0),children:"Reply"}),e.jsx("button",{ref:V,className:`bg-[--primary] hover:bg-[--primary-hover] text-white px-[.5rem] transition-[all_.2s_ease] ${I?"bg-[#134fa3]":""}`,onClick:we,type:"button",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2.3",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-down",children:e.jsx("path",{d:"m6 9 6 6 6-6"})})})]}),I&&e.jsx("div",{className:"more-menu-container",ref:H,children:e.jsxs("div",{className:"flex flex-col absolute top-[100%] mt-[10px] left-[0] bg-[#fff] rounded-[6px] border border-[--text-primary-3] z-[10]  w-[100%]",children:[e.jsxs("button",{onClick:()=>C(!0),className:"gap-[.5rem] w-[100%] text-left bg-none border-0 text-[12px] text-[--text-primary] cursor-pointer flex items-start p-[15px_15px] hover:bg-[#071d290a] transition-[all_.2s_ease]",children:[e.jsx(Pe,{style:{fontSize:"16px"}}),"Rename"]}),e.jsxs("button",{onClick:()=>he(a.id),className:" gap-[.5rem] w-[100%] text-left bg-none border-0 text-[12px] text-[--text-primary] cursor-pointer flex items-start p-[15px_15px] hover:bg-[#071d290a] transition-[all_.2s_ease]",children:[e.jsx(Ae,{style:{fontSize:"16px"}}),"Delete"]})]})})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-[20%] reply-btn-area",children:e.jsx("button",{onClick:()=>te(!0),children:"Reply"})})})]})}),e.jsx(dn,{displaySidebarMenu:D,onCloseSidebar:ue,onSelectDiscussion:ls})]}):e.jsx("div",{className:"flex items-center justify-center w-full spinner-container pt-[5rem]"})})}),e.jsx(En,{open:g,onClose:()=>te(!1),replyToDiscussionId:n,onCommentAdded:Te}),e.jsx(ut,{open:j,onClose:()=>M(!1),replyToDiscussionId:n,replyToCommentId:L,onReplyCommentAdded:Re}),e.jsx(_n,{open:v,onClose:()=>C(!1),replyToDiscussionId:n,replyToDiscussionTitle:a==null?void 0:a.title,onRenameDiscussionTitle:ds}),e.jsx(mt,{open:x,onClose:()=>p(!1),editCommentDiscussionId:n,editCommentId:R==null?void 0:R.id,initialContent:R==null?void 0:R.content,onEditCommentContent:me}),e.jsx(Q,{in:ve,timeout:250,classNames:"fade-scale",unmountOnExit:!0,nodeRef:qe,children:e.jsx("div",{ref:qe,className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black bg-opacity-70 backdrop-blur-[5px]",children:e.jsx(Dn,{onCancel:Le,onConfirm:We})})}),e.jsx(Q,{in:oe,timeout:250,classNames:"fade-scale",unmountOnExit:!0,nodeRef:de,children:e.jsx("div",{ref:de,className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black bg-opacity-70 backdrop-blur-[5px]",children:e.jsx(ze,{onCancel:Ke})})})]})},Mn=()=>{const{authFetch:s,currentUser:t}=G(),[n,r]=l.useState(!1),[a,i]=l.useState(!1),o=ie(),c=ee(),u=P.useRef(null);function m(){o.pathname==="/"?c(0):c("/")}const{data:h=[],isLoading:f,isError:g,refetch:w}=ce({queryKey:["tags"],queryFn:()=>rt(s),staleTime:0,refetchOnWindowFocus:!0});function j(v){t.is_subscribed?r(v):i(!0)}function M(){i(!1)}return e.jsxs(e.Fragment,{children:[e.jsx(ge,{onStartDiscussion:()=>j(!0)}),e.jsx(ne,{children:e.jsxs("div",{className:"forumHomeLayout",children:[e.jsx(Ss,{onAllDiscussionsClick:m,currentPath:o.pathname,onStartDiscussion:()=>j(!0)}),f?e.jsxs("div",{className:"flex items-center justify-center w-full spinner-container",children:[e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"loading-text",children:"Loading..."})]}):g?e.jsx("div",{className:"flex items-center justify-center w-full pt-8",children:e.jsx("span",{className:"loading-text",children:"Failed to fetch tags."})}):h.length===0?e.jsx("div",{className:"flex items-center justify-center w-full pt-8",children:e.jsx("span",{className:"loading-text",children:"No tags found."})}):e.jsx("div",{className:"forumHomeMainSection",children:e.jsx("div",{className:"grid w-full grid-cols-1 gap-4 tag-card sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3",children:h.map(v=>e.jsx(A,{to:`/tags/${v.id}/${v.name}`,children:e.jsxs("div",{className:"relative w-full h-[150px] rounded-[5px] bg-white overflow-hidden flex flex-col justify-between p-4 transition-all duration-300 ease hover:scale-[1.01]",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-[#071d2910] pb-[.5rem]",children:[e.jsx("div",{className:"text-[14px] md:text-[14px] text-[--primary] font-[600]  capitalize",children:v.name}),e.jsx("div",{className:"tagDiscussionCount",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ft,{className:"tagDiscussionCount-icon"}),e.jsx("span",{className:"text-[12px]",children:Es(v.discussionCount)})]})})]}),e.jsxs("div",{className:"absolute flex flex-col items-start bottom-3 left-4 right-4",children:[e.jsx("span",{className:"text-[12px] font-medium opacity-80 last-discussion",children:v.lastDiscussionTitle!==null?v.lastDiscussionTitle:"No discussions"}),e.jsx("span",{className:"text-[10px] text-[#071d2980] uppercase last-discussion-createdAt",children:e.jsx(Ee,{createdAt:v.lastDiscussionCreatedAt})})]})]})},v.id))})})]})}),e.jsx(_s,{open:n,onClose:()=>j(!1)}),e.jsx(Q,{in:a,timeout:250,classNames:"fade-scale",unmountOnExit:!0,nodeRef:u,children:e.jsx("div",{ref:u,className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black bg-opacity-70 backdrop-blur-[5px]",children:e.jsx(ze,{onCancel:M})})})]})},Tn=(s=20,t=null)=>{const{authFetch:n}=G(),[r,a]=l.useState([]),[i,o]=l.useState(1),[c,u]=l.useState(!1),[m,h]=l.useState(!1),[f,g]=l.useState(!1),[w,j]=l.useState(!0),M=l.useCallback(async(p,D,F)=>{try{const _=await Zt(n,F);return Array.isArray(_)?_.slice(p,D):[]}catch(_){return console.error("Error fetching discussions by tag:",_),[]}},[n]),v=l.useCallback(async p=>{h(!0);try{const D=await M(0,s,p);a(D);const F=D.length;j(F===s),g(!0),o(1)}catch(D){console.error("Error fetching initial discussions:",D)}finally{h(!1)}},[M,s]);l.useEffect(()=>{v(t)},[v,t]);const C=l.useCallback(async()=>{u(!0),o(1),j(!0);try{const p=await M(0,s,t);a(p),j(p.length===s)}catch(p){console.error("Error refreshing discussions:",p)}finally{u(!1)}},[M,s,t]),x=l.useCallback(async()=>{if(m||!w)return;h(!0);const p=i+1,D=(p-1)*s,F=p*s;try{const _=await M(D,F,t);a(T=>[...T,..._]),o(p),j(_.length===s)}catch(_){console.error("Error loading more discussions:",_)}finally{h(!1)}},[i,s,M,w,m,t]);return{visibleDiscussions:r,isRefreshing:c,isLoading:m,isDataFetched:f,hasMore:w,handleRefresh:C,loadMoreDiscussions:x,setVisibleDiscussions:a}},Rn=()=>{const{authFetch:s,currentUser:t}=G(),{tagID:n,tagName:r}=Cs(),[a,i]=l.useState(!1),[o,c]=l.useState(20),[u,m]=l.useState(!1),h=ie(),f=ee(),g=P.useRef(null),{visibleDiscussions:w,isRefreshing:j,isLoading:M,isDataFetched:v,hasMore:C,handleRefresh:x,loadMoreDiscussions:p}=Tn(o,n),D=async N=>{try{const R={user_id:t.id,post_id:N},S=await ns(s,R);if(S.message==="Post has been marked as read")return;console.log(S)}catch(R){console.error("Error marking discussions as read:",R)}},F=async()=>{try{const N={user_id:t.id},R=await lt(s,N);R.message==="All posts marked as read"?x():console.log(R)}catch(N){console.error("Error marking all discussions as read:",N)}};function _(){h.pathname==="/"?x():f("/")}function T(N){t.is_subscribed?i(N):m(!0)}function L(){m(!1)}return e.jsxs(e.Fragment,{children:[e.jsx(ge,{onStartDiscussion:()=>T(!0)}),e.jsx(ne,{children:e.jsxs("div",{className:"forumHomeLayout",children:[e.jsx(Ss,{onAllDiscussionsClick:_,currentPath:h.pathname,onStartDiscussion:()=>T(!0)}),v?e.jsxs("div",{className:"forumHomeMainSection",children:[e.jsx("div",{className:"forum-filter-bar",children:w.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"forum-tag-title",children:e.jsxs("h1",{className:"font-[600] text-[--primary] uppercase flex items-center gap-1",children:[e.jsx(Rt,{className:"text-[14px] sm:text-[16px]"}),e.jsx("span",{className:" text-[12px] sm:text-[14px]",children:r})]})}),e.jsxs("div",{className:"filter-actions",children:[e.jsx("button",{className:`action-button refresh-button ${j?"refreshing":""}`,onClick:x,"aria-label":"Refresh",disabled:j||M,children:e.jsx(Gs,{})}),e.jsx("button",{className:"action-button mark-read-button",onClick:F,"aria-label":"Mark all as read",children:e.jsx(Ys,{})})]})]}):null}),j?e.jsxs("div",{className:"flex items-center justify-center w-full spinner-container",children:[e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}}),e.jsx("span",{className:"loading-text",children:"Loading..."})]}):e.jsxs("div",{className:"discussions-container",children:[w.length>0?e.jsx("ul",{className:"discussions-list",children:w.map(N=>e.jsx(Ds,{discussion:N,handleMarkAsRead:D},N.id))}):e.jsx("div",{className:"flex items-center justify-center w-full spinner-container",children:e.jsx("span",{className:"loading-text",children:e.jsxs("p",{className:"no-discussions-message",children:['No discussions found for this tag: "',r,'"']})})}),C&&e.jsx("div",{className:"load-more-container",children:M?e.jsx(e.Fragment,{children:e.jsx("div",{className:"spinner"})}):e.jsx(fe,{loadMoreDiscussions:p,isLoading:M})})]})]}):e.jsxs("div",{className:"flex items-center justify-center w-full spinner-container",children:[e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}}),e.jsxs("span",{className:"loading-text",children:['Loading discussions for "',r,'"...']})]})]})}),e.jsx(_s,{open:a,onClose:()=>T(!1)}),e.jsx(Q,{in:u,timeout:250,classNames:"fade-scale",unmountOnExit:!0,nodeRef:g,children:e.jsx("div",{ref:g,className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black bg-opacity-70 backdrop-blur-[5px]",children:e.jsx(ze,{onCancel:L})})})]})},Ln=P.createContext({}),ht=!0;function Fn({baseColor:s,highlightColor:t,width:n,height:r,borderRadius:a,circle:i,direction:o,duration:c,enableAnimation:u=ht,customHighlightBackground:m}){const h={};return o==="rtl"&&(h["--animation-direction"]="reverse"),typeof c=="number"&&(h["--animation-duration"]=`${c}s`),u||(h["--pseudo-element-display"]="none"),(typeof n=="string"||typeof n=="number")&&(h.width=n),(typeof r=="string"||typeof r=="number")&&(h.height=r),(typeof a=="string"||typeof a=="number")&&(h.borderRadius=a),i&&(h.borderRadius="50%"),typeof s<"u"&&(h["--base-color"]=s),typeof t<"u"&&(h["--highlight-color"]=t),typeof m=="string"&&(h["--custom-highlight-background"]=m),h}function Oe({count:s=1,wrapper:t,className:n,containerClassName:r,containerTestId:a,circle:i=!1,style:o,...c}){var u,m,h;const f=P.useContext(Ln),g={...c};for(const[p,D]of Object.entries(c))typeof D>"u"&&delete g[p];const w={...f,...g,circle:i},j={...o,...Fn(w)};let M="react-loading-skeleton";n&&(M+=` ${n}`);const v=(u=w.inline)!==null&&u!==void 0?u:!1,C=[],x=Math.ceil(s);for(let p=0;p<x;p++){let D=j;if(x>s&&p===x-1){const _=(m=D.width)!==null&&m!==void 0?m:"100%",T=s%1,L=typeof _=="number"?_*T:`calc(${_} * ${T})`;D={...D,width:L}}const F=P.createElement("span",{className:M,style:D,key:p},"‌");v?C.push(F):C.push(P.createElement(P.Fragment,{key:p},F,P.createElement("br",null)))}return P.createElement("span",{className:r,"data-testid":a,"aria-live":"polite","aria-busy":(h=w.enableAnimation)!==null&&h!==void 0?h:ht},t?C.map((p,D)=>P.createElement(t,{key:D},p)):C)}function $n(s){return B({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M48 48a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm448 16H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(s)}const In=({userid:s})=>{const[t,n]=l.useState("posts"),r=ie();return l.useEffect(()=>{r.pathname===`/user/${s}`?n("posts"):r.pathname===`/user/${s}/discussions`?n("discussions"):r.pathname===`/user/${s}/likes`?n("likes"):r.pathname===`/user/${s}/mentions`&&n("mentions")},[r.pathname]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"user-profile-sidebar",children:e.jsxs("ul",{children:[e.jsx(xs,{to:`/user/${s}`,children:e.jsxs("li",{className:`flex items-center gap-[.8rem]  ${t==="posts"?"active":""}`,children:[e.jsx("div",{className:"",children:e.jsx(Ie,{className:"text-[16px]"})}),e.jsx("p",{children:"Posts"})]})}),e.jsx(xs,{to:`/user/${s}/discussions`,children:e.jsxs("li",{className:`flex items-center gap-[.8rem]  ${t==="discussions"?"active":""}`,children:[e.jsx("div",{className:"",children:e.jsx($n,{className:"text-[16px]"})}),e.jsx("p",{children:"Discussions"})]})}),e.jsx(xs,{to:`/user/${s}/likes`,children:e.jsxs("li",{className:`flex items-center gap-[.8rem]  ${t==="likes"?"active":""}`,children:[e.jsx("div",{className:"",children:e.jsx(Zs,{className:"text-[16px]"})}),e.jsx("p",{children:"Likes"})]})})]})})})},gs=()=>e.jsxs("div",{className:"mb-[24px]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Oe,{width:60,height:16}),e.jsx(Oe,{width:120,height:16})]}),e.jsx(Oe,{height:40,count:2,style:{marginBottom:8}})]}),Un=()=>e.jsxs("div",{className:"mb-[24px]",children:[e.jsx(Oe,{width:180,height:24,style:{marginBottom:8}}),e.jsx(Oe,{height:32,count:2})]}),Z=20,Ze=()=>{const{authFetch:s,currentUser:t}=G(),n=je(),{userId:r}=Cs(),a=ie(),[i,o]=l.useState({}),[c,u]=l.useState(""),[m,h]=l.useState(!0),[f,g]=l.useState(null),[w,j]=l.useState(null),[M,v]=l.useState(!1),[C,x]=l.useState(null),[p,D]=l.useState(null),[F,_]=l.useState(!1),[T,L]=l.useState(null),[N,R]=l.useState(Z),[S,b]=l.useState(Z),[E,U]=l.useState(Z),[W,oe]=l.useState(Z),[Y,X]=l.useState([]),[le,I]=l.useState(!1),z=a.pathname===`/user/${r}`,V=a.pathname===`/user/${r}/discussions`,H=a.pathname===`/user/${r}/likes`,J=a.pathname===`/user/${r}/mentions`,se=P.useRef(null),{data:ve=[],isLoading:Me,error:rs,refetch:He}=ce({queryKey:["userPosts",r],enabled:z,staleTime:0,refetchOnWindowFocus:!0,queryFn:async()=>{const d=await sn(s,Number(r));return d&&Array.isArray(d)&&d.length>0?await Promise.all(d.map(async k=>{try{const $=await ws(s,k.post_id,r);return{...k,discussionTitle:$&&!$.error?$.title:"Unknown Discussion"}}catch{return{...k,discussionTitle:"Unknown Discussion"}}})):[]}}),{data:de=[],isLoading:qe,error:is,refetch:Ms}=ce({queryKey:["userDiscussions",r],enabled:V,staleTime:0,refetchOnWindowFocus:!0,queryFn:async()=>{const d=await en(s,Number(r));return d&&Array.isArray(d)?d:[]}}),{data:Ne=[],isLoading:as,error:os,refetch:Ts}=ce({queryKey:["userLikes",r],enabled:H,staleTime:0,refetchOnWindowFocus:!0,queryFn:async()=>{const d=await ks(s,Number(r));return d&&Array.isArray(d)&&d.length>0?await Promise.all(d.map(async k=>{try{const $=await ws(s,k.post_id,r);return{...k,discussionTitle:$&&!$.error?$.title:"Unknown Discussion"}}catch{return{...k,discussionTitle:"Unknown Discussion"}}})):[]}}),{data:ue=[],isLoading:ls,error:cs,refetch:Rs}=ce({queryKey:["userMentions",r],enabled:J,staleTime:0,refetchOnWindowFocus:!0,queryFn:async()=>{const d=[];return d&&Array.isArray(d)?d:[]}});l.useEffect(()=>{j(null);const d=Number(r);(async()=>{try{const k=await Xt(s,d);k&&!k.error?(o(k),h(!1),z?u("posts"):V?u("discussions"):H?u("likes"):J&&u("mentions")):(g("The page you are looking for is not available"),h(!1))}catch(k){g(k.message),h(!1);return}})()},[r,a.pathname,z,V,H,J,s]);const{showMoreMenu:we,moreMenuRef:Te,toggleMoreMenu:Re,setShowMoreMenu:ds}=dt();l.useEffect(()=>{R(Z),b(Z),U(Z),oe(Z)},[r,z,V,H,J]);const me=l.useMemo(()=>z?ve.slice(0,N):V?de.slice(0,S):H?Ne.slice(0,E):J?ue.slice(0,W):[],[z,V,H,J,ve,de,Ne,ue,N,S,E,W]),he=d=>{if(t.is_subscribed){x(d);const y=me.find(k=>k.id===d);D(y?y.post_id:null),v(!0)}else I(!0)},We=d=>{L(d),_(!0)},Le=async(d,y)=>{try{const k=await it(s,d);k.message==="Comment and its likes deleted successfully"&&(y==="userPosts"?(n.setQueryData(["userPosts",r],$=>$&&$.filter(hs=>hs.id!==d)),n.invalidateQueries({queryKey:["userLikes",r]})):y==="userLikes"&&(n.setQueryData(["userLikes",r],$=>$&&$.filter(hs=>hs.id!==d)),n.invalidateQueries({queryKey:["userPosts",r]})),Notification("success","Comment Deleted")),k.error==="Comment not found"&&Notification("failed","Invalid Comment ID")}catch(k){console.log(k)}ds(null)},us=d=>{z?(n.setQueryData(["userPosts",r],y=>y&&y.map(k=>Number(k.id)===Number(d.id)?{...k,content:d.content}:k)),n.invalidateQueries({queryKey:["userLikes",r]})):H&&(n.setQueryData(["userLikes",r],y=>y&&y.map(k=>Number(k.id)===Number(d.id)?{...k,content:d.content}:k)),n.invalidateQueries({queryKey:["userPosts",r]}))},ms=async d=>{try{const y={user_id:t.id,post_id:d},k=await ns(s,y);if(k.message==="Post has been marked as read")return;console.log(k)}catch(y){console.error("Error marking discussions as read:",y)}},Ve=()=>{};l.useEffect(()=>{(async()=>{if(t&&t.id)try{const y=await ks(s,t.id);X(Array.isArray(y)?y:[])}catch{X([])}})()},[s,t]);const te=async d=>{(await at(s,{comment_id:d,user_id:t.id})).message==="Comment liked successfully"?(X(k=>[...k,{id:d,liked_user_id:t.id}]),n.invalidateQueries({queryKey:["userLikes",r]})):Notification("failed","Failed to like comment",3e3)},Ke=async d=>{(await ot(s,{comment_id:d,user_id:t.id})).message==="Comment unliked successfully"?(X(k=>k.filter($=>!(Number($.liked_user_id)===Number(t.id)&&Number($.id)===Number(d)))),n.invalidateQueries({queryKey:["userLikes",r]})):Notification("failed","Failed to like comment",3e3)};function Qe(){I(!1)}return f?e.jsxs(e.Fragment,{children:[e.jsx(ge,{}),e.jsx(ne,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container pt-[5rem] text-[--text-primary-2]",children:f})})]}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{profilePageRoute:c,userId:r}),m?e.jsx("div",{className:"flex justify-center w-full spinner-container pt-[5rem]",children:e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}})}):e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("div",{className:"user-profile-banner",children:e.jsx(ne,{children:e.jsxs("div",{className:"flex gap-[1rem] sm:gap-[1.5rem] items-center flex-col sm:flex-row",children:[i.passport!==""?e.jsx("div",{className:"user-profile-image-wrapper w-[80px] h-[80px] sm:w-[90px] md:w-[110px]  sm:h-[90px] md:h-[110px] border-[3px] sm:border-4 border-white rounded-full overflow-hidden shadow-[0_0_5px_#000]",children:e.jsx("img",{src:`https://rsjobhub.com/${i.passport}`,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}):e.jsx("div",{className:"user-profile-image-wrapper w-[80px] h-[80px] sm:w-[90px] md:w-[110px]  sm:h-[90px] md:h-[110px] border-[3px] sm:border-4 border-white rounded-full overflow-hidden shadow-[0_0_5px_#000]",children:e.jsx("img",{src:_e,alt:"profile-image",className:"w-[100%] h-[100%] object-cover"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-white text-[14px] sm:text-[16px] capitalize",children:[i.first_name," ",i.last_name]}),e.jsxs("div",{className:"flex items-center gap-2 mt-[.5rem] sm:mt-[1rem] justify-center sm:justify-start",children:[e.jsx("div",{className:`user-profile-online-indicator w-[12px] h-[12px]  rounded-full ${i.status==="admin"?"bg-red-500":"bg-[--primary]"}`}),e.jsx("p",{className:"text-gray-300 text-[.8rem]",children:i.status==="admin"?"Admin":"User"})]})]})]})})}),e.jsx("section",{children:e.jsx(ne,{children:e.jsxs("div",{className:"user-profile-main-section mt-[2rem] flex gap-[3rem]",children:[e.jsx(In,{userid:r}),e.jsx("div",{className:"user-profile-content-area mb-[5rem]",children:z&&Me?e.jsx(e.Fragment,{children:Array.from({length:5}).map((d,y)=>e.jsx(gs,{},y))}):z&&rs?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:"Error loading posts."})}):z&&ve.length===0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:"Nothing to see here yet"})}):z?e.jsxs(e.Fragment,{children:[me.map(d=>e.jsxs("div",{className:"mb-[24px]",children:[e.jsxs("p",{className:"text-[.75rem] sm:text-[.8rem] font-[600]",children:["In ",e.jsx(A,{to:`/d/${d.post_id}/${d.id}`,className:"italic hover:underline",children:d.discussionTitle})]}),e.jsx(Xe,{post:d,userLikedComments:Y,handleUnLike:Ke,handleLike:te,onReplyClick:he,onEditClick:We,showMoreMenu:we,toggleMoreMenu:Re,handleDeleteComment:()=>Le(d.id,"userPosts"),moreMenuRef:Te,onReplyLink:Ve},d.id)]},d.id)),ve.length>N&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(fe,{loadMoreDiscussions:()=>R(d=>d+Z)})})})]}):V&&qe?e.jsx(e.Fragment,{children:Array.from({length:3}).map((d,y)=>e.jsx(Un,{},y))}):V&&is?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:"Error loading discussions."})}):V&&de.length===0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:"Nothing to see here yet"})}):V?e.jsxs(e.Fragment,{children:[me.map(d=>e.jsx(Ds,{discussion:d,handleMarkAsRead:ms},d.id)),de.length>S&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(fe,{loadMoreDiscussions:()=>b(d=>d+Z)})})})]}):H&&as?e.jsx(e.Fragment,{children:Array.from({length:5}).map((d,y)=>e.jsx(gs,{},y))}):H&&os?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:"Error loading likes."})}):H&&Ne.length===0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:"Nothing to see here yet"})}):H?e.jsxs(e.Fragment,{children:[me.map(d=>e.jsxs("div",{className:"mb-[24px]",children:[e.jsxs("p",{className:"text-[.75rem] sm:text-[.8rem] font-[600]",children:["in ",e.jsx(A,{to:`/d/${d.post_id}/${d.id}`,className:"italic hover:underline",children:d.discussionTitle})]}),e.jsx(Xe,{post:d,userLikedComments:Y,handleUnLike:Ke,handleLike:te,onReplyClick:he,onEditClick:We,showMoreMenu:we,toggleMoreMenu:Re,handleDeleteComment:()=>Le(d.id,"userLikes"),moreMenuRef:Te,onReplyLink:Ve},d.id)]},d.liked_id)),Ne.length>E&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(fe,{loadMoreDiscussions:()=>U(d=>d+Z)})})})]}):J&&ls?e.jsx(e.Fragment,{children:Array.from({length:5}).map((d,y)=>e.jsx(gs,{},y))}):J&&cs?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:"Error loading mentions."})}):J&&ue.length===0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:"Nothing to see here yet"})}):J?e.jsxs(e.Fragment,{children:[me.map(d=>e.jsxs("div",{className:"mb-[24px]",children:[e.jsxs("p",{className:"text-[.75rem] sm:text-[.8rem] font-[600]",children:["in ",e.jsx(A,{to:`/d/${d.post_id}/${d.id}`,className:"hover:underline",children:d.discussionTitle})]}),e.jsx(Xe,{post:d,handleLike,onReplyClick:he,showMoreMenu:we,toggleMoreMenu:Re,handleDeleteComment:Le,moreMenuRef:Te},d.id)]},d.id)),ue.length>W&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(fe,{loadMoreDiscussions:()=>oe(d=>d+Z)})})})]}):w?e.jsx("div",{className:"flex items-center justify-center w-full spinner-container text-[--text-primary-2]",children:w}):null})]})})})]})}),e.jsx(ut,{open:M,onClose:()=>v(!1),replyToDiscussionId:p,replyToCommentId:C})," ",e.jsx(mt,{open:F,onClose:()=>_(!1),editCommentDiscussionId:T==null?void 0:T.post_id,editCommentId:T==null?void 0:T.id,initialContent:T==null?void 0:T.content,onEditCommentContent:us}),e.jsx(Q,{in:le,timeout:250,classNames:"fade-scale",unmountOnExit:!0,nodeRef:se,children:e.jsx("div",{ref:se,className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black bg-opacity-70 backdrop-blur-[5px]",children:e.jsx(ze,{onCancel:Qe})})})]})};function On(){const s=ie();return l.useEffect(()=>{const n=(r=>{switch(r){case"/":return"RSJOBHUB FORUM";case"/notifications":return"NOTIFICATIONS - RSJOBHUB FORUM";case(r.startsWith("/d/")?r:void 0):return"DISCUSSION - RSJOBHUB FORUM";case(r.startsWith("/tags")?r:void 0):case(r.startsWith("/tags/")?r:void 0):return"TAGS - RSJOBHUB FORUM";case(r.startsWith("/user")?r:void 0):return"PROFILE - RSJOBHUB FORUM";default:return"RSJOBHUB FORUM"}})(s.pathname);document.title=n},[s.pathname]),null}const An=()=>{const{isAuthenticated:s}=G();return s?e.jsx(yt,{}):e.jsx(jt,{to:"/redirect",replace:!0})},Fe=()=>e.jsxs(e.Fragment,{children:[e.jsx(ge,{}),e.jsx("div",{className:"flex items-center justify-center w-full spinner-container pt-[5rem]",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-[.9rem] mb-[1rem]",children:"The Page you are looking for is not found"}),e.jsx(A,{to:"/",className:"text-[.9rem] text-[--primary] flex justify-center underline",children:"Back To Home"})]})})]}),Pn=()=>e.jsx("div",{className:"flex items-center justify-center w-full spinner-container pt-[5rem]",children:e.jsx("div",{children:e.jsx("p",{className:"text-[.9rem] mb-[1rem]",children:"Redirecting..."})})}),zn=()=>{const[s,t]=l.useState([]),n={success:{icon:gn,color:"text-green-600",bgColor:"bg-green-50",text:"Success",borderColor:"border-green-200"},failed:{icon:yn,color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200",text:"Failed"},"in-progress":{icon:vn,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",text:"In progress"},submitted:{icon:wn,color:"text-[#1966d2]",bgColor:"bg-[#f0f6fe]",borderColor:"border-[#1966d240]",text:"Submitted"}},r=(i,o=null,c=7e3)=>{const u=Date.now()+Math.random(),m=n[i];if(!m){console.warn(`Unknown notification type: ${i}`);return}const h={id:u,type:i,message:o||m.text,...m};t(f=>[...f,h]),setTimeout(()=>{t(f=>f.filter(g=>g.id!==u))},c)};P.useEffect(()=>(window.Notification=r,()=>{delete window.Notification}),[]);const a=i=>{t(o=>o.filter(c=>c.id!==i))};return e.jsx("div",{className:"fixed z-[999] space-y-2 bottom-8 left-8",children:s.map(i=>{const o=i.icon;return e.jsxs("div",{className:`
              flex items-center gap-3 px-4 py-3 rounded-[.8rem] border
              ${i.bgColor} ${i.borderColor}
              transform transition-all duration-300 ease-in-out cursor-pointer min-w-[250px] max-w-[250px] w-[100%] shadow-md
            `,onClick:()=>a(i.id),children:[e.jsx(o,{className:`w-4 h-4 md:w-5 md:h-5 ${i.color} ${i.type==="in-progress"?"animate-spin":""}`}),e.jsx("span",{className:`font-medium ${i.color} text-[.75rem] md:text-[.8rem]`,children:i.message})]},i.id)})})};function Bn(){return e.jsx(e.Fragment,{children:e.jsx(bt,{children:e.jsxs(St,{children:[e.jsx(On,{}),e.jsx(zn,{})," ",e.jsxs(vt,{children:[e.jsxs(K,{element:e.jsx(An,{}),children:[" ",e.jsx(K,{path:"/",element:e.jsx(cn,{})}),e.jsx(K,{path:"/d/:id",element:e.jsx(Hs,{})}),e.jsx(K,{path:"/d/:id/:commentId?",element:e.jsx(Hs,{})}),e.jsx(K,{path:"/tags",element:e.jsx(Mn,{})}),e.jsx(K,{path:"/tags/:tagID/:tagName",element:e.jsx(Rn,{})}),e.jsx(K,{path:"/user/:userId",element:e.jsx(Ze,{})}),e.jsx(K,{path:"/user/:userId/discussions",element:e.jsx(Ze,{})}),e.jsx(K,{path:"/user/:userId/likes",element:e.jsx(Ze,{})}),e.jsx(K,{path:"/user/:userId/mentions",element:e.jsx(Ze,{})}),e.jsx(K,{path:"*",element:e.jsx(Fe,{})}),e.jsx(K,{path:"/d/*",element:e.jsx(Fe,{})}),e.jsx(K,{path:"/tags/*",element:e.jsx(Fe,{})}),e.jsx(K,{path:"/user/*",element:e.jsx(Fe,{})}),e.jsx(K,{path:"/user/:userId/*",element:e.jsx(Fe,{})})]})," ",e.jsx(K,{path:"/redirect",element:e.jsx(Pn,{})})]})]})})})}const Hn=new xt;kt.createRoot(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(pt,{client:Hn,children:e.jsx(Bn,{})})}));
